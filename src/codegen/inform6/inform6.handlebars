! {{#if map.title}}{{{map.title}}}{{else}}Untitled Adventure{{/if}}
! Generated by Trizbort.io

Constant Story "{{#if map.title}}{{{map.title}}}{{else}}Untitled Adventure{{/if}}";
Constant Headline "^{{#if map.author}}by {{{map.author}}}^{{/if}}";

Include "Parser";
Include "VerbLib";

{{!-- Loop through rooms --}}
{{#each map.rooms}}
Object {{{i6ValidName this.name}}} "{{{this.name}}}"
  with description "{{#if this.description}}{{{this.description}}}{{else}}{{{this.name}}}{{/if}}"{{#each this.connections}},
       {{{i6DirProp this.startDir this.startType}}} {{{i6ValidName this.room.name}}}{{/each}}
  has {{#if this.dark}}~light{{else}}light{{/if}};

{{#each this.objects}}
{{> inform6Object object=this}}
{{/each}}
{{/each}}

{{!-- Set the starting location --}}
{{#each map.rooms}}
{{#if (i6IsStartRoom this)}}
[ Initialise;
  location = {{{i6ValidName this.name}}};
];

{{/if}}
{{/each}}
Include "Grammar";
