var __decorate=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;0<=s;s--)(r=e[s])&&(a=(i<3?r(a):3<i?r(t,n,a):r(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a},__extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();System.register("enums/Values",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(){}e.ZOOM_FRACTION=1.2,e.ZOOM_ADDITIVE=.1,e.COLOR_TRANSPARENT="rgba(0,0,0,0.004)",e.COLOR_LINE="#000000",e.COLOR_SELECTED_GLOW="rgba(255,215,0,0.5)",e.COLOR_SELECTED="rgb(255,215,0)",e.COLOR_HOVER="#FF8C00",e.COLOR_CONNECTOR="rgba(135, 206, 235, 0.5)",e.COLOR_CONNECTOR_HIGHLIGHT="rgb(255,215,0)",e.COLOR_RESIZE="rgba(135, 206, 235, 0.5)",e.COLOR_RESIZE_HIGHLIGHT="rgb(255,215,0)",e.COLOR_SELECTION_LINE="#292B71",e.COLOR_SELECTION_AREA="rgba(41, 43, 113, 0.4)",e.COLOR_STARTROOM="green",e.COLOR_ENDROOM="red",e.COLORS_STANDARD=["#FFFFFF","#D5E5D6","#D0E0F2","#F6D5D5","#F8DFD0","#E0DDF6","#DFDFDF","#CCCCCC","#333333","#000000"],e.DIMEN_ROOM_MIN_WIDTH=64,e.DIMEN_ROOM_MIN_HEIGHT=32,e.DIMEN_ROOM_MARGIN=6,e.DIMEN_STARTROOM_MARGIN=3,e.DIMEN_RESIZE_HANDLE=6,e.DIMEN_CONNECTOR_HANDLE=5,e.DIMEN_CONNECTOR_WIDE=20,e.VIEWS_FIRSTID=100,t("Values",e)}}}),System.register("enums/appEvent",[],function(t,e){"use strict";var n;e&&e.id;return{setters:[],execute:function(){var e;(e=n=n||{})[e.Select=0]="Select",e[e.MouseMove=1]="MouseMove",e[e.Delete=2]="Delete",e[e.Load=3]="Load",e[e.Refresh=4]="Refresh",e[e.Redraw=5]="Redraw",e[e.More=6]="More",e[e.Added=7]="Added",t("AppEvent",n)}}}),System.register("dispatcher",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){function o(){}o.subscribe=function(e){o.subscribers.push(e)},o.unsubscribe=function(e){o.subscribers.splice(o.subscribers.indexOf(e),1)},o.notify=function(e,t){for(var n=0;n<o.subscribers.length;n++)o.subscribers[n].notify(e,t)},o.subscribers=new Array,e("Dispatcher",o)}}}),System.register("io/xmlMap",[],function(n,e){"use strict";var i,a;e&&e.id;return n("Xml",function(n,o,r){return function(e,t){a.addField(e,t,n,o,r)}}),{setters:[],execute:function(){function e(e,t,n,o,r){this.klass=e,this.property=t,this.path=n,this.defaultValue=o,this.transform=r}function t(){}e.prototype.load=function(e,t){var n=t.getAttribute(this.path);n=n||this.defaultValue,this.transform&&(n=this.transform(n)),e[this.property]=n},i=e,t.addField=function(e,t,n,o,r){this.fields.push(new i(e,t,n,o,r))},t.load=function(t,n){this.fields.forEach(function(e){t instanceof e.klass.constructor&&e.load(t,n)})},t.fields=new Array,n("XmlMap",a=t)}}}),System.register("models/model",["dispatcher","enums/appEvent","io/xmlMap"],function(t,e){"use strict";var n,o,r;e&&e.id;return{setters:[function(e){n=e},function(e){o=e},function(e){r=e}],execute:function(){function e(){this.id=0,this._changed=!0}Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._changed=!0},enumerable:!0,configurable:!0}),e.prototype.getType=function(){return this.type},Object.defineProperty(e.prototype,"isChanged",{get:function(){return this._changed},enumerable:!0,configurable:!0}),e.prototype.forceChanged=function(){this._changed=!0},e.prototype.unChanged=function(){this._changed=!1},e.prototype.delete=function(){this.map.remove(this),n.Dispatcher.notify(o.AppEvent.Delete,this)},e.prototype.cloneToTargetField=function(e,t){if("object"==typeof this[t])throw"'"+t+"' field is a complex type. cloneToTarget failed with "+this.type;e[t]=this[t]},e.prototype.cloneToTarget=function(e){for(var t in this)this.hasOwnProperty(t)&&this.cloneToTargetField(e,t);return e},e.prototype.clone=function(){return null},e.prototype.bringToFront=function(){this.map.bringToFront(this)},e.prototype.bringForward=function(){this.map.bringForward(this)},e.prototype.sendBackward=function(){this.map.sendBackward(this)},e.prototype.sendToBack=function(){this.map.sendToBack(this)},e.prototype.isBackwardOf=function(e){return this.map.isBackward(this,e)},__decorate([r.Xml("id",0,function(e){return parseInt(e)})],e.prototype,"id",void 0),t("Model",e)}}}),System.register("enums/direction",[],function(n,e){"use strict";var o;e&&e.id;return{setters:[],execute:function(){var e,t;(e=o=o||{})[e.N=0]="N",e[e.NNE=1]="NNE",e[e.NE=2]="NE",e[e.ENE=3]="ENE",e[e.E=4]="E",e[e.ESE=5]="ESE",e[e.SE=6]="SE",e[e.SSE=7]="SSE",e[e.S=8]="S",e[e.SSW=9]="SSW",e[e.SW=10]="SW",e[e.WSW=11]="WSW",e[e.W=12]="W",e[e.WNW=13]="WNW",e[e.NW=14]="NW",e[e.NNW=15]="NNW",n("Direction",o),(t=o=o||{}).opposite=function(e){switch(e){case t.N:return t.S;case t.NNE:return t.SSW;case t.NE:return t.SW;case t.ENE:return t.WSW;case t.E:return t.W;case t.ESE:return t.WNW;case t.SE:return t.NW;case t.SSE:return t.NNW;case t.S:return t.N;case t.SSW:return t.NNE;case t.SW:return t.NE;case t.WSW:return t.ENE;case t.W:return t.E;case t.WNW:return t.ESE;case t.NW:return t.SE;case t.NNW:return t.SSE}},t.isCardinal=function(e){switch(e){case t.N:case t.NE:case t.E:case t.SE:case t.S:case t.SW:case t.W:case t.NW:return!0}return!1},t.toCardinalVector=function(e){switch(e){case t.N:case t.NNE:return{x:0,y:-1};case t.NE:return{x:1,y:-1};case t.ENE:case t.E:case t.ESE:return{x:1,y:0};case t.SE:return{x:1,y:1};case t.SSE:case t.S:case t.SSW:return{x:0,y:1};case t.SW:return{x:-1,y:1};case t.WSW:case t.W:case t.WNW:return{x:-1,y:0};case t.NW:return{x:-1,y:-1};case t.NNW:return{x:0,y:-1}}},t.toVector=function(e){switch(e){case t.N:return{x:0,y:-1};case t.NNE:return{x:.5,y:-1};case t.NE:return{x:1,y:-1};case t.ENE:return{x:1,y:-.5};case t.E:return{x:1,y:0};case t.ESE:return{x:1,y:.5};case t.SE:return{x:1,y:1};case t.SSE:return{x:.5,y:1};case t.S:return{x:0,y:1};case t.SSW:return{x:-.5,y:1};case t.SW:return{x:-1,y:1};case t.WSW:return{x:-1,y:.5};case t.W:return{x:-1,y:0};case t.WNW:return{x:-1,y:-.5};case t.NW:return{x:-1,y:-1};case t.NNW:return{x:-.5,y:-1}}},t.toRadians=function(e){switch(e){case t.N:return 12*Math.PI/8;case t.NNE:return 13*Math.PI/8;case t.NE:return 14*Math.PI/8;case t.ENE:return 15*Math.PI/8;case t.E:return 0*Math.PI/8;case t.ESE:return 1*Math.PI/8;case t.SE:return 2*Math.PI/8;case t.SSE:return 3*Math.PI/8;case t.S:return 4*Math.PI/8;case t.SSW:return 5*Math.PI/8;case t.SW:return 6*Math.PI/8;case t.WSW:return 7*Math.PI/8;case t.W:return 8*Math.PI/8;case t.WNW:return 9*Math.PI/8;case t.NW:return 10*Math.PI/8;case t.NNW:return 11*Math.PI/8}},t.toCursor=function(e){switch(e){case t.N:return"n-resize";case t.NE:return"ne-resize";case t.E:return"e-resize";case t.SE:return"se-resize";case t.S:return"s-resize";case t.SW:return"sw-resize";case t.W:return"w-resize";case t.NW:return"nw-resize"}},t.fromString=function(e){return"n"==(e=e.toLowerCase())?t.N:"nne"==e?t.NNE:"ne"==e?t.NE:"ene"==e?t.ENE:"e"==e?t.E:"ese"==e?t.ESE:"se"==e?t.SE:"sse"==e?t.SSE:"s"==e?t.S:"ssw"==e?t.SSW:"sw"==e?t.SW:"wsw"==e?t.WSW:"w"==e?t.W:"wnw"==e?t.WNW:"nw"==e?t.NW:"nnw"==e?t.NNW:void 0},n("Direction",o)}}}),System.register("enums/connectorHandle",[],function(t,e){"use strict";var n;e&&e.id;return{setters:[],execute:function(){var e;(e=n=n||{})[e.Start=0]="Start",e[e.End=1]="End",t("ConnectorHandle",n)}}}),System.register("enums/connectorType",[],function(n,e){"use strict";var o;e&&e.id;return{setters:[],execute:function(){var e,t;(e=o=o||{})[e.Default=0]="Default",e[e.In=1]="In",e[e.Out=2]="Out",e[e.Up=3]="Up",e[e.Down=4]="Down",n("ConnectorType",o),(t=o=o||{}).toString=function(e){switch(e){case t.In:return"in";case t.Out:return"out";case t.Up:return"up";case t.Down:return"dn";default:return""}},n("ConnectorType",o)}}}),System.register("enums/lineStyle",[],function(n,e){"use strict";var o;e&&e.id;return{setters:[],execute:function(){var e,t;(e=o=o||{})[e.None=0]="None",e[e.Solid=1]="Solid",e[e.Dash=2]="Dash",e[e.DashDot=3]="DashDot",e[e.DashDotDot=4]="DashDotDot",e[e.Dot=5]="Dot",n("LineStyle",o),(t=o=o||{}).fromString=function(e){return"none"==(e=e.toLowerCase())?t.None:"solid"==e?t.Solid:"dash"==e?t.Dash:"dashdot"==e?t.DashDot:"dashdotdot"==e?t.DashDotDot:"dot"==e?t.Dot:void 0},t.toArray=function(e){switch(e){case t.Solid:return[];case t.Dash:return[8,4];case t.DashDot:return[4,4];case t.DashDotDot:return[2,3];case t.Dot:return[3,2,2,2,4,2,2,2,3,2]}return[]},n("LineStyle",o)}}}),System.register("enums/mouseMode",[],function(t,e){"use strict";var n;e&&e.id;return{setters:[],execute:function(){var e;(e=n=n||{})[e.None=0]="None",e[e.Select=1]="Select",e[e.Drag=2]="Drag",e[e.Resize=3]="Resize",e[e.Connect=4]="Connect",e[e.Scroll=5]="Scroll",e[e.AddRoom=6]="AddRoom",e[e.AddNote=7]="AddNote",e[e.AddBlock=8]="AddBlock",t("MouseMode",n)}}}),System.register("enums/objectKind",[],function(t,e){"use strict";var n;e&&e.id;return{setters:[],execute:function(){var e;(e=n=n||{})[e.PersonMale=0]="PersonMale",e[e.PersonFemale=1]="PersonFemale",e[e.PersonNeuter=2]="PersonNeuter",e[e.ProperNamed=3]="ProperNamed",e[e.Actor=4]="Actor",e[e.Item=5]="Item",e[e.Scenery=6]="Scenery",e[e.Supporter=7]="Supporter",e[e.Container=8]="Container",e[e.SingularNamed=9]="SingularNamed",e[e.PluralNamed=10]="PluralNamed",t("ObjectKind",n)}}}),System.register("enums/roomShape",[],function(t,e){"use strict";var n;e&&e.id;return{setters:[],execute:function(){var e;(e=n=n||{})[e.Rectangle=0]="Rectangle",e[e.Ellipse=1]="Ellipse",e[e.Octagon=2]="Octagon",t("RoomShape",n)}}}),System.register("enums/enums",["enums/appEvent","enums/direction","enums/connectorHandle","enums/connectorType","enums/lineStyle","enums/mouseMode","enums/objectKind","enums/roomShape","enums/Values"],function(o,e){"use strict";e&&e.id;function t(e){var t={};for(var n in e)"default"!==n&&(t[n]=e[n]);o(t)}return{setters:[function(e){t(e)},function(e){t(e),t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)}],execute:function(){}}}),System.register("models/mapSettings",["enums/enums"],function(t,e){"use strict";var n,o,r,i,a,s,l;e&&e.id;return{setters:[function(e){n=e}],execute:function(){function e(){this.grid=new o,this.room=new r,this.connector=new i,this.note=new a,this.block=new s,this.draw=new l}t("fontSettings",function(){}),o=function(){this.visible=!0,this.origin=!0,this.snap=!0,this.size=32,this.color="#f0f0f0",this.lineWidth=1,this.originWidth=5,this.background="#ffffff"},r=function(){this.width=96,this.height=64,this.margin=6,this.lineWidth=2,this.lineStyle=n.LineStyle.Solid,this.shape=n.RoomShape.Rectangle,this.rounding=0,this.darknessSize=50,this.fillColor="#ffffff",this.borderColor="#000000",this.nameColor="#333333",this.subtitleColor="#666666",this.darkColor="rgba(33, 35, 97, 0.8)",this.startRoomColor="green",this.endRoomColor="red",this.fontCfg=function(e,t){var n=e?{size:13,family:"danielbd"}:{size:14.4,family:"Roboto"};return"obj"==t?n:n.size+"px "+n.family},this.font2Cfg=function(e,t){var n=e?{size:11,family:"danielbd"}:{size:11.8,family:"Roboto"};return"obj"==t?n:n.size+"px "+n.family}},i=function(){this.lineWidth=1,this.lineStyle=n.LineStyle.Solid,this.isCurve=!1,this.color="#000000",this.stalk=16,this.arrowSize=5,this.curveStrength=.4,this.labelDistance=12,this.fontCfg=function(e,t){var n=e?{size:11.8,family:"danielbd"}:{size:12.8,family:"Roboto"};return"obj"==t?n:n.size+"px "+n.family},this.font2Cfg=function(e,t){var n=e?{size:9.8,family:"danielbd"}:{size:10.8,family:"Roboto"};return"obj"==t?n:n.size+"px "+n.family}},a=function(){this.minWidth=64,this.minHeight=32,this.width=96,this.height=64,this.margin=6,this.lineWidth=1,this.lineStyle=n.LineStyle.Solid,this.shape=n.RoomShape.Rectangle,this.rounding=0,this.fillColor="#ffffff",this.borderColor="#000000",this.textColor="#333333",this.fontCfg=function(e,t){var n=e?{size:13,family:"danielbd"}:{size:14.4,family:"Roboto"};return"obj"==t?n:n.size+"px "+n.family}},s=function(){this.minWidth=64,this.minHeight=32,this.width=96,this.height=64,this.margin=6,this.lineWidth=1,this.lineStyle=n.LineStyle.None,this.shape=n.RoomShape.Rectangle,this.rounding=0,this.fillColor="#D5E5D6",this.borderColor="#000000"},l=function(){this.hand=!1},e.prototype.cloneToTarget=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},e.prototype.cloneFrom=function(e){var t=e;return this.cloneToTarget(t.grid,this.grid),this.cloneToTarget(t.room,this.room),this.cloneToTarget(t.connector,this.connector),this.cloneToTarget(t.note,this.note),this.cloneToTarget(t.block,this.block),this.cloneToTarget(t.draw,this.draw),this},t("MapSettings",e)}}}),System.register("models/box",["models/model","enums/enums"],function(t,e){"use strict";var o,c;e&&e.id;return{setters:[function(e){o=e},function(e){c=e}],execute:function(){function e(e){var t=n.call(this)||this;return t._x=0,t._y=0,t}var n;n=o.Model,__extends(e,n),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._w},set:function(e){this._w=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._h},set:function(e){this._h=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this._fillColor},set:function(e){this._fillColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor},set:function(e){this._borderColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rounding",{get:function(){return this._rounding},set:function(e){this._rounding=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(e){this._shape=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineStyle",{get:function(){return this._lineStyle},set:function(e){this._lineStyle=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(e){this._lineWidth=e,this._changed=!0},enumerable:!0,configurable:!0}),e.prototype.directionToPos=function(e,t){var n=0,o=0;if(this.shape==c.RoomShape.Rectangle||t){var r=c.Direction.toVector(e),i=r.x,a=r.y;n=Math.floor(i*(this._w/2)+this._w/2)+this._x,o=Math.floor(a*(this._h/2)+this._h/2)+this._y;var s=this.rounding;s>.25*this._w&&(s=.25*this._w),s>.25*this._h&&(s=.25*this._h);var l=s-Math.sqrt(s*s/2);e==c.Direction.NW&&(n+=l,o+=l),e==c.Direction.NE&&(n-=l,o+=l),e==c.Direction.SE&&(n-=l,o-=l),e==c.Direction.SW&&(n+=l,o-=l)}else if(this.shape==c.RoomShape.Ellipse)n=Math.floor(Math.cos(c.Direction.toRadians(e))*(this.width/2)+this.width/2)+this.x,o=Math.floor(Math.sin(c.Direction.toRadians(e))*(this.height/2)+this.height/2)+this.y;else if(this.shape==c.RoomShape.Octagon){var d=c.Direction.toVector(e);i=d.x,a=d.y,1==Math.abs(i)&&1==Math.abs(a)&&(i*=.75,a*=.75),n=Math.floor(i*(this.width/2)+this.width/2)+this.x,o=Math.floor(a*(this.height/2)+this.height/2)+this.y}return{x:n,y:o}},t("Box",e)}}}),System.register("models/connector",["models/model","enums/enums","models/mapSettings","enums/connectorType"],function(t,e){"use strict";var o,r,i,a;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e}],execute:function(){function e(e){var t=n.call(this)||this;return t._type="Connector",t._name="",t._dockStart=null,t._dockEnd=null,t._startDir=r.Direction.N,t._endDir=r.Direction.S,t._startX=t.startY=0,t._endX=t.endY=0,t._oneWay=!1,t._startType=a.ConnectorType.Default,t._endType=a.ConnectorType.Default,t._startLabel="",t._endLabel="",t}var n;n=o.Model,__extends(e,n),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startX",{get:function(){return this._startX},set:function(e){this._startX=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startY",{get:function(){return this._startY},set:function(e){this._startY=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endX",{get:function(){return this._endX},set:function(e){this._endX=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endY",{get:function(){return this._endY},set:function(e){this._endY=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dockStart",{get:function(){return this._dockStart},set:function(e){this._dockStart=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dockEnd",{get:function(){return this._dockEnd},set:function(e){this._dockEnd=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startDir",{get:function(){return this._startDir},set:function(e){this._startDir=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDir",{get:function(){return this._endDir},set:function(e){this._endDir=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oneWay",{get:function(){return this._oneWay},set:function(e){this._oneWay=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startType",{get:function(){return this._startType},set:function(e){this._startType=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endType",{get:function(){return this._endType},set:function(e){this._endType=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLabel",{get:function(){return this._startLabel},set:function(e){this._startLabel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLabel",{get:function(){return this._endLabel},set:function(e){this._endLabel=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return null!=this._color?this._color:this.map.settings.connector.color},set:function(e){this._color=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineStyle",{get:function(){return null!=this._lineStyle?this._lineStyle:this.map.settings.connector.lineStyle},set:function(e){this._lineStyle=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return null!=this._lineWidth?this._lineWidth:this.map.settings.connector.lineWidth},set:function(e){this._lineWidth=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCurve",{get:function(){return null!=this._isCurve?this._isCurve:this.map.settings.connector.isCurve},set:function(e){this._isCurve=e,this._changed=!0},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){var e,t;this.isDoubleDocked()&&(e=[this.dockStart,this.dockEnd],this.dockEnd=e[0],this.dockStart=e[1],t=[this.startDir,this.endDir],this.endDir=t[0],this.startDir=t[1])},e.prototype.isDoubleDocked=function(){return this.dockStart&&this.dockEnd},e.prototype.clone=function(){return this.cloneToTarget(new e(new i.MapSettings))},t("Connector",e)}}}),System.register("models/obj",["enums/enums","models/model"],function(n,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(){var e=t.call(this)||this;return e._name="Object",e._type="Object",e._description="",e._kind=o.ObjectKind.Item,e._content=new Array,e}var t;t=r.Model,__extends(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return this._kind},set:function(e){this._kind=e,this._changed=!0},enumerable:!0,configurable:!0}),n("Obj",e)}}}),System.register("models/room",["models/box","models/map","models/mapSettings","models/connector"],function(t,e){"use strict";var o,r,i,a;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e}],execute:function(){function e(e){var t=n.call(this,e)||this;return t._type="Room",t._name="Room",t._subtitle="",t._description="",t._dark=!1,t._endroom=!1,t._w=e.room.width,t._h=e.room.height,t.objects=new Array,t}var n;n=o.Box,__extends(e,n),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitle",{get:function(){return this._subtitle},set:function(e){this._subtitle=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dark",{get:function(){return this._dark},set:function(e){this._dark=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endroom",{get:function(){return this._endroom},set:function(e){this._endroom=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nameColor",{get:function(){return this._nameColor?this._nameColor:this.map.settings.room.nameColor},set:function(e){this._nameColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleColor",{get:function(){return this._subtitleColor?this._subtitleColor:this.map.settings.room.subtitleColor},set:function(e){this._subtitleColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this._fillColor?this._fillColor:this.map.settings.room.fillColor},set:function(e){this._fillColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor?this._borderColor:this.map.settings.room.borderColor},set:function(e){this._borderColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rounding",{get:function(){return null!=this._rounding?this._rounding:this.map.settings.room.rounding},set:function(e){this._rounding=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return null!=this._shape?this._shape:this.map.settings.room.shape},set:function(e){this._shape=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineStyle",{get:function(){return null!=this._lineStyle?this._lineStyle:this.map.settings.room.lineStyle},set:function(e){this._lineStyle=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return null!=this._lineWidth?this._lineWidth:this.map.settings.room.lineWidth},set:function(e){this._lineWidth=e,this._changed=!0},enumerable:!0,configurable:!0}),e.prototype.isStartRoom=function(){return this.map.startRoom==this},e.prototype.setStartRoom=function(e){e?this.map.setStartRoom(this):this.isStartRoom&&this.map.setStartRoom(null),this._changed=!0},e.prototype.hasConnection=function(t){var n=this,o=!1;return this.map.elements.forEach(function(e){e instanceof a.Connector&&(e.dockStart==n&&e.startDir==t&&(o=!0),e.dockEnd==n&&e.endDir==t&&(o=!0))}),o},e.prototype.cloneToTargetField=function(e,t){switch(t){case"objects":e[t]=this.objects.slice(0);break;case"map":e[t]||(e[t]=new r.Map),e[t].clone(this.map);break;default:n.prototype.cloneToTargetField.call(this,e,t)}},e.prototype.clone=function(){return this.cloneToTarget(new e(new i.MapSettings))},Object.defineProperty(e.prototype,"connectors",{get:function(){var t=this;return this.map.elements.filter(function(e){return e instanceof a.Connector&&e.dockStart&&e.dockEnd&&(e.dockStart==t||e.dockEnd==t)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var t=this;return this.connectors.map(function(e){return e.dockStart==t?{startDir:e.startDir,startType:e.startType,endDir:e.endDir,endType:e.endType,room:e.dockEnd}:{startDir:e.endDir,startType:e.endType,endDir:e.startDir,endType:e.startType,room:e.dockStart}})},enumerable:!0,configurable:!0}),t("Room",e)}}}),System.register("models/block",["models/box","models/mapSettings"],function(t,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e){var t=n.call(this,e)||this;return t._type="Block",t._w=e.block.width,t._h=e.block.height,t}var n;n=o.Box,__extends(e,n),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this._fillColor?this._fillColor:this.map.settings.block.fillColor},set:function(e){this._fillColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor?this._borderColor:this.map.settings.block.borderColor},set:function(e){this._borderColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rounding",{get:function(){return null!=this._rounding?this._rounding:this.map.settings.block.rounding},set:function(e){this._rounding=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return null!=this._shape?this._shape:this.map.settings.block.shape},set:function(e){this._shape=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineStyle",{get:function(){return null!=this._lineStyle?this._lineStyle:this.map.settings.block.lineStyle},set:function(e){this._lineStyle=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return null!=this._lineWidth?this._lineWidth:this.map.settings.block.lineWidth},set:function(e){this._lineWidth=e,this._changed=!0},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return this.cloneToTarget(new e(new r.MapSettings))},t("Block",e)}}}),System.register("models/note",["models/box","models/mapSettings"],function(t,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e){var t=n.call(this,e)||this;return t.type="Note",t.text="Note",t._w=e.note.width,t._h=e.note.height,t}var n;n=o.Box,__extends(e,n),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor?this._textColor:this.map.settings.note.textColor},set:function(e){this._textColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColor",{get:function(){return this._fillColor?this._fillColor:this.map.settings.note.fillColor},set:function(e){this._fillColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._borderColor?this._borderColor:this.map.settings.note.borderColor},set:function(e){this._borderColor=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rounding",{get:function(){return null!=this._rounding?this._rounding:this.map.settings.note.rounding},set:function(e){this._rounding=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return null!=this._shape?this._shape:this.map.settings.note.shape},set:function(e){this._shape=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineStyle",{get:function(){return null!=this._lineStyle?this._lineStyle:this.map.settings.note.lineStyle},set:function(e){this._lineStyle=e,this._changed=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return null!=this._lineWidth?this._lineWidth:this.map.settings.note.lineWidth},set:function(e){this._lineWidth=e,this._changed=!0},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return this.cloneToTarget(new e(new r.MapSettings))},t("Note",e)}}}),System.register("models/map",["models/room","models/mapSettings","models/connector","models/block","models/note"],function(t,e){"use strict";var r,n,i,a,s;e&&e.id;return{setters:[function(e){r=e},function(e){n=e},function(e){i=e},function(e){a=e},function(e){s=e}],execute:function(){function e(){this.settings=new n.MapSettings,this.title="",this.author="",this.description="",this.elements=new Array,this.startRoom=null}e.prototype.clone=function(e){Object.assign(this,e)},e.prototype.clear=function(){this.elements.length=0},e.prototype.add=function(e){this.elements.push(e),e.map=this},e.prototype.remove=function(e){e==this.startRoom&&(this.startRoom=null),this.elements.splice(this.elements.indexOf(e),1)},e.prototype.findById=function(e,t){for(var n=0;n<this.elements.length;n++)if(this.elements[n]instanceof t&&this.elements[n].id==e)return this.elements[n]},e.prototype.setStartRoom=function(e){this.startRoom=e},e.prototype.bringToFront=function(e){var t=this.elements.indexOf(e);this.elements.splice(t,1),this.elements.push(e)},e.prototype.bringForward=function(e){var t=this.elements.indexOf(e);t>=this.elements.length||(this.elements.splice(t,1),this.elements.splice(t+1,0,e))},e.prototype.sendBackward=function(e){var t=this.elements.indexOf(e);t<=0||(this.elements.splice(t,1),this.elements.splice(t-1,0,e))},e.prototype.sendToBack=function(e){var t=this.elements.indexOf(e);this.elements.splice(t,1),this.elements.unshift(e)},e.prototype.isBackward=function(e,t){var n,o;return e instanceof a.Block&&t instanceof i.Connector||e instanceof a.Block&&(t instanceof r.Room||t instanceof s.Note)||(e instanceof r.Room||e instanceof s.Note)&&t instanceof i.Connector||(n=this.elements.indexOf(e))<(o=this.elements.indexOf(t))&&e instanceof a.Block&&t instanceof a.Block||n<o&&(e instanceof r.Room||e instanceof s.Note)&&(t instanceof r.Room||t instanceof s.Note)||n<o&&e instanceof i.Connector&&t instanceof i.Connector},Object.defineProperty(e.prototype,"rooms",{get:function(){return this.elements.filter(function(e){return e instanceof r.Room})},enumerable:!0,configurable:!0}),t("Map",e)}}}),System.register("drawing/IScreen",[],function(r,e){"use strict";var i,a,s,l;e&&e.id;return{setters:[],execute:function(){var e,t,n,o;(e=i=i||{})[e.Butt=0]="Butt",e[e.Round=1]="Round",e[e.Square=2]="Square",r("CapStyle",i),(t=a=a||{})[t.Miter=0]="Miter",t[t.Round=1]="Round",t[t.Bevel=2]="Bevel",r("JoinStyle",a),(n=s=s||{})[n.Start=0]="Start",n[n.End=1]="End",n[n.Left=2]="Left",n[n.Right=3]="Right",n[n.Center=4]="Center",r("TextAlign",s),(o=l=l||{})[o.Alphabetic=0]="Alphabetic",o[o.Top=1]="Top",o[o.Hanging=2]="Hanging",o[o.Middle=3]="Middle",o[o.Ideographic=4]="Ideographic",o[o.Bottom=5]="Bottom",r("TextBaseline",l)}}}),System.register("drawing/drawContext",[],function(t,e){"use strict";var n;e&&e.id;return{setters:[],execute:function(){function e(e,t){this.ctx=e,this.fd=new n,this.fuzzNormal={count:0,rnds:[0,0]},t&&Object.assign(this,t)}t("FuzzDrawing",n=function(){this.fsteps=15,this.msteps=2,this.ff=3,this.ffc=2}),e.prototype.fuzz=function(e,t){var n=this.fuzzNormal.count,o=Math.random()-.5;2==++this.fuzzNormal.count&&(this.fuzzNormal.count=0);var r=e+t*(o-this.fuzzNormal.rnds[n]);return this.fuzzNormal.rnds[n]=o,r},e.prototype.dist2=function(e,t,n,o){var r=n-e,i=o-t;return Math.sqrt(r*r+i*i)},e.prototype.hdLine=function(e,t,n,o){var i;function r(e,t,n){if(void 0!==n){var o=Math.pow(n,3),r=o*n;i=15*r-r*n*6-10*o}return e+(e-t)*i}var a=this.dist2(e,t,n,o),s=Math.ceil(a/this.fd.fsteps);s<this.fd.msteps&&(s=this.fd.msteps);for(var l=this.fd.ff/(s==this.fd.msteps?1.4:1),d=r(e,n,0),c=r(t,o),p=1;p<=s;p++){var u=d,h=c;d=r(e,n,p/s),c=r(t,o),this.ctx.quadraticCurveTo(this.fuzz((u+d)/2,l),this.fuzz((h+c)/2,l),d,c)}return this},e.prototype.hdRoundedRect=function(e,t,n,o,r,i){var a=Math.PI/2,s=e,l=t,d=e+n,c=t+o;return r=r||0,i=i||r||0,this.hdLine(s+r,l,d-r,l),0<r&&(a=Math.PI/2,this.hdEllipse(d-r,l+i,r,i,0,3*a,2*Math.PI)),this.hdLine(d,l+i,d,c-i),0<r&&this.hdEllipse(d-r,c-i,r,i,0,0,a),this.hdLine(d-r,c,s+r,c),0<r&&this.hdEllipse(s+r,c-i,r,i,0,a,Math.PI),this.hdLine(s,c-i,s,l+i),0<r&&this.hdEllipse(s+r,l+i,r,i,0,Math.PI,3*a),this},e.prototype.hdEllipse=function(e,t,n,o,r,i,a){var s=2*Math.PI;i=i||0,a=a||s,r=r||0;var l=Math.cos(r),d=Math.sin(r),c=this.fd.msteps+(n+o)/2*this.fd.fsteps/10,p=this.fd.ffc*Math.pow(n,.5)*.3/Math.pow(c,.25),u=this.fd.ffc*Math.pow(o,.5)*.3/Math.pow(c,.25),h=n*(.95+.1*Math.random()),m=o*(.95+.1*Math.random()),f=(a-i)/c,y=i,b=e+(k=h*Math.cos(y))*l-(C=m*Math.sin(y))*d,g=t+k*d+C*l;this.hdLine(e+n*Math.cos(y)*l-o*Math.sin(y)*d,t+n*Math.cos(y)*d+o*Math.sin(y)*l,b,g);for(var v=1;v<=c;v++){y+=f;var k,C,S=b,w=g;b=e+(k=h*Math.cos(y))*l-(C=m*Math.sin(y))*d,g=t+k*d+C*l,this.ctx.quadraticCurveTo(this.fuzz((S+b)/2,p),this.fuzz((w+g)/2,u),b,g)}return this.hdLine(b,g,e+n*Math.cos(a)*l-o*Math.sin(a)*d,t+n*Math.cos(a)*d+o*Math.sin(a)*l),this},e.prototype.hdOctagon=function(e,t,n,o){return this.hdLine(e,t+.25*o,e+.25*n,t),this.hdLine(e+.25*n,t,e+.75*n,t),this.hdLine(e+.75*n,t,e+n,t+.25*o),this.hdLine(e+n,t+.25*o,e+n,t+.75*o),this.hdLine(e+n,t+.75*o,e+.75*n,t+o),this.hdLine(e+.75*n,t+o,e+.25*n,t+o),this.hdLine(e+.25*n,t+o,e,t+.75*o),this.hdLine(e,t+.75*o,e,t+.25*o),this},e.prototype.bsplit=function(e,t){var n=e.length-1,o=[],r=[],i=[],a=1-t;function s(e,t){for(var n=[],o=0;o<e.length;o++)n.push(t*e[o]);return n}function l(e,t){for(var n=[],o=0;o<Math.min(e.length,t.length);o++)n.push(e[o]+t[o]);return n}for(var d=0;d<=n;d++)e[d]="object"==typeof e[d]?e[d]:[e[d]],o.push([e[d]]);for(var c=1;c<=n;c++)for(d=0;d<=n-c;d++)o[d].push(l(s(o[d][c-1],a),s(o[d+1][c-1],t)));for(c=0;c<=n;c++)r.push(o[0][c]),i.push(o[c][n-c]);return[r,i]},e.prototype.hdBezier3=function(e,t,n,o,r,i,a,s){for(var l=3*this.dist2(e,t,a,s),d=Math.ceil(Math.pow(l/this.fd.fsteps,.9)),c=.8*this.fd.ff,p=[e,t],u=[n,o],h=[r,i],m=[a,s],f=[p,u,h,m],y=d;0<y;y--){var b=this.bsplit(f,1/y),g=b[0];f=b[1],p=g[0],u=g[1],h=g[2],m=g[3],this.ctx.moveTo(p[0],p[1]),this.ctx.quadraticCurveTo(this.fuzz((u[0]+h[0])/2,c),this.fuzz((u[1]+h[1])/2,c),m[0],m[1])}return this},e.prototype.hdBezier2=function(e,t,n,o,r,i){for(var a=3*this.dist2(e,t,r,i),s=Math.ceil(Math.pow(a/this.fd.fsteps,.9)),l=.8*this.fd.ff,d=[e,t],c=[n,o],p=[r,i],u=[d,c,p],h=s;0<h;h--){var m=this.bsplit(u,1/h),f=m[0];u=m[1],d=f[0],c=f[1],p=f[2],this.ctx.moveTo(d[0],d[1]),this.ctx.quadraticCurveTo(this.fuzz(c[0],l),this.fuzz(c[1],l),p[0],p[1])}return this},t("DrawContext",e)}}}),System.register("drawing/canvas",["drawing/IScreen","enums/enums","app","drawing/drawContext"],function(t,e){"use strict";var h,n,c,o;e&&e.id;return{setters:[function(e){h=e},function(e){n=e},function(e){c=e},function(e){o=e}],execute:function(){function e(e){this.ctx=e,this.ctx=e,this.drawer=new o.DrawContext(this.ctx)}e.prototype.save=function(){return this.ctx.save(),this},e.prototype.restore=function(){return this.ctx.restore(),this},e.prototype.translate=function(e,t){return this.ctx.translate(e,t),this},e.prototype.rotate=function(e){return this.ctx.rotate(e),this},e.prototype.scale=function(e,t){return void 0===t&&(t=e),this.ctx.scale(e,t),this},e.prototype.moveTo=function(e,t){return this.ctx.moveTo(e,t),this},e.prototype.beginPath=function(){return this.ctx.beginPath(),this},e.prototype.closePath=function(){return this.ctx.closePath(),this},e.prototype.stroke=function(){return this.ctx.stroke(),this},e.prototype.fill=function(){return this.ctx.fill(),this},e.prototype.fillStyle=function(e){return this.ctx.fillStyle=e,this},e.prototype.strokeStyle=function(e){return this.ctx.strokeStyle=e,this},e.prototype.fillRect=function(e,t,n,o){return this.ctx.fillRect(e,t,n,o),this},e.prototype.strokeRect=function(e,t,n,o){return this.ctx.strokeRect(e,t,n,o),this},e.prototype.clearRect=function(e,t,n,o){return this.ctx.clearRect(e,t,n,o),this},e.prototype.lineWidth=function(e){return this.ctx.lineWidth=e,this},e.prototype.lineCap=function(e){switch(e){case h.CapStyle.Butt:this.ctx.lineCap="butt";break;case h.CapStyle.Round:this.ctx.lineCap="round";break;case h.CapStyle.Square:this.ctx.lineCap="square"}return this},e.prototype.lineJoin=function(e){switch(e){case h.JoinStyle.Miter:this.ctx.lineJoin="miter";break;case h.JoinStyle.Round:this.ctx.lineJoin="round";break;case h.JoinStyle.Bevel:this.ctx.lineJoin="bevel"}return this},e.prototype.lineDash=function(e){switch(e){case n.LineStyle.Solid:this.ctx.setLineDash([]);break;case n.LineStyle.Dash:this.ctx.setLineDash([8,4]);break;case n.LineStyle.DashDot:this.ctx.setLineDash([4,4]);break;case n.LineStyle.DashDotDot:this.ctx.setLineDash([2,3]);break;case n.LineStyle.Dot:this.ctx.setLineDash([3,2,2,2,4,2,2,2,3,2])}return this},e.prototype.lineTo=function(e,t){return this.ctx.lineTo(e,t),this},e.prototype.line=function(e,t,n,o){return c.App.map.settings.draw.hand?this.drawer.hdLine(e,t,n,o):(this.ctx.moveTo(e,t),this.ctx.lineTo(n,o)),this},e.prototype.arc=function(e,t,n,o,r,i){return this.ctx.arc(e,t,n,o,r,i||!1),this},e.prototype.arcTo=function(e,t,n,o,r){return this.ctx.arcTo(e,t,n,o,r),this},e.prototype.ellipse=function(e,t,n,o){if(this.beginPath(),c.App.map.settings.draw.hand)this.drawer.hdEllipse(e+n/2,t+o/2,n/2,o/2);else{var r=n/2*.5522848,i=o/2*.5522848,a=e+n,s=t+o,l=e+n/2,d=t+o/2;this.moveTo(e,d).bezierCurveTo(e,d-i,l-r,t,l,t).bezierCurveTo(l+r,t,a,d-i,a,d).bezierCurveTo(a,d+i,l+r,s,l,s).bezierCurveTo(l-r,s,e,d+i,e,d)}return this.closePath(),this},e.prototype.roundedRect=function(e,t,n,o,r){return n<4*r&&(r=n/4),o<4*r&&(r=o/4),this.beginPath(),c.App.map.settings.draw.hand?this.drawer.hdRoundedRect(e,t,n,o,r):this.moveTo(e+r,t).arcTo(e+n,t,e+n,t+o,r).arcTo(e+n,t+o,e,t+o,r).arcTo(e,t+o,e,t,r).arcTo(e,t,e+n,t,r),this.closePath(),this},e.prototype.octagon=function(e,t,n,o){return this.beginPath(),c.App.map.settings.draw.hand?this.drawer.hdOctagon(e,t,n,o):this.moveTo(e,t+.25*o).lineTo(e+.25*n,t).lineTo(e+.75*n,t).lineTo(e+n,t+.25*o).lineTo(e+n,t+.75*o).lineTo(e+.75*n,t+o).lineTo(e+.25*n,t+o).lineTo(e,t+.75*o),this.closePath(),this},e.prototype.quadraticCurveTo=function(e,t,n,o){return this.ctx.quadraticCurveTo(e,t,n,o),this},e.prototype.bezier2=function(e,t,n,o,r,i){return c.App.map.settings.draw.hand?this.drawer.hdBezier2(e,t,n,o,r,i):(this.moveTo(e,t),this.quadraticCurveTo(n,o,r,i)),this},e.prototype.getQuadraticXY=function(e,t,n,o,r,i,a){return{x:(1-e)*(1-e)*t+2*(1-e)*e*o+e*e*i,y:(1-e)*(1-e)*n+2*(1-e)*e*r+e*e*a}},e.prototype.getQuadraticAngle=function(e,t,n,o,r,i,a){var s=2*(1-e)*(o-t)+2*e*(i-o),l=2*(1-e)*(r-n)+2*e*(a-r);return-Math.atan2(s,l)+.5*Math.PI},e.prototype.bezierCurveTo=function(e,t,n,o,r,i){return this.ctx.bezierCurveTo(e,t,n,o,r,i),this},e.prototype.bezier3=function(e,t,n,o,r,i,a,s){return c.App.map.settings.draw.hand?this.drawer.hdBezier3(e,t,n,o,r,i,a,s):(this.moveTo(e,t),this.bezierCurveTo(n,o,r,i,a,s)),this},e.prototype.getBezierXY=function(e,t,n,o,r,i,a,s,l){return{x:Math.pow(1-e,3)*t+3*e*Math.pow(1-e,2)*o+3*e*e*(1-e)*i+e*e*e*s,y:Math.pow(1-e,3)*n+3*e*Math.pow(1-e,2)*r+3*e*e*(1-e)*a+e*e*e*l}},e.prototype.getBezierAngle=function(e,t,n,o,r,i,a,s,l){var d=Math.pow(1-e,2)*(o-t)+2*e*(1-e)*(i-o)+e*e*(s-i),c=Math.pow(1-e,2)*(r-n)+2*e*(1-e)*(a-r)+e*e*(l-a);return-Math.atan2(d,c)+.5*Math.PI},e.prototype.rect=function(e,t,n,o){var r=e+n,i=t+o;return this.beginPath(),c.App.map.settings.draw.hand?(this.drawer.hdLine(e,t,r,t),this.drawer.hdLine(r,t,r,i),this.drawer.hdLine(e,i,r,i),this.drawer.hdLine(e,i,e,t)):this.ctx.rect(e,t,n,o),this.closePath(),this},e.prototype.textAlign=function(e){switch(e){case h.TextAlign.End:this.ctx.textAlign="end";break;case h.TextAlign.Left:this.ctx.textAlign="left";break;case h.TextAlign.Right:this.ctx.textAlign="right";break;case h.TextAlign.Center:this.ctx.textAlign="center";break;default:this.ctx.textAlign="start"}return this},e.prototype.textBaseline=function(e){switch(e){case h.TextBaseline.Bottom:this.ctx.textBaseline="bottom";break;case h.TextBaseline.Hanging:this.ctx.textBaseline="hanging";break;case h.TextBaseline.Ideographic:this.ctx.textBaseline="ideographic";break;case h.TextBaseline.Middle:this.ctx.textBaseline="middle";break;case h.TextBaseline.Top:this.ctx.textBaseline="top";break;default:this.ctx.textBaseline="alphabetic"}return this},e.prototype.fillText=function(e,t,n,o,r,i,a){return this.ctx.font=o,this.textAlign(r),this.textBaseline(i),this.ctx.fillText(e,t,n,a),this},e.prototype.strokeText=function(e,t,n,o,r,i,a){return this.ctx.font=o,this.textAlign(r),this.textBaseline(i),this.ctx.strokeText(e,t,n,a),this},e.prototype.splitText=function(e,t){e<50&&(e=50);for(var n=t.trim().split(" "),o="",r=new Array,i=0;i<n.length;i++){var a=o+n[i]+" ";o=e<this.ctx.measureText(a).width&&0<i?(r.push(o.trim()),n[i]+" "):a}return r.push(o.trim()),r},e.prototype.drawText=function(e,t,n,o,r,i,a){var s=r+"px "+i;this.ctx.font=s;for(var l=Math.ceil(r)+1,d=this.splitText(n,a),c=e+n/2,p=t-(d.length-1)*l/2+o/2,u=0;u<d.length;u++)this.fillText(d[u],c,p,s,h.TextAlign.Center,h.TextBaseline.Middle),p+=l;return this},e.prototype.drawTextBottom=function(e,t,n,o,r,i,a){var s=r+"px "+i;this.ctx.font=s;for(var l=Math.ceil(r)+1,d=this.splitText(n,a),c=e+n/2,p=t+o-(d.length-1)*l,u=0;u<d.length;u++)this.fillText(d[u],c,p,s,h.TextAlign.Center,h.TextBaseline.Bottom),p+=l;return this},e.prototype.textWidth=function(e,t){return this.ctx.font=t,this.ctx.measureText(e).width},e.prototype.clip=function(e){return this.ctx.clip(e),this},e.prototype.getImageData=function(e,t,n,o){return this.ctx.getImageData(e,t,n,o)},t("Canvas",e)}}}),System.register("grid",["app"],function(t,e){"use strict";var i;e&&e.id;return{setters:[function(e){i=e}],execute:function(){function e(){}e.prototype.drawGridLineV=function(e,t,n){var o=Math.floor(-e.offsetHeight)+.5,r=Math.floor(e.offsetHeight)+.5;n=Math.floor(n)+.5,t.beginPath().moveTo(n,o).lineTo(n,r).stroke()},e.prototype.drawGridLineH=function(e,t,n){var o=Math.floor(-e.offsetWidth)+.5,r=Math.floor(e.offsetWidth)+.5;n=Math.floor(n)+.5,t.beginPath().moveTo(o,n).lineTo(r,n).stroke()},e.prototype.draw=function(e,t){var n=i.App.map.settings.grid;if(n.visible){t.save().strokeStyle(n.color).lineWidth(n.lineWidth);for(var o=e.offsetWidth/2+i.App.centerX;0<o;)this.drawGridLineV(e,t,o),o-=n.size*i.App.zoom;for(o=e.offsetWidth/2+i.App.centerX+n.size*i.App.zoom;o<e.offsetWidth;)this.drawGridLineV(e,t,o),o+=n.size*i.App.zoom;for(var r=e.offsetHeight/2+i.App.centerY;0<r;)this.drawGridLineH(e,t,r),r-=n.size*i.App.zoom;for(r=e.offsetHeight/2+i.App.centerY+n.size*i.App.zoom;r<e.offsetHeight;)this.drawGridLineH(e,t,r),r+=n.size*i.App.zoom;n.origin&&(o=Math.floor(e.offsetWidth/2)+i.App.centerX,r=Math.floor(e.offsetHeight/2)+i.App.centerY,t.beginPath().lineWidth(n.originWidth).moveTo(o,r-n.size*i.App.zoom).lineTo(o,r+n.size*i.App.zoom).moveTo(o-n.size*i.App.zoom,r).lineTo(o+n.size*i.App.zoom,r).stroke()),t.restore()}},e.snap=function(e){var t=i.App.map.settings.grid;return t.snap?Math.floor(e/t.size)*t.size:e},t("Grid",e)}}}),System.register("util/rect",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(e,t,n,o){this.set(e,t,n,o)}e.prototype.set=function(e,t,n,o){this.x=Math.min(e,n),this.y=Math.min(t,o),this.width=Math.abs(n-e),this.height=Math.abs(o-t)},e.prototype.maximize=function(e){this.set(Math.min(this.x,e.x),Math.min(this.y,e.y),Math.max(this.x+this.width,e.x+e.width),Math.max(this.y+this.height,e.y+e.height))},e.prototype.expande=function(e,t){t=t||e,this.set(this.x-e,this.y-t,this.x+this.width+2*e,this.y+this.height+2*t)},e.prototype.contains=function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},t("Rect",e)}}}),System.register("views/view",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(){this.selected=!1}e.prototype.getModel=function(){return null},e.prototype.draw=function(e,t){},e.prototype.clear=function(e){},e.prototype.drawSimple=function(e,t){},e.prototype.drawHandles=function(e,t,n,o,r){},Object.defineProperty(e.prototype,"movingSelectable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.isSelected=function(){return this.selected},e.prototype.select=function(){this.selected=!0},e.prototype.unselect=function(){this.selected=!1},e.prototype.isIn=function(e,t,n,o){return!1},e.prototype.isPointIn=function(e,t){return!1},t("View",e)}}}),System.register("util/util",["util/rect"],function(o,e){"use strict";e&&e.id;return{setters:[function(e){!function(e){var t={};for(var n in e)"default"!==n&&(t[n]=e[n]);o(t)}(e)}],execute:function(){}}}),System.register("views/boxView",["views/view","util/util","enums/enums"],function(t,e){"use strict";var o,i,d;e&&e.id;return{setters:[function(e){o=e},function(e){i=e},function(e){d=e}],execute:function(){function e(e){var t=n.call(this)||this;return t.box=e,t.oldX=t.oldY=0,t.oldWidth=t.oldHeight=0,t}var n;n=o.View,__extends(e,n),e.prototype.getModel=function(){return this.box},e.prototype.clear=function(e){var t=d.Values.DIMEN_ROOM_MARGIN,n=new i.Rect(this.box.x-t,this.box.y-t,this.box.x-t+this.box.width+2*t,this.box.y-t+this.box.height+2*t);return e.clearRect(n.x,n.y,n.width,n.height),n},e.prototype.makeShape=function(e,t){var n=t?d.Values.DIMEN_ROOM_MARGIN:0;switch(this.box.shape){case d.RoomShape.Ellipse:e.ellipse(-n,-n,this.box.width+2*n,this.box.height+2*n);break;case d.RoomShape.Octagon:e.octagon(-n,-n,this.box.width+2*n,this.box.height+2*n);break;default:e.roundedRect(-n,-n,this.box.width+2*n,this.box.height+2*n,this.box.rounding)}},e.prototype.drawResizeHandles=function(e,t,n,o,r){if(e.save().lineWidth(1),this.selected&&1==o){e.fillStyle(d.Values.COLOR_RESIZE).strokeStyle(d.Values.COLOR_LINE);for(var i=0;i<16;i++)if(d.Direction.isCardinal(i)){var a=this.box.directionToPos(i,!1),s=a.x,l=a.y;t>=s-d.Values.DIMEN_RESIZE_HANDLE&&t<=s+d.Values.DIMEN_RESIZE_HANDLE&&n>=l-d.Values.DIMEN_RESIZE_HANDLE&&n<=l+d.Values.DIMEN_RESIZE_HANDLE?e.fillStyle(d.Values.COLOR_RESIZE_HIGHLIGHT):e.fillStyle(d.Values.COLOR_RESIZE),e.beginPath().moveTo(s-d.Values.DIMEN_RESIZE_HANDLE,l-d.Values.DIMEN_RESIZE_HANDLE).fillRect(s-d.Values.DIMEN_RESIZE_HANDLE,l-d.Values.DIMEN_RESIZE_HANDLE,2*d.Values.DIMEN_RESIZE_HANDLE,2*d.Values.DIMEN_RESIZE_HANDLE).strokeRect(s-d.Values.DIMEN_RESIZE_HANDLE,l-d.Values.DIMEN_RESIZE_HANDLE,2*d.Values.DIMEN_RESIZE_HANDLE,2*d.Values.DIMEN_RESIZE_HANDLE)}}e.restore()},e.prototype.drawConnectorHandles=function(e,t,n,o,r){if(r&&0==o){e.save().lineWidth(1).strokeStyle(d.Values.COLOR_LINE);for(var i=0;i<16;i++){var a=this.box.directionToPos(i,!1),s=a.x,l=a.y;t>=s-d.Values.DIMEN_CONNECTOR_HANDLE&&t<=s+d.Values.DIMEN_CONNECTOR_HANDLE&&n>=l-d.Values.DIMEN_CONNECTOR_HANDLE&&n<=l+d.Values.DIMEN_CONNECTOR_HANDLE?e.fillStyle(d.Values.COLOR_CONNECTOR_HIGHLIGHT):e.fillStyle(d.Values.COLOR_CONNECTOR),e.beginPath().moveTo(s+d.Values.DIMEN_CONNECTOR_HANDLE,l).arc(s,l,d.Values.DIMEN_CONNECTOR_HANDLE,0,2*Math.PI,!0).fill().stroke()}e.restore()}},e.prototype.isResizeHandle=function(e,t){for(var n=0;n<16;n++)if(d.Direction.isCardinal(n)){var o=this.box.directionToPos(n,!1),r=o.x,i=o.y;if(e>=r-d.Values.DIMEN_RESIZE_HANDLE&&e<=r+d.Values.DIMEN_RESIZE_HANDLE&&t>=i-d.Values.DIMEN_RESIZE_HANDLE&&t<=i+d.Values.DIMEN_RESIZE_HANDLE)return n}},e.prototype.isConnectorHandle=function(e,t){for(var n=0;n<16;n++){var o=this.box.directionToPos(n,!1),r=o.x,i=o.y;if(e>=r-d.Values.DIMEN_CONNECTOR_HANDLE&&e<=r+d.Values.DIMEN_CONNECTOR_HANDLE&&t>=i-d.Values.DIMEN_CONNECTOR_HANDLE&&t<=i+d.Values.DIMEN_CONNECTOR_HANDLE)return n}},e.prototype.isIn=function(e,t,n,o){var r=new i.Rect(e,t,e+n,t+o);return!!(r.contains(this.box.x,this.box.y)||r.contains(this.box.x+this.box.width,this.box.y)||r.contains(this.box.x,this.box.y+this.box.height)||r.contains(this.box.x+this.box.width,this.box.y+this.box.height))},e.prototype.isPointIn=function(e,t){return e>=this.box.x&&e<=this.box.x+this.box.width&&t>=this.box.y&&t<=this.box.y+this.box.height},e.prototype.resize=function(e,t,n){var o=0,r=0;e!=d.Direction.N&&e!=d.Direction.NE&&e!=d.Direction.NW||((r=this.oldY+this.oldHeight-n)<d.Values.DIMEN_ROOM_MIN_HEIGHT&&(n-=d.Values.DIMEN_ROOM_MIN_HEIGHT-r,r=d.Values.DIMEN_ROOM_MIN_HEIGHT),this.box.y=n,this.box.height=r),e!=d.Direction.W&&e!=d.Direction.NW&&e!=d.Direction.SW||((o=this.oldX+this.oldWidth-t)<d.Values.DIMEN_ROOM_MIN_WIDTH&&(t-=d.Values.DIMEN_ROOM_MIN_WIDTH-o,o=d.Values.DIMEN_ROOM_MIN_WIDTH),this.box.x=t,this.box.width=o),e!=d.Direction.E&&e!=d.Direction.NE&&e!=d.Direction.SE||((o=t-this.oldX)<d.Values.DIMEN_ROOM_MIN_WIDTH&&(t-=d.Values.DIMEN_ROOM_MIN_WIDTH-o,o=d.Values.DIMEN_ROOM_MIN_WIDTH),this.box.width=o),e!=d.Direction.S&&e!=d.Direction.SE&&e!=d.Direction.SW||((r=n-this.oldY)<d.Values.DIMEN_ROOM_MIN_HEIGHT&&(n-=d.Values.DIMEN_ROOM_MIN_HEIGHT-r,r=d.Values.DIMEN_ROOM_MIN_HEIGHT),this.box.height=r)},e.prototype.save=function(){this.oldX=this.box.x,this.oldY=this.box.y,this.oldWidth=this.box.width,this.oldHeight=this.box.height},t("BoxView",e)}}}),System.register("views/roomView",["app","views/boxView","enums/enums","drawing/IScreen"],function(t,e){"use strict";var s,o,l,i;e&&e.id;return{setters:[function(e){s=e},function(e){o=e},function(e){l=e},function(e){i=e}],execute:function(){function e(e){var t=n.call(this,e)||this;return t.room=e,t}var n;n=o.BoxView,__extends(e,n),e.prototype.getModel=function(){return this.room},Object.defineProperty(e.prototype,"movingSelectable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.draw=function(e,t){if(e.save().translate(this.room.x,this.room.y),this.makeShape(e,!0),e.fillStyle(l.Values.COLOR_TRANSPARENT).fill(),this.selected&&e.fillStyle(l.Values.COLOR_SELECTED_GLOW).fill(),this.room.isStartRoom()&&e.fillStyle(l.Values.COLOR_STARTROOM).fill(),this.room.endroom&&e.fillStyle(l.Values.COLOR_ENDROOM).fill(),this.makeShape(e,!1),e.fillStyle(this.room.fillColor).fill(),e.save(),e.clip(),this.makeShape(e,!1),this.room.dark){var n=this.room.map.settings.room.darknessSize;e.fillStyle(this.room.map.settings.room.darkColor).beginPath().moveTo(this.room.width,0).lineTo(this.room.width-this.room.height*n/100,0).lineTo(this.room.width,this.room.height*n/100).fill()}e.restore(),this.room.lineStyle!=l.LineStyle.None&&(this.makeShape(e,!1),e.strokeStyle(this.room.borderColor).lineWidth(this.room.lineWidth).lineDash(this.room.lineStyle).stroke());var o=s.App.map.settings.room.fontCfg(s.App.map.settings.draw.hand,"obj"),r=s.App.map.settings.room.font2Cfg(s.App.map.settings.draw.hand,"obj");e.fillStyle(this.room.nameColor).drawText(0,0,this.room.width,this.room.height,o.size,o.family,this.room.name),this.room.subtitle&&e.fillStyle(this.room.subtitle).drawTextBottom(0,0,this.room.width,this.room.height-5,r.size,r.family,this.room.subtitle);var i=.8*this.room.width,a=this.room.height+20;e.fillStyle(this.room.nameColor),this.drawObjects(e,i,a,this.room.objects),e.restore()},e.prototype.drawObjects=function(t,n,o,e){var r=this;return e.forEach(function(e){t.fillText(e.name,n,o,s.App.map.settings.room.font2Cfg(s.App.map.settings.draw.hand,"string"),i.TextAlign.Left,i.TextBaseline.Middle),o+=14,o=r.drawObjects(t,n+10,o,e.content)}),o},e.prototype.drawSimple=function(e,t){e.save().translate(this.room.x,this.room.y),this.makeShape(e,!0),e.fillStyle(l.Values.COLOR_TRANSPARENT).fill(),e.restore()},e.prototype.drawHandles=function(e,t,n,o,r){this.drawResizeHandles(e,t,n,o,r),this.drawConnectorHandles(e,t,n,o,r)},t("RoomView",e)}}}),System.register("util/point",[],function(e,t){"use strict";t&&t.id;return{setters:[],execute:function(){e("Point",function(e,t){this.x=e,this.y=t})}}}),System.register("views/connectorView",["app","views/view","util/util","enums/enums","drawing/IScreen","util/point"],function(t,e){"use strict";var O,o,P,I,H,m;e&&e.id;return{setters:[function(e){O=e},function(e){o=e},function(e){P=e},function(e){I=e},function(e){H=e},function(e){m=e}],execute:function(){function e(e){var t=n.call(this)||this;return t.connector=e,t}var n;n=o.View,__extends(e,n),e.prototype.getModel=function(){return this.connector},Object.defineProperty(e.prototype,"movingSelectable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.drawConnectorHandle=function(e,t,n,o,r){o>=t-I.Values.DIMEN_CONNECTOR_HANDLE&&o<=t+I.Values.DIMEN_CONNECTOR_HANDLE&&r>=n-I.Values.DIMEN_CONNECTOR_HANDLE&&r<=n+I.Values.DIMEN_CONNECTOR_HANDLE?e.fillStyle(I.Values.COLOR_CONNECTOR_HIGHLIGHT):e.fillStyle(I.Values.COLOR_CONNECTOR),e.beginPath().moveTo(t+I.Values.DIMEN_CONNECTOR_HANDLE,n).arc(t,n,I.Values.DIMEN_CONNECTOR_HANDLE,0,2*Math.PI,!0).fill().stroke()},e.prototype.dockToPoints=function(e,t){var n=e.directionToPos(t,!1),o=n.x,r=n.y,i=e.directionToPos(t,!0),a=i.x,s=i.y;return{x:o,y:r,dx:a+I.Direction.toCardinalVector(t).x*O.App.map.settings.connector.stalk,dy:s+I.Direction.toCardinalVector(t).y*O.App.map.settings.connector.stalk}},e.prototype.drawArrow=function(e,t,n,o){var r=O.App.map.settings.connector.arrowSize;e.save(),e.translate(t,n),e.rotate(o),e.translate(-t,-n),e.beginPath(),e.moveTo(t-r,n-r),e.lineTo(t-r,n+r),e.lineTo(t+r,n),e.closePath(),e.fill(),e.restore()},e.prototype.draw=function(e,t){var n=this.connector.startX,o=this.connector.startY,r=this.connector.endX,i=this.connector.endY,a=this.connector.startX,s=this.connector.startY,l=this.connector.endX,d=this.connector.endY;if(e.save().beginPath(),this.connector.dockStart||this.connector.dockEnd)if(this.connector.dockStart&&this.connector.dockEnd){var c=this.dockToPoints(this.connector.dockStart,this.connector.startDir),p=(n=c.x,o=c.y,a=c.dx,s=c.dy,this.dockToPoints(this.connector.dockEnd,this.connector.endDir));r=p.x,i=p.y,l=p.dx,d=p.dy}else if(this.connector.dockStart&&!this.connector.dockEnd){var u=this.dockToPoints(this.connector.dockStart,this.connector.startDir);n=u.x,o=u.y,a=u.dx,s=u.dy}else{var h=this.dockToPoints(this.connector.dockEnd,this.connector.endDir);r=h.x,i=h.y,l=h.dx,d=h.dy}if(C=a+.1*(l-a),S=s+.1*(d-s),T=a+.9*(l-a),L=s+.9*(d-s),w=E=Math.atan2(d-s,l-a),j=a+.5*(l-a),R=s+.5*(d-s),this.connector.dockStart||this.connector.dockEnd)if(this.connector.dockStart&&this.connector.dockEnd){if(e.line(n,o,a,s),this.clearRegion=new P.Rect(n,o,a,s),this.connector.isCurve){var m=Math.sqrt((l-a)*(l-a)+(d-s)*(d-s))*O.App.map.settings.connector.curveStrength,f=a+I.Direction.toCardinalVector(this.connector.startDir).x*m,y=s+I.Direction.toCardinalVector(this.connector.startDir).y*m,b=l+I.Direction.toCardinalVector(this.connector.endDir).x*m,g=d+I.Direction.toCardinalVector(this.connector.endDir).y*m;e.bezier3(a,s,f,y,b,g,l,d);var v=this.getRectBezier3(a,s,f,y,b,g,l,d);this.clearRegion.maximize(v);var k=e.getBezierXY(.1,a,s,f,y,b,g,l,d),C=k.x,S=k.y,w=e.getBezierAngle(.1,a,s,f,y,b,g,l,d),D=e.getBezierXY(.9,a,s,f,y,b,g,l,d),T=D.x,L=D.y,E=e.getBezierAngle(.9,a,s,f,y,b,g,l,d),x=e.getBezierXY(.5,a,s,f,y,b,g,l,d),j=x.x,R=x.y}else e.line(a,s,l,d),this.clearRegion.maximize(new P.Rect(a,s,l,d));e.line(l,d,r,i),this.clearRegion.maximize(new P.Rect(l,d,r,i))}else if(this.connector.dockStart&&!this.connector.dockEnd)if(e.line(n,o,a,s),this.clearRegion=new P.Rect(n,o,a,s),this.connector.isCurve){m=Math.sqrt((l-a)*(l-a)+(d-s)*(d-s))*O.App.map.settings.connector.curveStrength,f=a+I.Direction.toCardinalVector(this.connector.startDir).x*m,y=s+I.Direction.toCardinalVector(this.connector.startDir).y*m,e.bezier2(a,s,f,y,l,d),v=this.getRectBezier2(a,s,f,y,l,d),this.clearRegion.maximize(v);var A=e.getQuadraticXY(.1,a,s,f,y,l,d),_=(C=A.x,S=A.y,w=e.getQuadraticAngle(.1,a,s,f,y,l,d),e.getQuadraticXY(.9,a,s,f,y,l,d)),M=(T=_.x,L=_.y,E=e.getQuadraticAngle(.9,a,s,f,y,l,d),e.getQuadraticXY(.5,a,s,f,y,l,d));j=M.x,R=M.y}else e.line(a,s,l,d),this.clearRegion.maximize(new P.Rect(a,s,l,d));else{if(this.connector.isCurve){m=Math.sqrt((l-a)*(l-a)+(d-s)*(d-s))*O.App.map.settings.connector.curveStrength,f=l+I.Direction.toCardinalVector(this.connector.endDir).x*m,y=d+I.Direction.toCardinalVector(this.connector.endDir).y*m,e.bezier2(a,s,f,y,l,d),this.clearRegion=this.getRectBezier2(a,s,f,y,l,d);var Y=e.getQuadraticXY(.1,a,s,f,y,l,d),X=(C=Y.x,S=Y.y,w=e.getQuadraticAngle(.1,a,s,f,y,l,d),e.getQuadraticXY(.9,a,s,f,y,l,d)),W=(T=X.x,L=X.y,E=e.getQuadraticAngle(.9,a,s,f,y,l,d),e.getQuadraticXY(.5,a,s,f,y,l,d));j=W.x,R=W.y}else e.line(a,s,l,d),this.clearRegion=new P.Rect(a,s,l,d);e.line(l,d,r,i),this.clearRegion.maximize(new P.Rect(l,d,r,i))}else e.line(a,s,l,d),this.clearRegion=new P.Rect(a,s,l,d);if(e.lineWidth(I.Values.DIMEN_CONNECTOR_WIDE).lineCap(H.CapStyle.Round).lineJoin(H.JoinStyle.Round).strokeStyle(I.Values.COLOR_TRANSPARENT).stroke(),e.lineWidth(this.connector.lineWidth).strokeStyle(this.selected?I.Values.COLOR_SELECTED:t?I.Values.COLOR_HOVER:this.connector.color).lineDash(this.connector.lineStyle).stroke(),this.connector.oneWay&&(e.fillStyle(this.selected?I.Values.COLOR_SELECTED:t?I.Values.COLOR_HOVER:this.connector.color),this.drawArrow(e,C,S,w),this.drawArrow(e,T,L,E)),this.connector.name){var N=e.textWidth(this.connector.name,O.App.map.settings.connector.fontCfg(O.App.map.settings.draw.hand,"string"));e.lineWidth(1).lineDash(I.LineStyle.Solid).strokeStyle("#000").fillStyle("#fff").roundedRect(j-N/2-5,R-11,N+10,20,3).fill().stroke().fillStyle("#333").fillText(this.connector.name,j,R,O.App.map.settings.connector.fontCfg(O.App.map.settings.draw.hand,"string"),H.TextAlign.Center,H.TextBaseline.Middle)}e.beginPath().fillStyle(this.connector.color).fillText(this.connector.startLabel?this.connector.startLabel:I.ConnectorType.toString(this.connector.startType),C+Math.cos(w-Math.PI/2)*O.App.map.settings.connector.labelDistance,S+Math.sin(w-Math.PI/2)*O.App.map.settings.connector.labelDistance,O.App.map.settings.connector.font2Cfg(O.App.map.settings.draw.hand,"string"),H.TextAlign.Center,H.TextBaseline.Middle).fillText(this.connector.endLabel?this.connector.endLabel:I.ConnectorType.toString(this.connector.endType),T+Math.cos(E+Math.PI/2)*O.App.map.settings.connector.labelDistance,L+Math.sin(E+Math.PI/2)*O.App.map.settings.connector.labelDistance,O.App.map.settings.connector.font2Cfg(O.App.map.settings.draw.hand,"string"),H.TextAlign.Center,H.TextBaseline.Middle),e.restore()},e.prototype.drawSimple=function(e,t){var n=this.connector.startX,o=this.connector.startY,r=this.connector.endX,i=this.connector.endY,a=this.connector.startX,s=this.connector.startY,l=this.connector.endX,d=this.connector.endY;if(e.save().beginPath(),this.connector.dockStart||this.connector.dockEnd)if(this.connector.dockStart&&this.connector.dockEnd){var c=this.dockToPoints(this.connector.dockStart,this.connector.startDir),p=(n=c.x,o=c.y,a=c.dx,s=c.dy,this.dockToPoints(this.connector.dockEnd,this.connector.endDir));r=p.x,i=p.y,l=p.dx,d=p.dy}else if(this.connector.dockStart&&!this.connector.dockEnd){var u=this.dockToPoints(this.connector.dockStart,this.connector.startDir);n=u.x,o=u.y,a=u.dx,s=u.dy}else{var h=this.dockToPoints(this.connector.dockEnd,this.connector.endDir);r=h.x,i=h.y,l=h.dx,d=h.dy}if(this.connector.dockStart||this.connector.dockEnd)if(this.connector.dockStart&&this.connector.dockEnd){if(e.moveTo(n,o),e.lineTo(a,s),this.connector.isCurve){var m=Math.sqrt((l-a)*(l-a)+(d-s)*(d-s))*O.App.map.settings.connector.curveStrength,f=a+I.Direction.toCardinalVector(this.connector.startDir).x*m,y=s+I.Direction.toCardinalVector(this.connector.startDir).y*m,b=l+I.Direction.toCardinalVector(this.connector.endDir).x*m,g=d+I.Direction.toCardinalVector(this.connector.endDir).y*m;e.bezierCurveTo(f,y,b,g,l,d)}else e.lineTo(l,d);e.lineTo(r,i)}else this.connector.dockStart&&!this.connector.dockEnd?(e.moveTo(n,o),e.lineTo(a,s),this.connector.isCurve?(m=Math.sqrt((l-a)*(l-a)+(d-s)*(d-s))*O.App.map.settings.connector.curveStrength,f=a+I.Direction.toCardinalVector(this.connector.startDir).x*m,y=s+I.Direction.toCardinalVector(this.connector.startDir).y*m,e.quadraticCurveTo(f,y,l,d)):e.lineTo(l,d)):(e.moveTo(a,s),this.connector.isCurve?(m=Math.sqrt((l-a)*(l-a)+(d-s)*(d-s))*O.App.map.settings.connector.curveStrength,f=l+I.Direction.toCardinalVector(this.connector.endDir).x*m,y=d+I.Direction.toCardinalVector(this.connector.endDir).y*m,e.quadraticCurveTo(f,y,l,d)):e.lineTo(l,d),e.lineTo(r,i));else e.moveTo(a,s),e.lineTo(l,d);e.lineWidth(20).lineCap(H.CapStyle.Round).lineJoin(H.JoinStyle.Round).strokeStyle(I.Values.COLOR_TRANSPARENT).stroke(),e.restore()},e.prototype.clear=function(e){var t=I.Values.DIMEN_CONNECTOR_WIDE;if(this.clearRegion)return this.clearRegion.expande(t),e.clearRect(this.clearRegion.x,this.clearRegion.y,this.clearRegion.width,this.clearRegion.height),this.clearRegion},e.prototype.drawHandles=function(e,t,n,o,r){if(this.selected&&1==o){e.save().lineWidth(1).strokeStyle(I.Values.COLOR_LINE);var i=this.getStartHandleLocation(),a=i.x,s=i.y;this.drawConnectorHandle(e,a,s,t,n);var l=this.getEndHandleLocation();a=l.x,s=l.y,this.drawConnectorHandle(e,a,s,t,n),e.restore()}},e.prototype.isIn=function(e,t,n,o){var r=new P.Rect(e,t,e+n,t+o),i=this.getStartHandleLocation();if(e=i.x,t=i.y,r.contains(e,t))return!0;var a=this.getEndHandleLocation();return e=a.x,t=a.y,!!r.contains(e,t)},e.prototype.getStartHandleLocation=function(){if(this.connector.dockStart)var e=this.connector.dockStart.directionToPos(this.connector.startDir,!1),t=e.x,n=e.y;else t=this.connector.startX,n=this.connector.startY;return{x:t,y:n}},e.prototype.getEndHandleLocation=function(){if(this.connector.dockEnd)var e=this.connector.dockEnd.directionToPos(this.connector.endDir,!1),t=e.x,n=e.y;else t=this.connector.endX,n=this.connector.endY;return{x:t,y:n}},e.prototype.isConnectorHandle=function(e,t){var n=this.getStartHandleLocation(),o=n.x,r=n.y;if(e>=o-I.Values.DIMEN_CONNECTOR_HANDLE&&e<=o+I.Values.DIMEN_CONNECTOR_HANDLE&&t>=r-I.Values.DIMEN_CONNECTOR_HANDLE&&t<=r+I.Values.DIMEN_CONNECTOR_HANDLE)return I.ConnectorHandle.Start;var i=this.getEndHandleLocation();return o=i.x,r=i.y,e>=o-I.Values.DIMEN_CONNECTOR_HANDLE&&e<=o+I.Values.DIMEN_CONNECTOR_HANDLE&&t>=r-I.Values.DIMEN_CONNECTOR_HANDLE&&t<=r+I.Values.DIMEN_CONNECTOR_HANDLE?I.ConnectorHandle.End:void 0},e.prototype.getRectBezier2=function(e,t,n,o,r,i){function a(e,t,n,o,r,i,a){if(!(e<=0||1<=e||isNaN(e))){var s=new m.Point(t+(o-t)*e,n+(r-n)*e),l=new m.Point(o+(i-o)*e,r+(a-r)*e);return new m.Point(s.x+(l.x-s.x)*e,s.y+(l.y-s.y)*e)}}var s=(t-o)/(t-2*o+i),l=a((e-n)/(e-2*n+r),e,t,n,o,r,i),d=l?Math.min(e,r,l.x):Math.min(e,r),c=l?Math.max(e,r,l.x):Math.max(e,r),p=a(s,e,t,n,o,r,i),u=p?Math.min(t,i,p.y):Math.min(t,i),h=p?Math.max(t,i,p.y):Math.max(t,i);return new P.Rect(d,u,c,h)},e.prototype.getRectBezier3=function(e,t,n,o,r,i,a,s){for(var l,d,c,p,u,h,m,f,y=[],b=[],g=[],v=0;v<2;++v)if(c=0==v?(d=6*e-12*n+6*r,l=-3*e+9*n-9*r+3*a,3*n-3*e):(d=6*t-12*o+6*i,l=-3*t+9*o-9*i+3*s,3*o-3*t),Math.abs(l)<1e-12){if(Math.abs(d)<1e-12)continue;0<(p=-c/d)&&p<1&&y.push(p)}else(m=d*d-4*c*l)<0?Math.abs(m)<1e-12&&0<(p=-d/(2*l))&&p<1&&y.push(p):(0<(u=(-d+(f=Math.sqrt(m)))/(2*l))&&u<1&&y.push(u),0<(h=(-d-f)/(2*l))&&h<1&&y.push(h));for(var k,C=y.length;C--;)k=1-(p=y[C]),b[C]=k*k*k*e+3*k*k*p*n+3*k*p*p*r+p*p*p*a,g[C]=k*k*k*t+3*k*k*p*o+3*k*p*p*i+p*p*p*s;return b.push(e,a),g.push(t,s),new P.Rect(Math.min.apply(Math,b),Math.min.apply(Math,g),Math.max.apply(Math,b),Math.max.apply(Math,g))},t("ConnectorView",e)}}}),System.register("views/noteView",["views/boxView","enums/enums","app"],function(t,e){"use strict";var o,r,i;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e}],execute:function(){function e(e){var t=n.call(this,e)||this;return t.note=e,t}var n;n=o.BoxView,__extends(e,n),e.prototype.getModel=function(){return this.note},e.prototype.draw=function(e,t){e.save().translate(this.note.x,this.note.y),this.makeShape(e,!0),e.fillStyle(r.Values.COLOR_TRANSPARENT).fill(),this.selected&&e.fillStyle(r.Values.COLOR_SELECTED_GLOW).fill(),this.makeShape(e,!1),e.fillStyle(this.note.fillColor).fill(),e.clip(),this.makeShape(e,!1),e.lineWidth(this.note.lineWidth/2).strokeStyle(this.note.borderColor).beginPath().moveTo(this.note.width-.6*this.note.height,0).lineTo(this.note.width,.6*this.note.height).stroke(),this.note.lineStyle!=r.LineStyle.None&&(this.makeShape(e,!1),e.strokeStyle(this.note.borderColor).lineWidth(this.note.lineWidth).lineDash(this.note.lineStyle).stroke());var n=i.App.map.settings.room.fontCfg(i.App.map.settings.draw.hand,"obj");e.fillStyle(this.note.textColor).drawText(0,0,this.note.width,this.note.height,n.size,n.family,this.note.text),e.restore()},e.prototype.drawSimple=function(e,t){e.save().translate(this.note.x,this.note.y),this.makeShape(e,!0),e.fillStyle(r.Values.COLOR_TRANSPARENT).fill(),e.restore()},e.prototype.drawHandles=function(e,t,n,o,r){this.drawResizeHandles(e,t,n,o,r)},t("NoteView",e)}}}),System.register("views/blockView",["views/boxView","enums/enums"],function(t,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e){var t=n.call(this,e)||this;return t.block=e,t}var n;n=o.BoxView,__extends(e,n),e.prototype.getModel=function(){return this.block},e.prototype.draw=function(e,t){e.save().translate(this.block.x,this.block.y),this.makeShape(e,!0),e.fillStyle(r.Values.COLOR_TRANSPARENT).fill(),this.selected&&e.fillStyle(r.Values.COLOR_SELECTED_GLOW).fill(),this.makeShape(e,!1),e.fillStyle(this.block.fillColor).fill(),this.block.lineStyle!=r.LineStyle.None&&(this.makeShape(e,!1),e.strokeStyle(this.block.borderColor).lineWidth(this.block.lineWidth).lineDash(this.block.lineStyle).stroke()),e.restore()},e.prototype.drawSimple=function(e,t){e.save().translate(this.block.x,this.block.y),this.makeShape(e,!0),e.fillStyle(r.Values.COLOR_TRANSPARENT).fill(),e.restore()},e.prototype.drawHandles=function(e,t,n,o,r){this.drawResizeHandles(e,t,n,o,r)},t("BlockView",e)}}}),System.register("views/viewFactory",["models/room","models/note","models/connector","views/roomView","views/noteView","views/connectorView","models/block","views/blockView"],function(t,e){"use strict";var n,o,r,i,a,s,l,d;e&&e.id;return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){d=e}],execute:function(){function e(){}e.create=function(e){if(e instanceof n.Room)return new i.RoomView(e);if(e instanceof o.Note)return new a.NoteView(e);if(e instanceof r.Connector)return new s.ConnectorView(e);if(e instanceof l.Block)return new d.BlockView(e);throw"No view registered for model."},t("ViewFactory",e)}}}),System.register("maps/zorkMap",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(){}e.json='{"settings":{"grid":{"visible":true,"origin":true,"snap":true,"size":32,"color":"#f0f0f0","lineWidth":1,"originWidth":5},"room":{"width":96,"height":64,"margin":6,"lineWidth":3,"lineStyle":1,"shape":0,"rounding":5,"darknessSize":50,"fillColor":"#ffffff","borderColor":"#000000","nameColor":"#333333","subtitleColor":"#666666","darkColor":"rgba(33, 35, 97, 0.8)","startRoomColor":"green","endRoomColor":"red"},"connector":{"lineWidth":2,"lineStyle":1,"isCurve":false,"color":"#000000","stalk":16,"labelDistance":12,"arrowSize":5,"curveStrength":0.4},"note":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":0,"fillColor":"#ffffff","borderColor":"#000000","textColor":"#333333"},"block":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":0,"shape":0,"rounding":0,"fillColor":"#D5E5D6","borderColor":"#000000"},"background":"wood"},"title":"Untitled map","author":"","description":"","elements":[{"id":1,"x":-256,"y":-160,"type":"Block","width":480,"height":320,"_lineStyle":2},{"id":2,"x":-384,"y":-64,"type":"Room","name":"West of house","subtitle":"","description":"You are standing in an open field west of a white house, with a boarded front door.","dark":false,"endroom":false,"width":96,"height":192,"objects":[{"name":"mailbox","type":"Object","content":[],"kind":5}]},{"id":3,"x":-160,"y":-288,"type":"Room","name":"North of house","subtitle":"","description":"You are facing the north side of a white house. There is no door here, and all the windows are boarded up. To the north a narrow path winds through the trees.","dark":false,"endroom":false,"width":256,"height":64,"objects":[]},{"id":4,"x":256,"y":-64,"type":"Room","name":"Behind house","subtitle":"","description":"You are behind the white house. A path leads into the forest to the east. In one corner of the house there is a small window which is slightly ajar.","dark":false,"endroom":false,"width":96,"height":192,"objects":[]},{"id":5,"x":-192,"y":224,"type":"Room","name":"South of house","subtitle":"","description":"You are facing the south side of a white house. There is no door here, and all the windows are boarded.","dark":false,"endroom":false,"width":288,"height":64,"objects":[]},{"id":6,"x":-192,"y":0,"type":"Room","name":"Living room","subtitle":"","description":"You are in the living room. There is a doorway to the east, a wooden door with strange gothic lettering to the west, which appears to be nailed shut, a trophy case, and a large oriental rug in the center of the room.","dark":false,"endroom":false,"width":128,"height":64,"objects":[{"name":"trophy case","type":"Object","content":[],"kind":5},{"name":"lamp","type":"Object","content":[],"kind":5},{"name":"sword","type":"Object","content":[],"kind":5}]},{"id":7,"x":0,"y":0,"type":"Room","name":"Kitchen","subtitle":"","description":"You are in the kitchen of the white house. A table seems to have been used recently for the preparation of food. A passage leads to the west and a dark staircase can be seen leading upward. A dark chimney leads down and to the east is a small window which is open.","dark":false,"endroom":false,"width":128,"height":64,"objects":[{"name":"glass bottle","type":"Object","content":[{"name":"brown sack","type":"Object","content":[{"name":"block of cheese","type":"Object","description":"","kind":5,"content":[]}],"kind":5}],"kind":5}]},{"id":8,"x":0,"y":-128,"type":"Room","name":"Attic","subtitle":"","description":"This is the attic. The only exit is a stairway leading down.","dark":true,"endroom":false,"width":128,"height":64,"objects":[{"name":"rope","type":"Object","content":[],"kind":5},{"name":"nasty knife","type":"Object","content":[],"kind":5}]},{"id":9,"type":"Connector","name":"","dockStart":2,"dockEnd":3,"startDir":0,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":10,"type":"Connector","name":"","dockStart":3,"dockEnd":4,"startDir":4,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":11,"type":"Connector","name":"","dockStart":4,"dockEnd":5,"startDir":8,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":12,"type":"Connector","name":"","dockStart":2,"dockEnd":5,"startDir":8,"endDir":12,"startY":0,"startX":0,"endY":96,"endX":-192,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":13,"type":"Connector","name":"","dockStart":6,"dockEnd":7,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":14,"type":"Connector","name":"","dockStart":8,"dockEnd":7,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":15,"type":"Connector","name":"","dockStart":7,"dockEnd":4,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":352,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":16,"x":480,"y":0,"type":"Room","name":"Grove","subtitle":"","description":"You are in a small clearing in a well marked forest path that extends to the east and west.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":17,"type":"Connector","name":"","dockStart":4,"dockEnd":16,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":18,"x":480,"y":-416,"type":"Room","name":"Forest (2)","subtitle":"","description":"This is a dimly lit forest, with large trees all around.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":19,"type":"Connector","name":"","dockStart":16,"dockEnd":18,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":20,"x":704,"y":-416,"type":"Room","name":"Forest (4)","subtitle":"","description":"This is a dimly lit forest, with large trees all around.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":21,"type":"Connector","name":"","dockStart":18,"dockEnd":20,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":22,"type":"Connector","name":"","dockStart":6,"dockEnd":0,"startDir":8,"endDir":8,"startY":0,"startX":0,"endY":128,"endX":-128,"oneWay":false,"startType":4,"endType":0,"startLabel":"","endLabel":"(to Cellar)","_lineStyle":2},{"id":23,"type":"Connector","name":"","dockStart":0,"dockEnd":6,"startDir":4,"endDir":12,"startY":32,"startX":-224,"endY":0,"endX":-160,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"(to Strange Pasage)","_lineStyle":2},{"id":24,"x":-192,"y":-128,"type":"Note","text":"House","width":96,"height":64},{"id":25,"x":-608,"y":192,"type":"Room","name":"Stone Barrow","subtitle":"","description":"","dark":false,"endroom":false,"width":160,"height":64,"objects":[]},{"id":26,"type":"Connector","name":"","dockStart":25,"dockEnd":2,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":128,"endX":-416,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":27,"x":-768,"y":192,"type":"Room","name":"Inside the Barrow","subtitle":"","description":"","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":28,"type":"Connector","name":"","dockStart":25,"dockEnd":27,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":29,"type":"Connector","name":"","dockStart":27,"dockEnd":0,"startDir":8,"endDir":8,"startY":0,"startX":0,"endY":320,"endX":-704,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"to Zork II","_isCurve":false},{"id":30,"x":480,"y":384,"type":"Room","name":"Forest (3)","subtitle":"","description":"This is a dimly lit forest, with large trees all around.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":31,"type":"Connector","name":"","dockStart":16,"dockEnd":30,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":32,"type":"Connector","name":"","dockStart":5,"dockEnd":30,"startDir":8,"endDir":14,"startY":0,"startX":0,"endY":64,"endX":416,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":33,"x":672,"y":160,"type":"Room","name":"Canyon View","subtitle":"","description":"You are at the top of the Great Canyon on its west wall. From here there is a marvelous view of the canyon and parts of the Frigid River upstream. Across the canyon, the walls of the White Cliffs join the mighty ramparts of the Flathead Mountains to the east. Following the Canyon upstream to the north, Aragain Falls may be seen, complete with rainbow. The mighty Frigid River flows out from a great dark cavern. To the west and south can be seen an immense forest, stretching for miles around. A path leads northwest. It is possible to climb down into the canyon from here.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":34,"type":"Connector","name":"","dockStart":16,"dockEnd":33,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":35,"type":"Connector","name":"","dockStart":33,"dockEnd":30,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":416,"endX":544,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":36,"x":672,"y":288,"type":"Room","name":"Rocky Ledge","subtitle":"","description":"You are on a ledge about halfway up the wall of the river canyon. You can see from here that the main flow from Aragain Falls twists along a passage which it is impossible for you to enter. Below you is the canyon bottom. Above you is more cliff, which appears climbable.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":37,"type":"Connector","name":"","dockStart":33,"dockEnd":36,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":38,"x":704,"y":416,"type":"Room","name":"Canyon Bottom","subtitle":"","description":"You are beneath the walls of the river canyon which may be climbable here. The lesser part of the runoff of Aragain Falls flows by below. To the north is a narrow path.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":39,"type":"Connector","name":"","dockStart":36,"dockEnd":38,"startDir":8,"endDir":14,"startY":0,"startX":0,"endY":416,"endX":672,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":40,"x":832,"y":288,"type":"Room","name":"End of Rainbow","subtitle":"","description":"You are on a small, rocky beach on the continuation of the Frigid River past the Falls. The beach is narrow due to the presence of the White Cliffs. The river canyon opens here and sunlight shines in from above. A rainbow crosses over the falls to the east and a narrow path continues to the southwest.","dark":false,"endroom":true,"width":128,"height":64,"objects":[]},{"id":41,"type":"Connector","name":"","dockStart":38,"dockEnd":40,"startDir":0,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":42,"type":"Connector","name":"","dockStart":0,"dockEnd":0,"startDir":4,"endDir":4,"startY":320,"startX":1056,"endY":320,"endX":960,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"(to On the Rainbow)","_lineStyle":2},{"id":43,"x":-544,"y":-416,"type":"Room","name":"Forest (1)","subtitle":"","description":"This is a forest, with trees in all directions. To the east, there appears to be sunlight.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":44,"type":"Connector","name":"","dockStart":2,"dockEnd":43,"startDir":12,"endDir":6,"startY":0,"startX":0,"endY":-160,"endX":-448,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":45,"type":"Connector","name":"","dockStart":43,"dockEnd":30,"startDir":8,"endDir":8,"startY":0,"startX":0,"endY":448,"endX":512,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":46,"x":-96,"y":-416,"type":"Room","name":"Forest Path","subtitle":"","description":"This is a path winding through a dimly lit forest. The path heads north-south here. One particularly large tree with some low branches stands at the edge of the path.","dark":false,"endroom":false,"width":128,"height":64,"objects":[]},{"id":47,"type":"Connector","name":"","dockStart":3,"dockEnd":46,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":48,"type":"Connector","name":"","dockStart":43,"dockEnd":46,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":-384,"endX":-96,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":49,"x":-96,"y":-672,"type":"Room","name":"Clearing","subtitle":"","description":"You are in a clearing, with a forest surrounding you on all sides. A path leads south.","dark":false,"endroom":false,"width":128,"height":64,"objects":[{"name":"pile of leaves","type":"Object","content":[],"kind":5}]},{"id":50,"type":"Connector","name":"","dockStart":46,"dockEnd":49,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":51,"x":96,"y":-544,"type":"Room","name":"Up a Tree","subtitle":"","description":"You are about 10 feet above the ground nestled among some large branches. The nearest branch above you is above your reach.","dark":false,"endroom":false,"width":128,"height":64,"objects":[{"name":"bird\'s nest","type":"Object","content":[{"name":"jewel-encrusted egg","type":"Object","content":[],"kind":5,"description":"The egg is covered with fine gold inlay, and ornamented in lapis lazuli and mother-of-pearl. Unlike most eggs, this one is hinged and closed with a delicate looking clasp. The egg appears extremely fragile."}],"kind":5}]},{"id":52,"type":"Connector","name":"","dockStart":46,"dockEnd":51,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":53,"type":"Connector","name":"","dockStart":49,"dockEnd":0,"startDir":10,"endDir":10,"startY":0,"startX":0,"endY":-544,"endX":-160,"oneWay":false,"startType":4,"endType":0,"startLabel":"","endLabel":"(to Grating Room)"},{"id":54,"type":"Connector","name":"","dockStart":43,"dockEnd":49,"startDir":0,"endDir":12,"startY":0,"startX":0,"endY":-640,"endX":-128,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":55,"type":"Connector","name":"","dockStart":49,"dockEnd":18,"startDir":4,"endDir":14,"startY":0,"startX":0,"endY":-448,"endX":416,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":56,"type":"Connector","name":"","dockStart":46,"dockEnd":18,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":-384,"endX":416,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":57,"type":"Connector","name":"","dockStart":30,"dockEnd":0,"startDir":12,"endDir":12,"startY":0,"startX":0,"endY":416,"endX":384,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"(to Forest 1)"},{"id":58,"type":"Connector","name":"","dockStart":7,"dockEnd":0,"startDir":9,"endDir":8,"startY":0,"startX":0,"endY":128,"endX":32,"oneWay":false,"startType":0,"endType":0,"startLabel":"(from Studio)","endLabel":""}],"startRoom":2}',t("ZorkMap",e)}}}),System.register("io/mapJSON",["models/map","models/room","models/note","models/connector","models/block","models/mapSettings"],function(t,e){"use strict";var n,i,a,s,l,d;e&&e.id;return{setters:[function(e){n=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){d=e}],execute:function(){function e(){}e.save=function(e){var t=1;return e.elements.forEach(function(e){return e.id=t++}),JSON.stringify(e,function(e,t){if("map"!=e)return"_dockStart"==e||"dockStart"==e?null==this._dockStart?0:this._dockStart.id:"_dockEnd"==e||"dockEnd"==e?null==this._dockEnd?0:this._dockEnd.id:"_startRoom"==e||"startRoom"==e?null==this._startRoom?0:this._startRoom.id:t})},e.clone=function(e,t){for(var n=Object.keys(t),o=0;o<n.length;o++)e[n[o]]=t[n[o]];return e},e.load=function(e){var o=this,r=this.clone(new n.Map,JSON.parse(e));r.settings=(new d.MapSettings).cloneFrom(r.settings);var t=r.elements;return r.elements=new Array,t.forEach(function(e){var t=null,n=e.type||e._type;if("Room"==n)t=o.clone(new i.Room(r.settings),e);else if("Note"==n)t=o.clone(new a.Note(r.settings),e);else if("Block"==n)t=o.clone(new l.Block(r.settings),e);else{if("Connector"!=n)throw new TypeError("Element type "+n+" is unknown.");t=o.clone(new s.Connector(r.settings),e)}r.add(t)}),r.startRoom?r.startRoom=r.findById(r.startRoom,i.Room):r.startRoom=null,r.elements.forEach(function(e){e instanceof s.Connector&&(0!=e.dockStart?e.dockStart=r.findById(e.dockStart,i.Room):e.dockStart=null,0!=e.dockEnd?e.dockEnd=r.findById(e.dockEnd,i.Room):e.dockEnd=null)}),r},t("MapJSON",e)}}}),System.register("maps/adventureMap",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(){}e.json='{"settings":{"grid":{"visible":true,"origin":true,"snap":true,"size":32,"color":"#f0f0f0","lineWidth":1,"originWidth":5},"room":{"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":8,"darknessSize":50,"fillColor":"#ffffff","borderColor":"#000000","nameColor":"#333333","subtitleColor":"#666666","darkColor":"rgba(33, 35, 97, 0.8)","startRoomColor":"green","endRoomColor":"red"},"connector":{"lineWidth":1,"lineStyle":1,"isCurve":false,"color":"#000000","stalk":16,"arrowSize":5,"curveStrength":0.4,"labelDistance":12},"note":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":0,"fillColor":"#ffffff","borderColor":"#000000","textColor":"#333333"},"block":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":0,"shape":0,"rounding":0,"fillColor":"#D5E5D6","borderColor":"#000000"},"background":"wood"},"title":"Untitled map","author":"","description":"","elements":[{"id":1,"x":0,"y":-32,"type":"Room","name":"Building","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"keys","type":"Object","description":"","kind":5,"content":[]},{"name":"lamp","type":"Object","description":"","kind":5,"content":[]},{"name":"food","type":"Object","description":"","kind":5,"content":[]},{"name":"bottle","type":"Object","description":"","kind":5,"content":[]}]},{"id":2,"x":-160,"y":-32,"type":"Room","name":"End of a Road","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":3,"type":"Connector","name":"","dockStart":1,"dockEnd":2,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":2,"endType":1,"startLabel":"","endLabel":""},{"id":4,"x":-352,"y":-32,"type":"Room","name":"Hill in Road","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":5,"type":"Connector","name":"","dockStart":2,"dockEnd":4,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":6,"type":"Connector","name":"","dockStart":4,"dockEnd":2,"startDir":0,"endDir":14,"startY":0,"startX":0,"endY":-64,"endX":-192,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":7,"x":-160,"y":96,"type":"Room","name":"Valley","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":8,"type":"Connector","name":"","dockStart":2,"dockEnd":7,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":9,"x":-160,"y":224,"type":"Room","name":"Slit in Streambed","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":10,"type":"Connector","name":"","dockStart":7,"dockEnd":9,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":11,"x":-160,"y":352,"type":"Room","name":"Outside Grate","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":12,"type":"Connector","name":"","dockStart":9,"dockEnd":11,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":13,"x":-160,"y":480,"type":"Room","name":"Below the Grate","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":14,"type":"Connector","name":"","dockStart":11,"dockEnd":13,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":15,"x":-320,"y":96,"type":"Room","name":"In Forest (1)","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":16,"type":"Connector","name":"","dockStart":7,"dockEnd":15,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":17,"x":-480,"y":-32,"type":"Room","name":"In Forest (2)","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":18,"type":"Connector","name":"","dockStart":15,"dockEnd":17,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":19,"type":"Connector","name":"","dockStart":17,"dockEnd":2,"startDir":0,"endDir":15,"startY":0,"startX":0,"endY":-64,"endX":-160,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":20,"type":"Connector","name":"","dockStart":2,"dockEnd":15,"startDir":0,"endDir":1,"startY":0,"startX":0,"endY":64,"endX":-416,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":21,"x":-320,"y":480,"type":"Room","name":"Cobble Crawl","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"cage","type":"Object","description":"","kind":5,"content":[]}]},{"id":22,"type":"Connector","name":"","dockStart":13,"dockEnd":21,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":23,"x":-480,"y":480,"type":"Room","name":"Debris Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"rod","type":"Object","description":"","kind":5,"content":[]}]},{"id":24,"type":"Connector","name":"","dockStart":21,"dockEnd":23,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":25,"x":-640,"y":480,"type":"Room","name":"Awkward sloping E/W Canyon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":26,"type":"Connector","name":"","dockStart":23,"dockEnd":25,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":27,"x":-800,"y":480,"type":"Room","name":"Bird Chamber","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"bird","type":"Object","description":"","kind":5,"content":[]}]},{"id":28,"type":"Connector","name":"","dockStart":25,"dockEnd":27,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":29,"x":-960,"y":480,"type":"Room","name":"Top of Small Pit","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":30,"type":"Connector","name":"","dockStart":27,"dockEnd":29,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":31,"x":-960,"y":608,"type":"Room","name":"Hall of Mists","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":32,"type":"Connector","name":"","dockStart":29,"dockEnd":31,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":33,"x":-1120,"y":608,"type":"Room","name":"East Bank of Fissure","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":34,"type":"Connector","name":"","dockStart":31,"dockEnd":33,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":35,"x":-1280,"y":608,"type":"Room","name":"West Side of Fissure","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"diamonds","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"#F8DFD0"},{"id":36,"type":"Connector","name":"use rod","dockStart":33,"dockEnd":35,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":37,"x":-1440,"y":608,"type":"Room","name":"West End of Hall of Mists","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":38,"type":"Connector","name":"","dockStart":35,"dockEnd":37,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":39,"type":"Connector","name":"","dockStart":37,"dockEnd":35,"startDir":0,"endDir":14,"startY":0,"startX":0,"endY":576,"endX":-1280,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":40,"x":-960,"y":736,"type":"Room","name":"Nugget of Gold Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"nugget","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"#F8DFD0"},{"id":41,"type":"Connector","name":"","dockStart":31,"dockEnd":40,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":42,"x":-1600,"y":608,"type":"Room","name":"East End of Long Hall","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":43,"type":"Connector","name":"","dockStart":37,"dockEnd":42,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":44,"x":-1760,"y":608,"type":"Room","name":"West end of Long Hall","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":45,"type":"Connector","name":"","dockStart":42,"dockEnd":44,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":46,"x":-1760,"y":480,"type":"Room","name":"Crossover, High NS, Low EW","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":47,"type":"Connector","name":"","dockStart":44,"dockEnd":46,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":48,"x":-1760,"y":352,"type":"Room","name":"Dead End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":49,"type":"Connector","name":"","dockStart":46,"dockEnd":48,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":50,"type":"Connector","name":"","dockStart":46,"dockEnd":42,"startDir":12,"endDir":13,"startY":0,"startX":0,"endY":640,"endX":-1632,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":51,"type":"Connector","name":"","dockStart":42,"dockEnd":46,"startDir":0,"endDir":6,"startY":0,"startX":0,"endY":640,"endX":-1664,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":52,"x":-1760,"y":736,"type":"Room","name":"Maze of Passages, All Different","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[],"_shape":1},{"id":53,"type":"Connector","name":"","dockStart":44,"dockEnd":52,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":54,"x":-1760,"y":864,"type":"Room","name":"Dead End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"vending machine","type":"Object","description":"","kind":5,"content":[]}]},{"id":55,"type":"Connector","name":"","dockStart":52,"dockEnd":54,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":56,"x":-1440,"y":736,"type":"Room","name":"Maze of Passages, All Alike","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[],"_shape":1},{"id":57,"type":"Connector","name":"","dockStart":37,"dockEnd":56,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":58,"x":-1600,"y":864,"type":"Room","name":"Dead End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":59,"type":"Connector","name":"","dockStart":56,"dockEnd":58,"startDir":10,"endDir":2,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":60,"x":-1280,"y":864,"type":"Room","name":"Brink of Pit","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":61,"type":"Connector","name":"","dockStart":56,"dockEnd":60,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":62,"x":-1280,"y":992,"type":"Room","name":"Dead End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":63,"type":"Connector","name":"","dockStart":60,"dockEnd":62,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":64,"type":"Connector","name":"","dockStart":60,"dockEnd":27,"startDir":4,"endDir":6,"startY":0,"startX":0,"endY":544,"endX":-736,"oneWay":true,"startType":4,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":65,"x":-960,"y":1248,"type":"Room","name":"Hall of the Mountain King","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"snake","type":"Object","description":"","kind":4,"content":[]}]},{"id":66,"type":"Connector","name":"","dockStart":31,"dockEnd":65,"startDir":6,"endDir":2,"startY":0,"startX":0,"endY":992,"endX":-864,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":67,"x":-960,"y":1120,"type":"Room","name":"Low N/S At Hole","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"silver","type":"Object","description":"","kind":5,"content":[]}]},{"id":68,"type":"Connector","name":"","dockStart":65,"dockEnd":67,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":69,"x":-960,"y":992,"type":"Room","name":"Y2","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":70,"type":"Connector","name":"","dockStart":67,"dockEnd":69,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":71,"x":-1120,"y":992,"type":"Room","name":"Window on Pit","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"figure","type":"Object","description":"","kind":5,"content":[]}]},{"id":72,"type":"Connector","name":"","dockStart":69,"dockEnd":71,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":73,"x":-800,"y":960,"type":"Room","name":"Jumble of Rock","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":74,"type":"Connector","name":"","dockStart":69,"dockEnd":73,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":75,"type":"Connector","name":"","dockStart":73,"dockEnd":31,"startDir":0,"endDir":4,"startY":0,"startX":0,"endY":640,"endX":-864,"oneWay":true,"startType":3,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":76,"type":"Connector","name":"PLUGH","dockStart":69,"dockEnd":1,"startDir":5,"endDir":7,"startY":992,"startX":-864,"endY":32,"endX":32,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true,"_lineWidth":2,"_lineStyle":5},{"id":77,"type":"Connector","name":"XYZZY","dockStart":1,"dockEnd":23,"startDir":8,"endDir":14,"startY":32,"startX":32,"endY":544,"endX":-448,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true,"_lineWidth":2,"_lineStyle":5},{"id":78,"x":-1216,"y":1248,"type":"Room","name":"West Side Chaimber","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"coins","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"rgb(246, 213, 213)"},{"id":79,"type":"Connector","name":"","dockStart":65,"dockEnd":78,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":80,"type":"Connector","name":"","dockStart":78,"dockEnd":46,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":512,"endX":-1664,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":81,"x":-960,"y":1376,"type":"Room","name":"South Side Chamber","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"jewelry","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"rgb(246, 213, 213)"},{"id":82,"type":"Connector","name":"","dockStart":65,"dockEnd":81,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":83,"x":-1120,"y":1376,"type":"Room","name":"Secret E/W Canyon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":84,"type":"Connector","name":"","dockStart":65,"dockEnd":83,"startDir":10,"endDir":2,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":85,"x":-1280,"y":1376,"type":"Room","name":"Secret Canyon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"dragon","type":"Object","description":"","kind":4,"content":[]},{"name":"rug","type":"Object","description":"","kind":5,"content":[]}]},{"id":86,"type":"Connector","name":"","dockStart":83,"dockEnd":85,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":87,"type":"Connector","name":"","dockStart":85,"dockEnd":160,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":1184,"endX":-1856,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":false},{"id":88,"x":-480,"y":1504,"type":"Room","name":"Dirty Passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":89,"type":"Connector","name":"","dockStart":67,"dockEnd":88,"startDir":4,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":"","_isCurve":true},{"id":90,"x":-320,"y":1504,"type":"Room","name":"Brink of Small Climbable Pit","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":91,"type":"Connector","name":"","dockStart":88,"dockEnd":90,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":92,"x":-320,"y":1632,"type":"Room","name":"Bottom of Pit with Stream","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"water","type":"Object","description":"","kind":5,"content":[]}]},{"id":93,"type":"Connector","name":"","dockStart":90,"dockEnd":92,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":94,"x":-640,"y":1504,"type":"Room","name":"Dusty Rock Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":95,"type":"Connector","name":"","dockStart":88,"dockEnd":94,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":96,"x":-800,"y":1728,"type":"Room","name":"Complex Junction","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":97,"type":"Connector","name":"","dockStart":94,"dockEnd":96,"startDir":9,"endDir":3,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":98,"x":-640,"y":1856,"type":"Room","name":"Anteroom","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"magazine","type":"Object","description":"","kind":5,"content":[]}]},{"id":99,"type":"Connector","name":"","dockStart":96,"dockEnd":98,"startDir":4,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":3,"startLabel":"e","endLabel":"","_isCurve":true},{"id":100,"x":-480,"y":1856,"type":"Room","name":"Witt\'s End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[],"_shape":1},{"id":101,"type":"Connector","name":"","dockStart":98,"dockEnd":100,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":102,"x":-800,"y":1504,"type":"Room","name":"Shell Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"clam","type":"Object","description":"","kind":5,"content":[]}]},{"id":103,"type":"Connector","name":"","dockStart":96,"dockEnd":102,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":104,"x":-640,"y":1376,"type":"Room","name":"Arched Hall","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"sea water","type":"Object","description":"","kind":5,"content":[]}]},{"id":105,"type":"Connector","name":"","dockStart":102,"dockEnd":104,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":106,"x":-960,"y":1504,"type":"Room","name":"Long Sloping Corridor, Ragged Walls","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":107,"type":"Connector","name":"","dockStart":102,"dockEnd":106,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":108,"x":-1120,"y":1504,"type":"Room","name":"Cul-de-sac","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"pearl","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"rgb(246, 213, 213)"},{"id":109,"type":"Connector","name":"","dockStart":106,"dockEnd":108,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":110,"x":-960,"y":1728,"type":"Room","name":"Bedquilt","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":111,"type":"Connector","name":"","dockStart":96,"dockEnd":110,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":112,"type":"Connector","name":"","dockStart":110,"dockEnd":94,"startDir":1,"endDir":10,"startY":0,"startX":0,"endY":1568,"endX":-640,"oneWay":true,"startType":3,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":113,"type":"Connector","name":"","dockStart":110,"dockEnd":98,"startDir":6,"endDir":12,"startY":0,"startX":0,"endY":1792,"endX":-672,"oneWay":false,"startType":4,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":114,"x":-1600,"y":1632,"type":"Room","name":"Large Low Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":115,"type":"Connector","name":"","dockStart":110,"dockEnd":114,"startDir":0,"endDir":3,"startY":0,"startX":0,"endY":1632,"endX":-1504,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":116,"x":-1120,"y":1920,"type":"Room","name":"Swiss Cheese Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":117,"type":"Connector","name":"","dockStart":110,"dockEnd":116,"startDir":12,"endDir":2,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":118,"x":-960,"y":1920,"type":"Room","name":"Soft Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"pillow","type":"Object","description":"","kind":5,"content":[]}]},{"id":119,"type":"Connector","name":"","dockStart":116,"dockEnd":118,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":120,"x":-1120,"y":2176,"type":"Room","name":"Tall E/W Canyon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":121,"type":"Connector","name":"","dockStart":116,"dockEnd":120,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":122,"x":-960,"y":2304,"type":"Room","name":"Wide Place in Tight Canyon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":123,"type":"Connector","name":"","dockStart":120,"dockEnd":122,"startDir":4,"endDir":0,"startY":1920,"startX":-1024,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":124,"type":"Connector","name":"","dockStart":83,"dockEnd":122,"startDir":10,"endDir":2,"startY":0,"startX":0,"endY":2144,"endX":-864,"oneWay":true,"startType":4,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":125,"x":-1280,"y":2048,"type":"Room","name":"Mass of Boulders","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":126,"type":"Connector","name":"","dockStart":120,"dockEnd":125,"startDir":12,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":127,"x":-1440,"y":1920,"type":"Room","name":"East End of Two Pit Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":128,"type":"Connector","name":"","dockStart":116,"dockEnd":127,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":129,"x":-1600,"y":1920,"type":"Room","name":"West End of Two Pit Room (Hole)","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":130,"type":"Connector","name":"","dockStart":127,"dockEnd":129,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":131,"x":-1440,"y":2048,"type":"Room","name":"East Pit","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"oil","type":"Object","description":"","kind":5,"content":[]}]},{"id":132,"type":"Connector","name":"","dockStart":127,"dockEnd":131,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":133,"x":-1600,"y":2048,"type":"Room","name":"West Pit","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"plant","type":"Object","description":"","kind":5,"content":[]}]},{"id":134,"type":"Connector","name":"","dockStart":129,"dockEnd":133,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":135,"x":-1760,"y":1920,"type":"Room","name":"Slab Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":136,"type":"Connector","name":"","dockStart":129,"dockEnd":135,"startDir":12,"endDir":8,"startY":0,"startX":0,"endY":1696,"endX":-1728,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":137,"type":"Connector","name":"","dockStart":110,"dockEnd":135,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":1600,"endX":-1696,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":138,"x":-1440,"y":1504,"type":"Room","name":"Oriental Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"vase","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"rgb(246, 213, 213)"},{"id":139,"type":"Connector","name":"","dockStart":114,"dockEnd":138,"startDir":6,"endDir":12,"startY":0,"startX":0,"endY":1760,"endX":-1216,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":140,"type":"Connector","name":"","dockStart":138,"dockEnd":116,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":1888,"endX":-1152,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":141,"x":-1600,"y":1504,"type":"Room","name":"Dead End Crawl","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":142,"type":"Connector","name":"","dockStart":114,"dockEnd":141,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":143,"x":-1440,"y":1248,"type":"Room","name":"Misty Cavern","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":144,"type":"Connector","name":"","dockStart":138,"dockEnd":143,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":145,"x":-1600,"y":1376,"type":"Room","name":"Alcove (Easy Squeeze)","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":146,"type":"Connector","name":"","dockStart":143,"dockEnd":145,"startDir":12,"endDir":14,"startY":0,"startX":0,"endY":1344,"endX":-1632,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":147,"x":-1920,"y":2048,"type":"Room","name":"Narrow Corridor","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":148,"type":"Connector","name":"CLIMB","dockStart":147,"dockEnd":133,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":2080,"endX":-1632,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":149,"x":-2080,"y":1920,"type":"Room","name":"Giant Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"eggs","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"rgb(246, 213, 213)"},{"id":150,"type":"Connector","name":"","dockStart":147,"dockEnd":149,"startDir":12,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":151,"x":-1920,"y":1792,"type":"Room","name":"Recent Cave-in","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":152,"type":"Connector","name":"","dockStart":149,"dockEnd":151,"startDir":4,"endDir":8,"startY":0,"startX":0,"endY":1856,"endX":-1888,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":153,"x":-2080,"y":1792,"type":"Room","name":"Immense N/S Passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"iron door","type":"Object","description":"","kind":5,"content":[]}]},{"id":154,"type":"Connector","name":"","dockStart":149,"dockEnd":153,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":155,"x":-2080,"y":1664,"type":"Room","name":"Cavern with Waterfall","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"trident","type":"Object","description":"","kind":5,"content":[]},{"name":"water","type":"Object","description":"","kind":5,"content":[]}]},{"id":156,"type":"Connector","name":"","dockStart":153,"dockEnd":155,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":157,"x":-2240,"y":1792,"type":"Room","name":"Steep Incline Above Large Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":158,"type":"Connector","name":"","dockStart":155,"dockEnd":157,"startDir":12,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":159,"type":"Connector","name":"","dockStart":157,"dockEnd":114,"startDir":8,"endDir":12,"startY":1792,"startX":-2144,"endY":1696,"endX":-1632,"oneWay":true,"startType":4,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":160,"x":-1760,"y":1248,"type":"Room","name":"Secret N/S Canyon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":161,"type":"Connector","name":"","dockStart":160,"dockEnd":135,"startDir":9,"endDir":15,"startY":0,"startX":0,"endY":1888,"endX":-1760,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":162,"x":-1760,"y":1120,"type":"Room","name":"Mirror Canyon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":163,"type":"Connector","name":"","dockStart":160,"dockEnd":162,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":164,"x":-1760,"y":992,"type":"Room","name":"Reservoir","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"water","type":"Object","description":"","kind":5,"content":[]}]},{"id":165,"type":"Connector","name":"","dockStart":162,"dockEnd":164,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":166,"x":-3008,"y":1504,"type":"Room","name":"Sloping Corridor","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":167,"type":"Connector","name":"","dockStart":166,"dockEnd":114,"startDir":4,"endDir":10,"startY":0,"startX":0,"endY":1696,"endX":-1632,"oneWay":false,"startType":4,"endType":0,"startLabel":"","endLabel":""},{"id":168,"x":-2848,"y":1376,"type":"Room","name":"SW Side of Chasm","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"troll","type":"Object","description":"","kind":4,"content":[]}]},{"id":169,"type":"Connector","name":"","dockStart":166,"dockEnd":168,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":0,"startLabel":"","endLabel":""},{"id":170,"x":-2688,"y":1248,"type":"Room","name":"NE Side of Chasm","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"troll","type":"Object","description":"","kind":4,"content":[]}]},{"id":171,"type":"Connector","name":"","dockStart":168,"dockEnd":170,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":172,"x":-2528,"y":1120,"type":"Room","name":"Corridor","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":173,"type":"Connector","name":"","dockStart":170,"dockEnd":172,"startDir":2,"endDir":12,"startY":0,"startX":0,"endY":1184,"endX":-2176,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":174,"x":-2368,"y":1120,"type":"Room","name":"Fork in Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":175,"type":"Connector","name":"","dockStart":172,"dockEnd":174,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":176,"x":-2208,"y":1248,"type":"Room","name":"Limestone Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":177,"type":"Connector","name":"","dockStart":174,"dockEnd":176,"startDir":6,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":178,"x":-2048,"y":1376,"type":"Room","name":"Front of Barren Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":179,"type":"Connector","name":"","dockStart":176,"dockEnd":178,"startDir":8,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":180,"x":-1888,"y":1376,"type":"Room","name":"Barren Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"bear","type":"Object","description":"","kind":4,"content":[]},{"name":"chain","type":"Object","description":"","kind":5,"content":[]}]},{"id":181,"type":"Connector","name":"","dockStart":178,"dockEnd":180,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":182,"x":-2208,"y":992,"type":"Room","name":"Junction with Warm Walls","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":183,"type":"Connector","name":"","dockStart":174,"dockEnd":182,"startDir":2,"endDir":8,"startY":0,"startX":0,"endY":1056,"endX":-2176,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":184,"x":-2048,"y":992,"type":"Room","name":"Chamber of Boulders","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"spices","type":"Object","description":"","kind":5,"content":[]}],"_fillColor":"#F8DFD0"},{"id":185,"type":"Connector","name":"","dockStart":182,"dockEnd":184,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":186,"x":-2208,"y":864,"type":"Room","name":"Breath-taking View","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"volcano","type":"Object","description":"","kind":6,"content":[]}]},{"id":187,"type":"Connector","name":"","dockStart":182,"dockEnd":186,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""}],"startRoom":0}',t("AdventureMap",e)}}}),System.register("maps/castleofdoomMap",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(){}e.json='{"settings":{"grid":{"visible":true,"origin":true,"snap":true,"size":32,"color":"#f0f0f0","lineWidth":1,"originWidth":5,"background":"#ffffff"},"room":{"width":96,"height":64,"margin":6,"lineWidth":2,"lineStyle":1,"shape":0,"rounding":6,"darknessSize":50,"fillColor":"#ffffff","borderColor":"#000000","nameColor":"#333333","subtitleColor":"#666666","darkColor":"rgba(33, 35, 97, 0.8)","startRoomColor":"green","endRoomColor":"red"},"connector":{"lineWidth":2,"lineStyle":1,"isCurve":false,"color":"rgb(0, 1, 41)","stalk":16,"arrowSize":5,"curveStrength":0.4,"labelDistance":12},"note":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":0,"fillColor":"#ffffff","borderColor":"#000000","textColor":"#333333"},"block":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":0,"shape":0,"rounding":0,"fillColor":"#D5E5D6","borderColor":"#000000"}},"title":"Castle of Doom","author":"John Metcalf","description":"","elements":[{"id":1,"x":-32,"y":-32,"type":"Room","name":"Entrance to South Wing","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":2,"x":-32,"y":96,"type":"Room","name":"Circular Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":3,"type":"Connector","name":"","dockStart":1,"dockEnd":2,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":4,"x":-32,"y":-160,"type":"Room","name":"Courtyard","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"coin","type":"Object","description":"","kind":5,"content":[]}]},{"id":5,"type":"Connector","name":"","dockStart":1,"dockEnd":4,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":6,"x":128,"y":-160,"type":"Room","name":"Entrace to East Wing","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":7,"type":"Connector","name":"","dockStart":4,"dockEnd":6,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":8,"x":288,"y":-160,"type":"Room","name":"North End of Tunnel","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":9,"type":"Connector","name":"","dockStart":6,"dockEnd":8,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":10,"x":-32,"y":-288,"type":"Room","name":"Inside Main Gates","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"guard","type":"Object","description":"","kind":4,"content":[]}]},{"id":11,"type":"Connector","name":"","dockStart":4,"dockEnd":10,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":12,"x":128,"y":-288,"type":"Room","name":"Guardroom","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"key","type":"Object","description":"","kind":5,"content":[]}]},{"id":13,"type":"Connector","name":"","dockStart":10,"dockEnd":12,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":14,"x":-32,"y":-416,"type":"Room","name":"Outside Main Gates","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"pass","type":"Object","description":"","kind":5,"content":[]}]},{"id":15,"type":"Connector","name":"","dockStart":10,"dockEnd":14,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":16,"x":448,"y":-160,"type":"Room","name":"Dining Hall","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":17,"type":"Connector","name":"","dockStart":8,"dockEnd":16,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":18,"x":448,"y":-288,"type":"Room","name":"Kitchen","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"knife","type":"Object","description":"","kind":5,"content":[]}]},{"id":19,"type":"Connector","name":"","dockStart":16,"dockEnd":18,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":20,"x":288,"y":-32,"type":"Room","name":"North to South Tunnel","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":21,"type":"Connector","name":"","dockStart":8,"dockEnd":20,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":22,"x":448,"y":-32,"type":"Room","name":"Bedroom","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"nail file","type":"Object","description":"","kind":5,"content":[]}]},{"id":23,"type":"Connector","name":"","dockStart":20,"dockEnd":22,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":24,"x":288,"y":96,"type":"Room","name":"Dead End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"bottle","type":"Object","description":"","kind":5,"content":[]}]},{"id":25,"type":"Connector","name":"","dockStart":20,"dockEnd":24,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":26,"x":128,"y":96,"type":"Room","name":"Armoury","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":27,"type":"Connector","name":"","dockStart":2,"dockEnd":26,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":28,"x":128,"y":224,"type":"Room","name":"Bottom of Staircase","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":29,"type":"Connector","name":"","dockStart":26,"dockEnd":28,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":30,"x":288,"y":224,"type":"Room","name":"Spiral Staircase","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":31,"type":"Connector","name":"","dockStart":28,"dockEnd":30,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":32,"x":448,"y":224,"type":"Room","name":"Spiral Staircase","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":33,"type":"Connector","name":"","dockStart":30,"dockEnd":32,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":34,"x":608,"y":224,"type":"Room","name":"Small Circular Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"sorcerer","type":"Object","description":"","kind":4,"content":[]}]},{"id":35,"type":"Connector","name":"","dockStart":32,"dockEnd":34,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":36,"x":-192,"y":96,"type":"Room","name":"Bottom of Staircase","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":37,"type":"Connector","name":"","dockStart":2,"dockEnd":36,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":38,"x":-192,"y":224,"type":"Room","name":"Narrow Corridor","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":39,"type":"Connector","name":"","dockStart":36,"dockEnd":38,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":40,"x":-352,"y":224,"type":"Room","name":"Small Cavern","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":41,"type":"Connector","name":"","dockStart":38,"dockEnd":40,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":42,"x":-352,"y":352,"type":"Room","name":"Dungeon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":43,"type":"Connector","name":"open grate","dockStart":40,"dockEnd":42,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":44,"x":-192,"y":352,"type":"Room","name":"Maze of Tunnels","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":45,"type":"Connector","name":"","dockStart":38,"dockEnd":44,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":46,"x":-32,"y":480,"type":"Room","name":"Maze of Tunnels","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"paper","type":"Object","description":"","kind":5,"content":[]}]},{"id":47,"type":"Connector","name":"","dockStart":44,"dockEnd":46,"startDir":8,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":48,"x":-192,"y":-160,"type":"Room","name":"Entrance to West Wing","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":49,"type":"Connector","name":"","dockStart":4,"dockEnd":48,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":50,"x":-192,"y":-32,"type":"Room","name":"Chapel","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":51,"type":"Connector","name":"","dockStart":48,"dockEnd":50,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":52,"x":-352,"y":-32,"type":"Room","name":"Vestry","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[{"name":"mirror","type":"Object","description":"","kind":5,"content":[]}]},{"id":53,"type":"Connector","name":"","dockStart":50,"dockEnd":52,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""}],"startRoom":0}',t("CastleofdoomMap",e)}}}),System.register("maps/hhg",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(){}e.json='{"settings":{"grid":{"visible":true,"origin":true,"snap":true,"size":32,"color":"#f0f0f0","lineWidth":1,"originWidth":5,"background":"#ffffff"},"room":{"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":0,"darknessSize":50,"fillColor":"#ffffff","borderColor":"#000000","nameColor":"#333333","subtitleColor":"#666666","darkColor":"rgba(33, 35, 97, 0.8)","startRoomColor":"green","endRoomColor":"red"},"connector":{"lineWidth":1,"lineStyle":1,"isCurve":false,"color":"#000000","stalk":16,"arrowSize":5,"curveStrength":0.4,"labelDistance":12},"note":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":0,"fillColor":"#ffffff","borderColor":"#000000","textColor":"#333333"},"block":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":0,"shape":0,"rounding":0,"fillColor":"#D5E5D6","borderColor":"#000000"}},"title":"Hitch Hiker\'s Guide to the Galaxy","author":"Alexander van Oostenrijk","description":"","elements":[{"id":1,"x":-608,"y":-352,"type":"Room","name":"Back of House","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":2,"x":-608,"y":-224,"type":"Room","name":"Bedroom","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":3,"x":-608,"y":-96,"type":"Room","name":"Front Porch","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":4,"type":"Connector","name":"","dockStart":2,"dockEnd":3,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":5,"x":-608,"y":32,"type":"Room","name":"Front of House","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":6,"type":"Connector","name":"","dockStart":3,"dockEnd":5,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":7,"x":-608,"y":160,"type":"Room","name":"Country Lane","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":8,"type":"Connector","name":"","dockStart":5,"dockEnd":7,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":9,"x":-768,"y":160,"type":"Room","name":"Pub","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":10,"type":"Connector","name":"","dockStart":7,"dockEnd":9,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":11,"type":"Connector","name":"","dockStart":5,"dockEnd":1,"startDir":4,"endDir":4,"startY":0,"startX":0,"endY":-256,"endX":-64,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":12,"type":"Connector","name":"","dockStart":5,"dockEnd":1,"startDir":12,"endDir":12,"startY":0,"startX":0,"endY":-224,"endX":-192,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":13,"x":-192,"y":-352,"type":"Room","name":"Captain\'s Quarters","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":14,"x":-32,"y":-352,"type":"Room","name":"Vogon Hold","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":15,"type":"Connector","name":"","dockStart":13,"dockEnd":14,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":16,"x":128,"y":-352,"type":"Room","name":"Airlock","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":17,"type":"Connector","name":"","dockStart":14,"dockEnd":16,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":18,"x":-800,"y":-384,"type":"Block","width":384,"height":672},{"id":19,"x":-768,"y":-352,"type":"Note","text":"Earth","width":96,"height":64,"_shape":0,"_fillColor":"rgb(223, 223, 223)","_lineWidth":3},{"id":20,"x":-384,"y":-384,"type":"Block","width":800,"height":128},{"id":21,"x":-352,"y":-352,"type":"Note","text":"Vogon Ship","width":96,"height":64,"_textColor":"rgb(51, 51, 51)","_lineWidth":3,"_fillColor":"rgb(223, 223, 223)"},{"id":22,"x":-352,"y":-64,"type":"Note","text":"Heart of Gold","width":96,"height":64,"_lineWidth":3,"_fillColor":"rgb(223, 223, 223)"},{"id":23,"x":-192,"y":-192,"type":"Room","name":"Bridge","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":24,"x":-192,"y":-64,"type":"Room","name":"Galley","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":25,"x":-192,"y":64,"type":"Room","name":"Marvin\'s Party","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":26,"x":-32,"y":64,"type":"Room","name":"Corridor Aft End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":27,"x":128,"y":64,"type":"Room","name":"Hatchway","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":28,"type":"Connector","name":"","dockStart":26,"dockEnd":27,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":29,"x":288,"y":64,"type":"Room","name":"Access Space","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":30,"type":"Connector","name":"","dockStart":27,"dockEnd":29,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":31,"x":128,"y":192,"type":"Room","name":"Ramp","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":32,"type":"Connector","name":"","dockStart":27,"dockEnd":31,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":4,"endType":0,"startLabel":"","endLabel":""},{"id":33,"x":-32,"y":192,"type":"Room","name":"Engine Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":34,"type":"Connector","name":"","dockStart":26,"dockEnd":33,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":35,"type":"Connector","name":"","dockStart":26,"dockEnd":25,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":64,"endX":-128,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":36,"x":-32,"y":-64,"type":"Room","name":"Corridor Fore End","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":37,"type":"Connector","name":"","dockStart":26,"dockEnd":36,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":38,"type":"Connector","name":"","dockStart":24,"dockEnd":36,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":-64,"endX":-96,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":39,"x":-32,"y":-192,"type":"Room","name":"Entry Bay 2","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":40,"type":"Connector","name":"","dockStart":36,"dockEnd":39,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":41,"type":"Connector","name":"","dockStart":36,"dockEnd":23,"startDir":14,"endDir":6,"startY":0,"startX":0,"endY":-160,"endX":-128,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":42,"type":"Connector","name":"To Sauna","dockStart":23,"dockEnd":0,"startDir":12,"endDir":12,"startY":0,"startX":0,"endY":-160,"endX":-352,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":43,"x":-384,"y":-224,"type":"Block","width":800,"height":512},{"id":44,"x":640,"y":-352,"type":"Room","name":"Lair","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":45,"x":480,"y":-224,"type":"Room","name":"Inner Lair","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":46,"type":"Connector","name":"","dockStart":44,"dockEnd":45,"startDir":10,"endDir":2,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":47,"x":800,"y":-352,"type":"Room","name":"Beast\'s Outer Lair","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":48,"type":"Connector","name":"","dockStart":44,"dockEnd":47,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":49,"x":480,"y":-352,"type":"Note","text":"Traal","width":96,"height":64,"_fillColor":"rgb(223, 223, 223)","_lineWidth":3},{"id":50,"x":448,"y":-384,"type":"Block","width":480,"height":256},{"id":51,"x":480,"y":352,"type":"Note","text":"Damogran","width":96,"height":64,"_lineWidth":3,"_fillColor":"rgb(223, 223, 223)"},{"id":52,"x":640,"y":224,"type":"Room","name":"Dais","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":53,"x":640,"y":352,"type":"Room","name":"Presidential Speedboat","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":54,"type":"Connector","name":"","dockStart":52,"dockEnd":53,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":55,"type":"Connector","name":"To Heart of Gold","dockStart":52,"dockEnd":0,"startDir":12,"endDir":12,"startY":0,"startX":0,"endY":256,"endX":480,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_lineStyle":2},{"id":56,"x":448,"y":192,"type":"Block","width":480,"height":256},{"id":57,"x":480,"y":-64,"type":"Note","text":"Party","width":96,"height":64,"_fillColor":"rgb(223, 223, 223)","_lineWidth":3},{"id":58,"x":640,"y":-64,"type":"Room","name":"Dining Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":59,"x":800,"y":-64,"type":"Room","name":"Living Room","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":60,"type":"Connector","name":"","dockStart":58,"dockEnd":59,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":61,"x":640,"y":64,"type":"Room","name":"Kitchen","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":62,"type":"Connector","name":"","dockStart":59,"dockEnd":61,"startDir":10,"endDir":2,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":63,"type":"Connector","name":"","dockStart":61,"dockEnd":58,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":-32,"endX":640,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":64,"x":448,"y":-96,"type":"Block","width":480,"height":256},{"id":65,"x":-352,"y":352,"type":"Note","text":"War Chamber & Maze","width":96,"height":64,"_lineWidth":3,"_fillColor":"rgb(223, 223, 223)"},{"id":66,"x":-32,"y":352,"type":"Room","name":"Maze","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":67,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":0,"endDir":1,"startY":0,"startX":0,"endY":384,"endX":-128,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":68,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":2,"endDir":3,"startY":0,"startX":0,"endY":416,"endX":-96,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":69,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":4,"endDir":5,"startY":0,"startX":0,"endY":448,"endX":-96,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":70,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":7,"endDir":6,"startY":480,"startX":-128,"endY":480,"endX":-128,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":71,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":8,"endDir":9,"startY":0,"startX":0,"endY":480,"endX":-192,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":72,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":10,"endDir":11,"startY":0,"startX":0,"endY":448,"endX":-224,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":73,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":12,"endDir":13,"startY":0,"startX":0,"endY":416,"endX":-224,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":74,"type":"Connector","name":"","dockStart":66,"dockEnd":66,"startDir":14,"endDir":15,"startY":0,"startX":0,"endY":384,"endX":-192,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":75,"x":-192,"y":352,"type":"Room","name":"War Chamber","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":76,"x":-384,"y":320,"type":"Block","width":800,"height":128},{"id":77,"x":-800,"y":320,"type":"Note","text":"Hitch\'s Hikers Guide to the Galaxy","width":384,"height":128,"_rounding":30,"_shape":0,"_lineWidth":4,"_fillColor":"#D0E0F2"}],"startRoom":0}',t("HitchhikersguideMap",e)}}}),System.register("maps/hobbitMap",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(){}e.json='{"settings":{"grid":{"visible":true,"origin":true,"snap":true,"size":32,"color":"#f0f0f0","lineWidth":1,"originWidth":5,"background":"#ffffff"},"room":{"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":0,"darknessSize":50,"fillColor":"#ffffff","borderColor":"#000000","nameColor":"#333333","subtitleColor":"#666666","darkColor":"rgba(33, 35, 97, 0.8)","startRoomColor":"green","endRoomColor":"red"},"connector":{"lineWidth":1,"lineStyle":1,"isCurve":false,"color":"#000000","stalk":16,"arrowSize":5,"curveStrength":0.4,"labelDistance":12},"note":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":1,"shape":0,"rounding":0,"fillColor":"#ffffff","borderColor":"#000000","textColor":"#333333"},"block":{"minWidth":64,"minHeight":32,"width":96,"height":64,"margin":6,"lineWidth":1,"lineStyle":0,"shape":0,"rounding":0,"fillColor":"#D5E5D6","borderColor":"#000000"}},"title":"The Hobbit","author":"Alexander van Oostenrijk","description":"","elements":[{"id":1,"x":-352,"y":-64,"type":"Room","name":"Tunnel-like hall","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":2,"x":-192,"y":-64,"type":"Room","name":"Lonelands","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":3,"type":"Connector","name":"","dockStart":1,"dockEnd":2,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":4,"x":-192,"y":-192,"type":"Room","name":"Trolls Clearing","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":5,"type":"Connector","name":"","dockStart":2,"dockEnd":4,"startDir":0,"endDir":10,"startY":0,"startX":0,"endY":-128,"endX":-224,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":6,"x":-192,"y":-320,"type":"Room","name":"Trolls Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":7,"type":"Connector","name":"","dockStart":4,"dockEnd":6,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":8,"x":-192,"y":-448,"type":"Room","name":"Trolls cave","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":9,"type":"Connector","name":"rock door","dockStart":6,"dockEnd":8,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":10,"type":"Connector","name":"","dockStart":2,"dockEnd":6,"startDir":2,"endDir":6,"startY":0,"startX":0,"endY":-256,"endX":-96,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":11,"x":32,"y":-64,"type":"Room","name":"Rivendell","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":12,"type":"Connector","name":"","dockStart":2,"dockEnd":4,"startDir":4,"endDir":5,"startY":0,"startX":0,"endY":-192,"endX":-96,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":13,"type":"Connector","name":"","dockStart":11,"dockEnd":4,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":-160,"endX":-96,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":14,"type":"Connector","name":"","dockStart":4,"dockEnd":11,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":-64,"endX":-32,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":15,"x":192,"y":-64,"type":"Room","name":"Misty Mountain","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":16,"type":"Connector","name":"","dockStart":11,"dockEnd":15,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":17,"x":192,"y":-192,"type":"Room","name":"Narrow Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":18,"type":"Connector","name":"","dockStart":15,"dockEnd":17,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":19,"x":352,"y":-320,"type":"Room","name":"Narrow Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":20,"type":"Connector","name":"","dockStart":17,"dockEnd":19,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":21,"x":192,"y":64,"type":"Room","name":"Narrow Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":22,"type":"Connector","name":"","dockStart":15,"dockEnd":21,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":23,"x":608,"y":64,"type":"Room","name":"Narrow Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":24,"type":"Connector","name":"","dockStart":21,"dockEnd":23,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":25,"x":608,"y":-192,"type":"Room","name":"Narrow Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":26,"type":"Connector","name":"","dockStart":23,"dockEnd":25,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":27,"type":"Connector","name":"","dockStart":17,"dockEnd":25,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":-160,"endX":320,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":28,"type":"Connector","name":"","dockStart":25,"dockEnd":19,"startDir":14,"endDir":6,"startY":0,"startX":0,"endY":-288,"endX":448,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":29,"x":352,"y":-448,"type":"Room","name":"Narrow Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":30,"type":"Connector","name":"","dockStart":19,"dockEnd":29,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":31,"x":512,"y":-320,"type":"Room","name":"Narrow Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":32,"type":"Connector","name":"","dockStart":29,"dockEnd":31,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":33,"type":"Connector","name":"","dockStart":31,"dockEnd":25,"startDir":10,"endDir":0,"startY":0,"startX":0,"endY":-224,"endX":512,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":34,"type":"Connector","name":"","dockStart":19,"dockEnd":15,"startDir":8,"endDir":2,"startY":0,"startX":0,"endY":-64,"endX":288,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":35,"x":928,"y":-64,"type":"Room","name":"Narrow place","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":36,"type":"Connector","name":"","dockStart":15,"dockEnd":35,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":37,"type":"Connector","name":"","dockStart":31,"dockEnd":38,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":160,"endX":384,"oneWay":true,"startType":4,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":38,"x":416,"y":-128,"type":"Room","name":"Steep Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":39,"x":416,"y":0,"type":"Room","name":"Steep Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":40,"type":"Connector","name":"","dockStart":38,"dockEnd":39,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":4,"endType":0,"startLabel":"","endLabel":""},{"id":41,"x":416,"y":128,"type":"Room","name":"Steep Path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":42,"type":"Connector","name":"","dockStart":39,"dockEnd":41,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":4,"endType":0,"startLabel":"","endLabel":""},{"id":43,"x":416,"y":256,"type":"Room","name":"Deep misty valley","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":44,"type":"Connector","name":"","dockStart":41,"dockEnd":43,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":45,"x":608,"y":256,"type":"Room","name":"Deep misty valley","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":46,"type":"Connector","name":"","dockStart":43,"dockEnd":45,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":47,"type":"Connector","name":"","dockStart":45,"dockEnd":23,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":128,"endX":640,"oneWay":true,"startType":3,"endType":0,"startLabel":"","endLabel":""},{"id":48,"x":1056,"y":-160,"type":"Room","name":"Large dry cave","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":49,"type":"Connector","name":"","dockStart":35,"dockEnd":48,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":50,"x":1088,"y":-64,"type":"Room","name":"Dangerous narrow path","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":51,"type":"Connector","name":"","dockStart":35,"dockEnd":50,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":52,"x":1344,"y":-160,"type":"Room","name":"Beorn\'s house","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":53,"type":"Connector","name":"","dockStart":50,"dockEnd":52,"startDir":4,"endDir":10,"startY":-32,"startX":1184,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":54,"x":768,"y":-320,"type":"Room","name":"Outside Goblins Gate","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":55,"type":"Connector","name":"","dockStart":52,"dockEnd":54,"startDir":14,"endDir":6,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":false},{"id":56,"x":928,"y":-320,"type":"Room","name":"Treeless opening","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":57,"type":"Connector","name":"","dockStart":54,"dockEnd":56,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":58,"type":"Connector","name":"","dockStart":56,"dockEnd":52,"startDir":4,"endDir":15,"startY":0,"startX":0,"endY":-224,"endX":1344,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":false},{"id":59,"x":768,"y":384,"type":"Room","name":"Inside Goblins Gate","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":60,"type":"Connector","name":"back door","dockStart":54,"dockEnd":59,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":61,"x":1024,"y":384,"type":"Room","name":"Big goblins cavern","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":62,"type":"Connector","name":"","dockStart":59,"dockEnd":61,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":63,"x":1024,"y":512,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":64,"type":"Connector","name":"","dockStart":61,"dockEnd":63,"startDir":9,"endDir":15,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":65,"x":864,"y":256,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":66,"type":"Connector","name":"","dockStart":65,"dockEnd":63,"startDir":6,"endDir":12,"startY":0,"startX":0,"endY":416,"endX":896,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":67,"type":"Connector","name":"","dockStart":59,"dockEnd":65,"startDir":3,"endDir":4,"startY":0,"startX":0,"endY":160,"endX":960,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":68,"x":1184,"y":256,"type":"Room","name":"Dark winding passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":69,"type":"Connector","name":"","dockStart":61,"dockEnd":68,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":70,"x":1376,"y":384,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":71,"type":"Connector","name":"","dockStart":68,"dockEnd":70,"startDir":6,"endDir":0,"startY":0,"startX":0,"endY":224,"endX":1344,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":72,"x":1376,"y":256,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":73,"type":"Connector","name":"","dockStart":70,"dockEnd":72,"startDir":1,"endDir":7,"startY":0,"startX":0,"endY":192,"endX":1376,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":74,"type":"Connector","name":"","dockStart":72,"dockEnd":70,"startDir":10,"endDir":14,"startY":0,"startX":0,"endY":224,"endX":1280,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":75,"type":"Connector","name":"","dockStart":72,"dockEnd":65,"startDir":14,"endDir":0,"startY":0,"startX":0,"endY":128,"endX":896,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":false},{"id":76,"x":1344,"y":128,"type":"Room","name":"Goblins dungeon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":77,"type":"Connector","name":"window","dockStart":68,"dockEnd":76,"startDir":0,"endDir":12,"startY":0,"startX":0,"endY":32,"endX":1312,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":78,"type":"Connector","name":"door","dockStart":76,"dockEnd":61,"startDir":0,"endDir":6,"startY":32,"startX":1312,"endY":320,"endX":1120,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":79,"x":1536,"y":384,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":80,"type":"Connector","name":"","dockStart":70,"dockEnd":79,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":81,"x":1696,"y":512,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":82,"type":"Connector","name":"","dockStart":79,"dockEnd":81,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":83,"x":1856,"y":512,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":84,"type":"Connector","name":"","dockStart":81,"dockEnd":83,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":85,"x":2016,"y":352,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":86,"type":"Connector","name":"","dockStart":83,"dockEnd":85,"startDir":0,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":87,"x":2016,"y":512,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":88,"type":"Connector","name":"","dockStart":87,"dockEnd":85,"startDir":2,"endDir":6,"startY":0,"startX":0,"endY":320,"endX":2080,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":89,"x":2016,"y":640,"type":"Room","name":"Deep dark lake","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":90,"type":"Connector","name":"","dockStart":87,"dockEnd":89,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":91,"type":"Connector","name":"","dockStart":85,"dockEnd":89,"startDir":10,"endDir":14,"startY":0,"startX":0,"endY":480,"endX":1952,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":92,"type":"Connector","name":"","dockStart":87,"dockEnd":83,"startDir":10,"endDir":6,"startY":0,"startX":0,"endY":448,"endX":1888,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":93,"x":1536,"y":512,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":94,"type":"Connector","name":"","dockStart":93,"dockEnd":79,"startDir":2,"endDir":4,"startY":0,"startX":0,"endY":288,"endX":1600,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":95,"type":"Connector","name":"","dockStart":63,"dockEnd":79,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":320,"endX":1536,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":false},{"id":96,"x":1696,"y":640,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":97,"type":"Connector","name":"","dockStart":93,"dockEnd":96,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":480,"endX":1696,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":98,"x":1696,"y":768,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":99,"type":"Connector","name":"","dockStart":96,"dockEnd":98,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":100,"type":"Connector","name":"","dockStart":85,"dockEnd":96,"startDir":7,"endDir":4,"startY":0,"startX":0,"endY":544,"endX":1760,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":101,"x":1696,"y":384,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":102,"type":"Connector","name":"","dockStart":83,"dockEnd":101,"startDir":14,"endDir":6,"startY":0,"startX":0,"endY":288,"endX":1760,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":103,"type":"Connector","name":"","dockStart":87,"dockEnd":101,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":256,"endX":1760,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":104,"x":1696,"y":256,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":105,"type":"Connector","name":"","dockStart":101,"dockEnd":104,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":106,"type":"Connector","name":"","dockStart":104,"dockEnd":79,"startDir":9,"endDir":1,"startY":0,"startX":0,"endY":224,"endX":1600,"oneWay":false,"startType":4,"endType":3,"startLabel":"","endLabel":""},{"id":107,"x":1696,"y":128,"type":"Room","name":"Dark stuffy passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":108,"type":"Connector","name":"","dockStart":101,"dockEnd":107,"startDir":14,"endDir":10,"startY":0,"startX":0,"endY":192,"endX":1504,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":109,"type":"Connector","name":"","dockStart":72,"dockEnd":85,"startDir":4,"endDir":8,"startY":128,"startX":1472,"endY":320,"endX":1984,"oneWay":false,"startType":0,"endType":0,"startLabel":"west","endLabel":"","_isCurve":false},{"id":110,"type":"Connector","name":"","dockStart":93,"dockEnd":48,"startDir":12,"endDir":6,"startY":352,"startX":1632,"endY":-128,"endX":1024,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":"","_isCurve":true},{"id":111,"x":1344,"y":-288,"type":"Room","name":"Great river","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":112,"type":"Connector","name":"","dockStart":52,"dockEnd":111,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":113,"x":1504,"y":-160,"type":"Room","name":"Forest gate","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":114,"type":"Connector","name":"","dockStart":52,"dockEnd":113,"startDir":2,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":115,"type":"Connector","name":"","dockStart":111,"dockEnd":113,"startDir":4,"endDir":14,"startY":0,"startX":0,"endY":-192,"endX":1504,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":116,"x":1504,"y":-32,"type":"Room","name":"Forest road","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":117,"type":"Connector","name":"","dockStart":113,"dockEnd":116,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":118,"type":"Connector","name":"","dockStart":52,"dockEnd":116,"startDir":8,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":1472,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":119,"x":1984,"y":-32,"type":"Room","name":"Forest road","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":120,"type":"Connector","name":"","dockStart":116,"dockEnd":119,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":121,"x":2784,"y":-32,"type":"Room","name":"Forest","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":122,"type":"Connector","name":"","dockStart":119,"dockEnd":121,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":123,"x":1504,"y":-416,"type":"Room","name":"Mountains","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":124,"type":"Connector","name":"","dockStart":111,"dockEnd":123,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":125,"x":1664,"y":-288,"type":"Room","name":"Forest river","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[],"_fillColor":"rgb(255, 255, 255)"},{"id":126,"type":"Connector","name":"","dockStart":123,"dockEnd":125,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":127,"x":1952,"y":-416,"type":"Room","name":"Empty place","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":128,"type":"Connector","name":"","dockStart":123,"dockEnd":127,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":129,"x":2752,"y":-992,"type":"Room","name":"Empty place","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":130,"type":"Connector","name":"","dockStart":129,"dockEnd":127,"startDir":0,"endDir":2,"startY":0,"startX":0,"endY":-576,"endX":1824,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":131,"x":1664,"y":-160,"type":"Room","name":"Bewitched gloomy place","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":132,"type":"Connector","name":"","dockStart":113,"dockEnd":131,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":133,"x":1824,"y":-160,"type":"Room","name":"West bank","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":134,"type":"Connector","name":"","dockStart":131,"dockEnd":133,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":135,"x":1984,"y":-160,"type":"Room","name":"East bank","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":136,"type":"Connector","name":"","dockStart":133,"dockEnd":135,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":137,"x":2144,"y":-160,"type":"Room","name":"Green forest","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":138,"type":"Connector","name":"","dockStart":135,"dockEnd":137,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":139,"x":2304,"y":-160,"type":"Room","name":"Smothering forest","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":140,"type":"Connector","name":"web","dockStart":139,"dockEnd":137,"startDir":12,"endDir":4,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":141,"x":2304,"y":-288,"type":"Room","name":"Spider threads place","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":142,"type":"Connector","name":"web","dockStart":139,"dockEnd":141,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":143,"type":"Connector","name":"web","dockStart":137,"dockEnd":141,"startDir":2,"endDir":12,"startY":0,"startX":0,"endY":-256,"endX":2272,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":144,"x":2464,"y":-288,"type":"Room","name":"Deep bog","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":145,"type":"Connector","name":"web","dockStart":141,"dockEnd":144,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":146,"x":2144,"y":-416,"type":"Room","name":"Levelled elvish clearing","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":147,"type":"Connector","name":"web","dockStart":141,"dockEnd":146,"startDir":0,"endDir":4,"startY":0,"startX":0,"endY":-416,"endX":2240,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":148,"type":"Connector","name":"","dockStart":146,"dockEnd":131,"startDir":12,"endDir":2,"startY":0,"startX":0,"endY":-192,"endX":1760,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":149,"x":2464,"y":-672,"type":"Room","name":"Elvenkings great halls","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":150,"type":"Connector","name":"magic door","dockStart":146,"dockEnd":149,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":151,"x":2464,"y":-544,"type":"Room","name":"Elvenkings cellar","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":152,"type":"Connector","name":"","dockStart":149,"dockEnd":151,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":153,"x":2464,"y":-416,"type":"Room","name":"Forest river","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":154,"type":"Connector","name":"trap door","dockStart":151,"dockEnd":153,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":4,"endType":0,"startLabel":"","endLabel":""},{"id":155,"x":2624,"y":-672,"type":"Room","name":"Dark dungeon","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":156,"type":"Connector","name":"door","dockStart":149,"dockEnd":155,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":157,"type":"Connector","name":"door","dockStart":151,"dockEnd":155,"startDir":2,"endDir":10,"startY":0,"startX":0,"endY":-608,"endX":2592,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":158,"x":2944,"y":-32,"type":"Room","name":"Waterfall","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":159,"type":"Connector","name":"","dockStart":121,"dockEnd":158,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":160,"x":2944,"y":96,"type":"Room","name":"Running river","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":161,"type":"Connector","name":"","dockStart":158,"dockEnd":160,"startDir":8,"endDir":0,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":162,"type":"Connector","name":"","dockStart":160,"dockEnd":121,"startDir":12,"endDir":8,"startY":0,"startX":0,"endY":32,"endX":1920,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":163,"x":2944,"y":-160,"type":"Room","name":"Long lake and Lake Town","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":164,"type":"Connector","name":"","dockStart":158,"dockEnd":163,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":165,"type":"Connector","name":"portcullis","dockStart":153,"dockEnd":163,"startDir":4,"endDir":14,"startY":0,"startX":0,"endY":-192,"endX":2784,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":166,"x":2944,"y":-288,"type":"Room","name":"Running river","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":167,"type":"Connector","name":"","dockStart":163,"dockEnd":166,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":168,"x":2944,"y":-416,"type":"Room","name":"Dragon\'s Desolation","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":169,"type":"Connector","name":"","dockStart":166,"dockEnd":168,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":170,"x":2944,"y":-544,"type":"Room","name":"Dale Valley","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":171,"type":"Connector","name":"","dockStart":168,"dockEnd":170,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":172,"x":2784,"y":-672,"type":"Room","name":"Ravenhill","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":173,"type":"Connector","name":"","dockStart":174,"dockEnd":172,"startDir":12,"endDir":4,"startY":-640,"startX":2912,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":174,"x":2944,"y":-672,"type":"Room","name":"Front gate","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":175,"type":"Connector","name":"","dockStart":170,"dockEnd":174,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":176,"type":"Connector","name":"","dockStart":170,"dockEnd":172,"startDir":14,"endDir":5,"startY":0,"startX":0,"endY":-640,"endX":2880,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":177,"type":"Connector","name":"","dockStart":172,"dockEnd":168,"startDir":6,"endDir":14,"startY":0,"startX":0,"endY":-448,"endX":2912,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":178,"x":2944,"y":-800,"type":"Room","name":"Lower Halls","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":179,"type":"Connector","name":"","dockStart":174,"dockEnd":178,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":180,"x":2944,"y":-928,"type":"Room","name":"Lonely Mountain","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":181,"type":"Connector","name":"","dockStart":178,"dockEnd":180,"startDir":1,"endDir":7,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":3,"endType":4,"startLabel":"","endLabel":""},{"id":182,"x":3072,"y":-864,"type":"Room","name":"Smooth straight passage","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":183,"type":"Connector","name":"","dockStart":182,"dockEnd":178,"startDir":4,"endDir":4,"startY":0,"startX":0,"endY":-768,"endX":3040,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true},{"id":184,"x":2752,"y":-864,"type":"Room","name":"Side door","subtitle":"","description":"","dark":false,"endroom":false,"width":96,"height":64,"objects":[]},{"id":185,"type":"Connector","name":"","dockStart":172,"dockEnd":184,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":0,"endX":0,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":186,"type":"Connector","name":"door","dockStart":184,"dockEnd":182,"startDir":4,"endDir":12,"startY":0,"startX":0,"endY":-864,"endX":3072,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":187,"type":"Connector","name":"","dockStart":180,"dockEnd":172,"startDir":10,"endDir":2,"startY":0,"startX":0,"endY":-704,"endX":2848,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":188,"type":"Connector","name":"","dockStart":184,"dockEnd":129,"startDir":0,"endDir":8,"startY":0,"startX":0,"endY":-928,"endX":2784,"oneWay":false,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":189,"type":"Connector","name":"","dockStart":180,"dockEnd":184,"startDir":12,"endDir":2,"startY":0,"startX":0,"endY":-896,"endX":2848,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":""},{"id":190,"type":"Connector","name":"","dockStart":180,"dockEnd":174,"startDir":8,"endDir":14,"startY":0,"startX":0,"endY":-704,"endX":2944,"oneWay":true,"startType":0,"endType":0,"startLabel":"","endLabel":"","_isCurve":true}],"startRoom":0}',t("HobbitMap",e)}}}),System.register("controls/control",["dispatcher","enums/enums"],function(t,e){"use strict";var r,i;e&&e.id;return{setters:[function(e){r=e},function(e){i=e}],execute:function(){function e(e,t){var n=this;if(this.show=function(){n.elem.style.display="block"},this.hide=function(){n.elem.style.display="none"},this.setVisible=function(e){e?n.show():n.hide()},e instanceof HTMLElement?this.elem=e:this.elem=t?t.querySelector(e):document.querySelector(e),!this.elem)throw"Failed to instantiate control: element or selector "+e+" not found in DOM."}e.prototype.addEventListener=function(e,t,n){void 0===n&&(n=!0);var o=n?function(e){t(e),r.Dispatcher.notify(i.AppEvent.Redraw,null)}:t;return this.elem.addEventListener(e,o),this},t("Control",e)}}}),System.register("controls/idInput/idInput",["controls/control","dispatcher","enums/enums"],function(t,e){"use strict";var n,i,a;e&&e.id;return{setters:[function(e){n=e},function(e){i=e},function(e){a=e}],execute:function(){function e(e,t){var n=r.call(this,e,t)||this,o=n.elem.dataset.label;return n.elem.innerHTML=Handlebars.templates.idInput({label:o}),n.input=n.elem.querySelector("input"),n}var r;r=n.Control,__extends(e,r),Object.defineProperty(e.prototype,"value",{get:function(){return this.input.value},set:function(e){this.input.value=e},enumerable:!0,configurable:!0}),e.prototype.focus=function(){return this.input.focus(),this},e.prototype.select=function(){return this.input.select(),this},e.prototype.addEventListener=function(e,t,n){void 0===n&&(n=!0);var o=n?function(e){t(e),i.Dispatcher.notify(a.AppEvent.Redraw,null)}:t;return this.input.addEventListener(e,o),this},t("IdInput",e)}}}),System.register("controls/idTextarea/idTextarea",["controls/control","dispatcher","enums/enums"],function(t,e){"use strict";var n,i,a;e&&e.id;return{setters:[function(e){n=e},function(e){i=e},function(e){a=e}],execute:function(){function e(e,t){var n=r.call(this,e,t)||this,o=n.elem.dataset.label;return n.elem.innerHTML=Handlebars.templates.idTextarea({label:o}),n.textarea=n.elem.querySelector("textarea"),n}var r;r=n.Control,__extends(e,r),Object.defineProperty(e.prototype,"value",{get:function(){return this.textarea.value},set:function(e){this.textarea.value=e},enumerable:!0,configurable:!0}),e.prototype.focus=function(){return this.textarea.focus(),this},e.prototype.select=function(){return this.textarea.select(),this},e.prototype.addEventListener=function(e,t,n){void 0===n&&(n=!1);var o=n?function(e){t(e),i.Dispatcher.notify(a.AppEvent.Redraw,null)}:t;return this.textarea.addEventListener(e,o),this},t("IdTextarea",e)}}}),System.register("controls/idCheck/idCheck",["controls/control","dispatcher","enums/enums"],function(t,e){"use strict";var n,i,a;e&&e.id;return{setters:[function(e){n=e},function(e){i=e},function(e){a=e}],execute:function(){function e(e,t){var n=r.call(this,e,t)||this,o=n.elem.dataset.label;return n.elem.innerHTML=Handlebars.templates.idCheck({label:o}),n.input=n.elem.querySelector("input"),n}var r;r=n.Control,__extends(e,r),Object.defineProperty(e.prototype,"checked",{get:function(){return this.input.checked},set:function(e){this.input.checked=e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t,n){void 0===n&&(n=!0);var o=n?function(e){t(e),i.Dispatcher.notify(a.AppEvent.Redraw,null)}:t;return this.input.addEventListener(e,o),this},t("IdCheck",e)}}}),System.register("controls/idRange/idRange",["controls/control","dispatcher","enums/enums"],function(t,e){"use strict";var n,r,i;e&&e.id;return{setters:[function(e){n=e},function(e){r=e},function(e){i=e}],execute:function(){function e(e,t){var n=a.call(this,e,t)||this,o=n.elem.dataset.min;o=o||"0";var r=n.elem.dataset.max;r=r||"100";var i=n.elem.dataset.label;return n.elem.innerHTML=Handlebars.templates.idRange({min:o,max:r,label:i}),n.input=n.elem.querySelector("input"),n.label=n.elem.querySelector(".range-label"),n.input.value=o,n.updateLabel(),n.input.addEventListener("input",function(){n.updateLabel()}),n}var a;a=n.Control,__extends(e,a),e.prototype.updateLabel=function(){this.label.innerHTML=this.input.value},Object.defineProperty(e.prototype,"value",{get:function(){return parseFloat(this.input.value)},set:function(e){this.input.value=e.toString(),this.updateLabel()},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t,n){void 0===n&&(n=!0);var o=n?function(e){t(e),r.Dispatcher.notify(i.AppEvent.Redraw,null)}:t;return this.input.addEventListener(e,o),this},t("IdRange",e)}}}),System.register("controls/idColorPicker/idColorPicker",["controls/controls","enums/enums","controls/control"],function(e,t){"use strict";var p,u,n;t&&t.id;return{setters:[function(e){p=e},function(e){u=e},function(e){n=e}],execute:function(){function d(e,t){var n=c.call(this,e,t)||this;n.currentHue=180,n.currentHSLX=150,n.currentHSLY=75,n.elem.innerHTML=Handlebars.templates.idColorPicker({recentcolors:d.recentColors,standardcolors:u.Values.COLORS_STANDARD});var o=n.elem.querySelectorAll("canvas");n.canvasHue=o[1],n.canvasHSL=o[0],n.ctxHue=n.canvasHue.getContext("2d"),n.ctxHSL=n.canvasHSL.getContext("2d"),n.currentColorElem=n.elem.querySelector(".current-color"),n.hoverColorElem=n.elem.querySelector(".hover-color");var r=n.elem.querySelectorAll(".recent id-popup");n.recentButtons=new Array;for(var i=function(e){var t=new p.IdPopup(r[e]);t.backgroundColor=d.recentColors[e],t.addEventListener("click",function(){n.pickColor(d.recentColors[e])}),a.recentButtons.push(t)},a=this,s=0;s<r.length;s++)i(s);r=n.elem.querySelectorAll(".standard id-popup");var l=function(e){var t=new p.IdPopup(r[e]);t.backgroundColor=u.Values.COLORS_STANDARD[e],t.addEventListener("click",function(){n.addToRecent(u.Values.COLORS_STANDARD[e]),n.pickColor(u.Values.COLORS_STANDARD[e])})};for(s=0;s<r.length;s++)l(s);return n.drawHue(),n.drawHSL(),n.canvasHue.addEventListener("click",function(e){n.currentHue=360-360*(e.clientY-n.findObjCoordinates(n.canvasHue).y)/n.canvasHue.clientHeight,n.currentHSLX=-100,n.currentHSLY=-100,n.drawHue(),n.drawHSL()}),n.canvasHSL.addEventListener("mousemove",function(e){n.hoverColorElem.style.backgroundColor=n.getColorAtMouse(e.clientX,e.clientY,!1)}),n.canvasHSL.addEventListener("click",function(e){var t=n.getColorAtMouse(e.clientX,e.clientY,!0);n.drawHSL(),n.addToRecent(t),n.pickColor(t)}),window.addEventListener("id-recent-colors-changed",function(){n.updateRecentColors()}),n}var c;c=n.Control,__extends(d,c),d.prototype.pickColor=function(e){this.color=e;var t=new CustomEvent("change");this.elem.dispatchEvent(t)},Object.defineProperty(d.prototype,"color",{get:function(){return this.currentColorElem.style.backgroundColor},set:function(e){this.currentColorElem.style.backgroundColor=e},enumerable:!0,configurable:!0}),d.prototype.addToRecent=function(e){d.recentColors.unshift(e),d.recentColors.pop();var t=new CustomEvent("id-recent-colors-changed");window.dispatchEvent(t)},d.prototype.updateRecentColors=function(){for(var e=0;e<this.recentButtons.length;e++)this.recentButtons[e].backgroundColor=d.recentColors[e]},d.prototype.getColorAtMouse=function(e,t,n){var o=this.findObjCoordinates(this.canvasHSL),r=o.x,i=o.y;r=Math.floor((e-r)*this.canvasHSL.width/this.canvasHSL.clientWidth),i=Math.floor((t-i)*this.canvasHSL.height/this.canvasHSL.clientHeight),n&&(this.currentHSLX=r,this.currentHSLY=i);var a=this.ctxHSL.getImageData(r,i,1,1);return"rgb("+a.data[0]+", "+a.data[1]+", "+a.data[2]+")"},d.prototype.findObjCoordinates=function(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);return{x:t,y:n}},d.prototype.drawHue=function(){this.ctxHue.save(),0<this.canvasHue.offsetWidth&&0<this.canvasHue.offsetHeight&&(this.canvasHue.width=this.canvasHue.offsetWidth,this.canvasHue.height=this.canvasHue.offsetHeight);for(var e=0;e<this.canvasHue.height;e++){var t=360-e/this.canvasHue.height*360;this.ctxHue.strokeStyle="hsl("+t+",100%,50%)",this.ctxHue.beginPath(),this.ctxHue.moveTo(0,e),this.ctxHue.lineTo(this.canvasHue.width,e),this.ctxHue.stroke()}if(0!=this.canvasHue.offsetWidth){this.ctxHue.strokeStyle="#000",this.ctxHue.lineWidth=1,this.ctxHue.beginPath();var n=this.canvasHue.width/2,o=(360-this.currentHue)/360*this.canvasHue.height;this.ctxHue.moveTo(5+n,o),this.ctxHue.arc(n,o,5,0,2*Math.PI,!1),this.ctxHue.stroke()}this.ctxHue.restore()},d.prototype.drawHSL=function(){this.ctxHSL.save(),0<this.canvasHSL.offsetWidth&&0<this.canvasHSL.offsetHeight&&(this.canvasHSL.width=this.canvasHSL.offsetWidth,this.canvasHSL.height=this.canvasHSL.offsetHeight);for(var e=0;e<this.canvasHSL.height;e++){var t=this.ctxHSL.createLinearGradient(0,0,this.canvasHSL.width,0),n=100*(this.canvasHSL.height-e)/this.canvasHSL.height;t.addColorStop(0,"hsl("+this.currentHue+", 100%, "+n+"%)"),t.addColorStop(1,"hsl("+this.currentHue+", 0%, "+n+"%)"),this.ctxHSL.fillStyle=t,this.ctxHSL.fillRect(0,e,this.canvasHSL.width,1)}if(0!=this.canvasHSL.offsetWidth){this.ctxHSL.strokeStyle="#000",this.ctxHSL.lineWidth=1,this.ctxHSL.beginPath();var o=this.currentHSLX,r=this.currentHSLY;this.ctxHSL.moveTo(o+5,r),this.ctxHSL.arc(o,r,5,0,2*Math.PI,!1),this.ctxHSL.stroke()}this.ctxHSL.restore()},d.recentColors=["#ffffff","#ffffff","#ffffff"],e("IdColorPicker",d)}}}),System.register("controls/idPopup/idPopup",["controls/control"],function(t,e){"use strict";var n;e&&e.id;return{setters:[function(e){n=e}],execute:function(){function e(e,t){for(var n=i.call(this,e,t)||this,o=new Array,r=0;r<n.elem.children.length;r++)o.push(n.elem.children[r]);return o.forEach(function(e){e.remove()}),n.elem.innerHTML=Handlebars.templates.idPopup({}),n.div=n.elem.querySelector("div"),n.dataType=n.elem.dataset.type,o.forEach(function(e){n.div.appendChild(e)}),n.setupOverlay(),n}var i;i=n.Control,__extends(e,i),e.prototype.findObjCoordinates=function(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);return{x:t,y:n}},e.prototype.setupOverlay=function(){var i=this,a=this.elem.querySelector(".popup-overlay");a&&(a.style.display="none",this.elem.addEventListener("click",function(e){if(window.getSelection().removeAllRanges(),"none"==a.style.display){for(var t=document.querySelectorAll(".popup-overlay"),n=0;n<t.length;n++)t[n].style.display="none";a.style.display="block";var o=i.findObjCoordinates(i.elem),r=o.x;o.y,r+a.offsetWidth>window.innerWidth&&(a.style.left=window.innerWidth-(r+a.offsetWidth)+"px")}else a.style.display="none"}),a.addEventListener("click",function(e){e.stopPropagation()}))},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this.div.style.backgroundColor},set:function(e){this.div.style.backgroundColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.elem.classList.contains("selected")},set:function(e){e?this.elem.classList.add("selected"):this.elem.classList.remove("selected")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.dataType},enumerable:!0,configurable:!0}),t("IdPopup",e)}}}),System.register("controls/idRadio/idRadio",["controls/control","dispatcher","enums/enums"],function(t,e){"use strict";var n,r,a;e&&e.id;return{setters:[function(e){n=e},function(e){r=e},function(e){a=e}],execute:function(){function e(e,t){var n=i.call(this,e,t)||this,o=n.elem.dataset.label,r=n.elem.dataset.name;return n.elem.innerHTML=Handlebars.templates.idRadio({label:o,name:r}),n.input=n.elem.querySelector("input"),n}var i;i=n.Control,__extends(e,i),Object.defineProperty(e.prototype,"checked",{get:function(){return this.input.checked},set:function(e){this.input.checked=e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t,n){void 0===n&&(n=!0);var o=n?function(e){t(e),r.Dispatcher.notify(a.AppEvent.Redraw,null)}:t;return this.input.addEventListener(e,o),this},t("IdRadio",e)}}}),System.register("controls/idConnectorType/idConnectorType",["controls/idRadio/idRadio","enums/connectorType","controls/control","dispatcher","enums/enums"],function(e,t){"use strict";var i,n,a,s,l;t&&t.id;return{setters:[function(e){i=e},function(e){n=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){function o(e,t){var n=r.call(this,e,t)||this;return n.elem.innerHTML=Handlebars.templates.idConnectorType({name:"connector"+o.id}),o.id++,n.radioDefault=new i.IdRadio(".js-default",n.elem),n.radioIn=new i.IdRadio(".js-in",n.elem),n.radioOut=new i.IdRadio(".js-out",n.elem),n.radioUp=new i.IdRadio(".js-up",n.elem),n.radioDown=new i.IdRadio(".js-down",n.elem),n}var r;r=a.Control,__extends(o,r),Object.defineProperty(o.prototype,"value",{get:function(){return this.radioIn.checked?n.ConnectorType.In:this.radioOut.checked?n.ConnectorType.Out:this.radioUp.checked?n.ConnectorType.Up:this.radioDown.checked?n.ConnectorType.Down:n.ConnectorType.Default},set:function(e){switch(e){case n.ConnectorType.Default:this.radioDefault.checked=!0;break;case n.ConnectorType.In:this.radioIn.checked=!0;break;case n.ConnectorType.Out:this.radioOut.checked=!0;break;case n.ConnectorType.Up:this.radioUp.checked=!0;break;case n.ConnectorType.Down:this.radioDown.checked=!0}},enumerable:!0,configurable:!0}),o.prototype.addEventListener=function(e,t,n){void 0===n&&(n=!0);var o=n?function(e){t(e),s.Dispatcher.notify(l.AppEvent.Redraw,null)}:t;return this.radioDefault.addEventListener(e,o),this.radioIn.addEventListener(e,o),this.radioOut.addEventListener(e,o),this.radioUp.addEventListener(e,o),this.radioDown.addEventListener(e,o),this},o.id=0,e("IdConnectorType",o)}}}),System.register("controls/optionsGroup",["controls/control","controls/controls"],function(t,e){"use strict";var n,i;e&&e.id;return{setters:[function(e){n=e},function(e){i=e}],execute:function(){function e(e,t,n){var o=r.call(this,e,n)||this;return o._values={},o.elem.innerHTML=o.template,t.forEach(function(e){o._values[e.value]=new i.IdPopup(e.htmlEl,o.elem).addEventListener("click",function(){o.value=e.value})}),o}var r;r=n.Control,__extends(e,r),Object.defineProperty(e.prototype,"dataset",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return""},enumerable:!0,configurable:!0}),e.prototype.selectValue=function(e){for(var t in this._values)this._values.hasOwnProperty(t)&&(this._values[t].selected=!1);this._values[e].selected=!0},e.prototype.setValue=function(e){this._value=e,this.selectValue(this._value);var t=new CustomEvent("change");this.elem.dispatchEvent(t)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this.setValue(e)},enumerable:!0,configurable:!0}),t("OptionsGroup",e)}}}),System.register("controls/idLineStyle/idLineStyle",["enums/enums","controls/optionsGroup"],function(t,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e,t){return n.call(this,e,[{value:o.LineStyle.Solid,htmlEl:".js-linestyle-solid"},{value:o.LineStyle.Dash,htmlEl:".js-linestyle-dash"},{value:o.LineStyle.DashDot,htmlEl:".js-linestyle-dashdot"},{value:o.LineStyle.DashDotDot,htmlEl:".js-linestyle-dashdotdot"},{value:o.LineStyle.Dot,htmlEl:".js-linestyle-dot"},{value:o.LineStyle.None,htmlEl:".js-linestyle-none"}],t)||this}var n;n=r.OptionsGroup,__extends(e,n),Object.defineProperty(e.prototype,"template",{get:function(){return Handlebars.templates.idLineStyle({noneDisplay:this.dataset.hasNone?"block":"none",label:this.dataset.label})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataset",{get:function(){return{label:this.elem.dataset.label,hasNone:this.elem.dataset.none||!1}},enumerable:!0,configurable:!0}),t("IdLineStyle",e)}}}),System.register("controls/idQuickColor/idQuickColor",["controls/control","controls/controls","enums/enums"],function(t,e){"use strict";var n,s,l;e&&e.id;return{setters:[function(e){n=e},function(e){s=e},function(e){l=e}],execute:function(){function e(e,t){var n=a.call(this,e,t)||this;n.elem.innerHTML=Handlebars.templates.idQuickColor({colors:l.Values.COLORS_STANDARD});for(var o=n.elem.querySelectorAll("id-popup"),r=function(){var e=new s.IdPopup(o[i]),t=l.Values.COLORS_STANDARD[i];e.backgroundColor=t,e.addEventListener("click",function(){n.value=t})},i=0;i<o.length;i++)r();return n}var a;a=n.Control,__extends(e,a),Object.defineProperty(e.prototype,"value",{get:function(){return this.color},set:function(e){this.color=e;var t=new CustomEvent("change");this.elem.dispatchEvent(t)},enumerable:!0,configurable:!0}),t("IdQuickColor",e)}}}),System.register("controls/idShape/idShape",["enums/enums","controls/optionsGroup"],function(t,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e,t){return n.call(this,e,[{value:o.RoomShape.Rectangle,htmlEl:".js-rectangle"},{value:o.RoomShape.Ellipse,htmlEl:".js-ellipse"},{value:o.RoomShape.Octagon,htmlEl:".js-octagon"}],t)||this}var n;n=r.OptionsGroup,__extends(e,n),Object.defineProperty(e.prototype,"dataset",{get:function(){return{label:this.elem.dataset.label}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return Handlebars.templates.idShape({label:this.dataset.label})},enumerable:!0,configurable:!0}),t("IdShape",e)}}}),System.register("controls/idToast/idToast",["controls/control"],function(e,t){"use strict";var n,i;t&&t.id;return{setters:[function(e){n=e}],execute:function(){function o(e,t){var n=r.call(this,e,t)||this;return n.handleClose=function(){n.elem.style.display="none"},n.elem.innerHTML=Handlebars.templates.idToast({}),n.title=n.elem.querySelector("h3"),n.text=n.elem.querySelector("p"),n.elem.querySelector("span").addEventListener("click",n.handleClose),n}var r;i=null,r=n.Control,__extends(o,r),o.prototype.setText=function(e,t,n){this.elem.style.display="block",this.title.innerHTML=e,this.text.innerHTML=t,this.elem.style.width=n?"auto":"250px"},o.toast=function(e,t,n){null==i&&(i=new o("#toast")),i.setText(e,t,!!n)},e("IdToast",o)}}}),System.register("controls/tabs",[],function(t,e){"use strict";var o;e&&e.id;return{setters:[],execute:function(){function n(e){this.elem=e,this.tabs=new Array;for(var t=this.elem.querySelectorAll(".tab"),n=0;n<t.length;n++)this.tabs.push(new o(this,t[n]))}function e(e,t){var n=this;this.tabs=e,this.elem=t;var o=this.elem.dataset.body;this.body=document.getElementById(o),this.body?(this.elem.classList.contains("selected")&&this.select(),this.elem.addEventListener("click",function(){n.tabs.select(n)})):console.log("Tabs error: body not found.")}n.initialize=function(){for(var e=document.querySelectorAll(".tabs"),t=0;t<e.length;t++)new n(e[t])},n.prototype.select=function(e){for(var t=0;t<this.tabs.length;t++)this.tabs[t]==e?this.tabs[t].select():this.tabs[t].unselect()},t("Tabs",n),e.prototype.select=function(){this.elem.classList.add("selected"),this.body.classList.add("selected")},e.prototype.unselect=function(){this.elem.classList.remove("selected"),this.body.classList.remove("selected")},o=e}}}),System.register("controls/window",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(e,t,n,o){var r=this;this.handleOK=function(){r.close(),r.onOK instanceof Function&&r.onOK()},this.handleCancel=function(){r.close(),r.onCancel instanceof Function&&r.onCancel()},this.elem=document.getElementById("window"),this.elem.querySelector(".title").innerHTML=e,this.elem.querySelector(".content").innerHTML=t,this.onOK=n,this.onCancel=o,this.open()}e.prototype.open=function(){this.elem.querySelector(".ok").style.display=this.onOK?"block":"none",this.elem.querySelector(".ok").addEventListener("click",this.handleOK),this.elem.querySelector(".cancel").style.display=this.onCancel?"block":"none",this.elem.querySelector(".cancel").addEventListener("click",this.handleCancel),this.elem.style.display="flex"},e.prototype.close=function(){this.elem.querySelector(".ok").removeEventListener("click",this.handleOK),this.elem.querySelector(".cancel").removeEventListener("click",this.handleCancel),this.elem.style.display="none"},t("Window",e)}}}),System.register("controls/controls",["controls/idInput/idInput","controls/idTextarea/idTextarea","controls/idCheck/idCheck","controls/idRange/idRange","controls/idColorPicker/idColorPicker","controls/idPopup/idPopup","controls/idConnectorType/idConnectorType","controls/idLineStyle/idLineStyle","controls/idQuickColor/idQuickColor","controls/idShape/idShape","controls/idToast/idToast","controls/tabs","controls/window"],function(o,e){"use strict";e&&e.id;function t(e){var t={};for(var n in e)"default"!==n&&(t[n]=e[n]);o(t)}return{setters:[function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)}],execute:function(){}}}),System.register("panels/panel",["app"],function(t,e){"use strict";var i;e&&e.id;return{setters:[function(e){i=e}],execute:function(){function e(e,t,n){var o=this;this.id=e,this.elem=document.getElementById(e),Handlebars.registerPartial("closePanel",Handlebars.templates.closePanel),this.elem.innerHTML=t(n);var r=document.querySelector("#"+e+" .panel-close");r&&r.addEventListener("click",function(){o.close()}),i.App.mainHTMLCanvas.addEventListener("mousedown",function(){o.close()})}e.prototype.open=function(){this.elem.classList.add("show")},e.prototype.close=function(){this.elem.classList.remove("show")},e.prototype.toggle=function(){this.elem.classList.contains("show")?this.close():this.open()},t("Panel",e)}}}),System.register("panels/blockPanel/blockPanel",["dispatcher","enums/appEvent","models/block","panels/panels","controls/controls"],function(t,e){"use strict";var a,o,r,n,s;e&&e.id;return{setters:[function(e){a=e},function(e){o=e},function(e){r=e},function(e){n=e},function(e){s=e}],execute:function(){function e(){var n=i.call(this,"blockpanel",Handlebars.templates.blockPanel,{})||this;a.Dispatcher.subscribe(n),n.colorPicker=new s.IdColorPicker(".js-color",n.elem).addEventListener("change",function(){n.setNoteColor(n.colorPicker.color)}),n.ctrlShape=new s.IdShape(".js-shape",n.elem).addEventListener("change",function(){n.block.shape=n.ctrlShape.value}),n.ctrlRounding=new s.IdRange(".js-rounding",n.elem).addEventListener("input",function(){n.block.rounding=n.ctrlRounding.value}),n.ctrlLineStyle=new s.IdLineStyle(".js-linestyle",n.elem).addEventListener("change",function(){n.block.lineStyle=n.ctrlLineStyle.value}),n.ctrlLineWidth=new s.IdRange(".js-linewidth",n.elem).addEventListener("input",function(){n.block.lineWidth=n.ctrlLineWidth.value});var o=n.elem.querySelectorAll(".colortype");n.colorButtons=new Array;for(var e=function(e){var t=new s.IdPopup(o[e]);t.selected&&(r.colorType=t.type),r.colorButtons.push(t),o[e].addEventListener("click",function(){n.onColorButton(t)})},r=this,t=0;t<o.length;t++)e(t);return n}var i;i=n.Panel,__extends(e,i),e.prototype.notify=function(e,t){if(e==o.AppEvent.More)if(t instanceof r.Block){var n=t;this.block=n,this.open(),this.ctrlRounding.value=this.block.rounding,this.ctrlShape.value=this.block.shape,this.ctrlLineStyle.value=this.block.lineStyle,this.ctrlLineWidth.value=this.block.lineWidth,this.setColor()}else this.close()},e.prototype.onColorButton=function(e){this.colorButtons.forEach(function(e){e.selected=!1}),e.selected=!0,this.colorType=e.type,this.setColor()},e.prototype.setColor=function(){"fill"==this.colorType&&(this.colorPicker.color=this.block.fillColor),"border"==this.colorType&&(this.colorPicker.color=this.block.borderColor),a.Dispatcher.notify(o.AppEvent.Refresh,null)},e.prototype.setNoteColor=function(e){"fill"==this.colorType&&(this.block.fillColor=e),"border"==this.colorType&&(this.block.borderColor=e),a.Dispatcher.notify(o.AppEvent.Refresh,null)},t("BlockPanel",e)}}}),System.register("panels/connectorPanel/connectorPanel",["dispatcher","enums/appEvent","models/connector","app","panels/panels","controls/controls","controls/idConnectorType/idConnectorType"],function(n,e){"use strict";var o,r,i,a,s,l,d;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){d=e}],execute:function(){function e(){var e=t.call(this,"connectorpanel",Handlebars.templates.connectorPanel,{})||this;return o.Dispatcher.subscribe(e),e.ctrlName=new l.IdInput(".js-name",e.elem).addEventListener("input",function(){e.connector.name=e.ctrlName.value}),e.ctrlCurve=new l.IdCheck(".js-curve",e.elem).addEventListener("input",function(){e.connector.isCurve=e.ctrlCurve.checked}),e.ctrlOneWay=new l.IdCheck(".js-oneway",e.elem).addEventListener("input",function(){e.connector.oneWay=e.ctrlOneWay.checked}),e.ctrlLineStyle=new l.IdLineStyle(".js-linestyle",e.elem).addEventListener("change",function(){e.connector.lineStyle=e.ctrlLineStyle.value}),e.ctrlLineWidth=new l.IdRange(".js-linewidth",e.elem).addEventListener("input",function(){e.connector.lineWidth=e.ctrlLineWidth.value}),e.ctrlColor=new l.IdColorPicker(".js-color",e.elem).addEventListener("change",function(){e.connector.color=e.ctrlColor.color}),e.btnReverse=e.elem.querySelector(".js-reverse"),e.btnReverse.addEventListener("click",function(){a.App.pushUndo(),e.connector.reverse(),o.Dispatcher.notify(r.AppEvent.Refresh,null)}),e.ctrlStartType=new d.IdConnectorType(".js-starttype",e.elem).addEventListener("input",function(){e.connector.startType=e.ctrlStartType.value}),e.ctrlEndType=new d.IdConnectorType(".js-endtype",e.elem).addEventListener("input",function(){e.connector.endType=e.ctrlEndType.value}),e.ctrlStartLabel=new l.IdInput(".js-startlabel",e.elem).addEventListener("input",function(){e.connector.startLabel=e.ctrlStartLabel.value}),e.ctrlEndLabel=new l.IdInput(".js-endlabel",e.elem).addEventListener("input",function(){e.connector.endLabel=e.ctrlEndLabel.value}),e}var t;t=s.Panel,__extends(e,t),e.prototype.notify=function(e,t){var n=this;if(e==r.AppEvent.Select&&this.close(),e==r.AppEvent.More)if(t instanceof i.Connector){var o=t;this.connector=o,this.open(),this.ctrlName.value=o.name,this.ctrlCurve.checked=o.isCurve,this.ctrlOneWay.checked=o.oneWay,this.ctrlLineStyle.value=o.lineStyle,this.ctrlLineWidth.value=o.lineWidth,this.ctrlColor.color=o.color,this.btnReverse.style.display=o.isDoubleDocked()?"block":"none",this.ctrlStartType.value=o.startType,this.ctrlEndType.value=o.endType,this.ctrlStartLabel.value=o.startLabel,this.ctrlEndLabel.value=o.endLabel,setTimeout(function(){n.ctrlName.focus().select()},100)}else this.close()},n("ConnectorPanel",e)}}}),System.register("panels/mapPanel/mapPanel",["dispatcher","enums/appEvent","app","panels/panels","controls/controls","models/map"],function(n,e){"use strict";var o,r,i,a,s,l;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){function e(){var e=t.call(this,"mappanel",Handlebars.templates.mapPanel,{})||this;return o.Dispatcher.subscribe(e),e.ctrlTitle=new s.IdInput(".js-title",e.elem).addEventListener("input",function(){i.App.map.title=e.ctrlTitle.value,i.App.header.title=e.ctrlTitle.value}),e.ctrlAuthor=new s.IdInput(".js-author",e.elem).addEventListener("input",function(){i.App.map.author=e.ctrlAuthor.value,i.App.header.content=i.App.author(e.ctrlAuthor.value)}),e.ctrlDescription=new s.IdTextarea(".js-description",e.elem).addEventListener("input",function(){i.App.map.description=e.ctrlDescription.value}),e}var t;t=a.Panel,__extends(e,t),e.prototype.notify=function(e,t){e==r.AppEvent.More&&(t instanceof l.Map?(this.open(),this.ctrlTitle.value=i.App.map.title,this.ctrlAuthor.value=i.App.map.author,this.ctrlDescription.value=i.App.map.description):this.close())},n("MapPanel",e)}}}),System.register("io/mapXML",["models/map","models/room","models/connector","enums/enums"],function(t,e){"use strict";var l,c,p,u;e&&e.id;return{setters:[function(e){l=e},function(e){c=e},function(e){p=e},function(e){u=e}],execute:function(){function e(){}e.getAttr=function(e,t,n,o){var r=e.getAttribute(t);return r?(o&&(r=o(r)),r):n},e.getContent=function(e,t,n,o){var r=e.querySelector(t);if(!r)return n;var i=r.textContent;return o&&(i=o(i)),i},e.loadRoom=function(e,t){var n=new c.Room(e.settings);e.add(n),n.id=this.getAttr(t,"id",0,parseInt),n.x=this.getAttr(t,"x",0,parseFloat),n.y=this.getAttr(t,"y",0,parseFloat),n.name=this.getAttr(t,"name",""),n.subtitle=this.getAttr(t,"subtitle",""),n.description=this.getAttr(t,"description",""),n.width=this.getAttr(t,"w",e.settings.room.width,parseFloat),n.height=this.getAttr(t,"h",e.settings.room.height,parseFloat),n.lineStyle=this.getAttr(t,"borderstyle",e.settings.room.lineStyle,function(e){return u.LineStyle.fromString(e)}),n.dark=this.getAttr(t,"isDark",!1,function(e){return"yes"==e}),n.endroom=this.getAttr(t,"isEndRoom",!1,function(e){return"yes"==e}),n.fillColor=this.getAttr(t,"roomFill",e.settings.room.fillColor),n.borderColor=this.getAttr(t,"roomBorder",e.settings.room.borderColor),n.nameColor=this.getAttr(t,"roomLargeText",e.settings.room.nameColor),n.subtitleColor=this.getAttr(t,"roomSubtitleColor",e.settings.room.subtitleColor),n.rounding=this.getAttr(t,"cornerTopLeft",e.settings.room.rounding,parseInt),"yes"==t.getAttribute("ellipse")&&(n.shape=u.RoomShape.Ellipse),"yes"==t.getAttribute("octagonal")&&(n.shape=u.RoomShape.Octagon)},e.loadConnector=function(e,t){var n=new p.Connector(e.settings);e.add(n),n.id=this.getAttr(t,"id",0,parseInt),n.name=this.getAttr(t,"name",""),n.lineStyle=this.getAttr(t,"style",e.settings.connector.lineStyle,function(e){return"dashed"==e?u.LineStyle.Dash:u.LineStyle.Solid}),t.querySelectorAll("dock");for(var o=!1,r=0;r<t.children.length;r++){var i=t.children[r];if("dock"==i.nodeName){var a=e.findById(parseInt(i.getAttribute("id")),c.Room),s=u.Direction.fromString(i.getAttribute("port"));o?(n.dockEnd=a,n.endDir=s):(n.dockStart=a,n.startDir=s,o=!0)}else if("point"==i.nodeName){var l=parseFloat(i.getAttribute("x")),d=parseFloat(i.getAttribute("y"));o?(n.endX=l,n.endY=d):(n.startX=l,n.startY=d,o=!0)}}},e.load=function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=new l.Map,o=t.querySelector("map"),r=t.querySelector("trizbort");n.title=this.getContent(r,"info title",""),n.author=this.getContent(r,"info author",""),n.description=this.getContent(r,"info description",""),n.settings.grid.visible=this.getContent(r,"settings grid visible",n.settings.grid.visible,function(e){return"yes"==e}),n.settings.grid.origin=this.getContent(r,"settings grid showOrigin",n.settings.grid.origin,function(e){return"yes"==e}),n.settings.grid.snap=this.getContent(r,"settings grid snapTo",n.settings.grid.snap,function(e){return"yes"==e}),n.settings.grid.size=this.getContent(r,"settings grid size",n.settings.grid.size,parseInt),n.settings.room.borderColor=this.getContent(r,"settings colors border",n.settings.room.borderColor),n.settings.room.subtitleColor=this.getContent(r,"settings colors subTitle",n.settings.room.subtitleColor),n.settings.room.startRoomColor=this.getContent(r,"settings colors startRoom",n.settings.room.startRoomColor),n.settings.room.endRoomColor=this.getContent(r,"settings colors endRoom",n.settings.room.endRoomColor),n.settings.room.shape=this.getContent(r,"settings rooms defaultRoomShape",n.settings.room.shape,function(e){var t=parseInt(e);return 0<t&&t--,t}),n.settings.connector.color=this.getContent(r,"settings colors line",n.settings.connector.color),n.settings.connector.lineWidth=this.getContent(r,"settings lines width",n.settings.connector.lineWidth,parseInt),n.settings.connector.stalk=this.getContent(r,"settings rooms connectionStalkLength",n.settings.connector.stalk,parseInt);for(var i=o.querySelectorAll("room"),a=0;a<i.length;a++)this.loadRoom(n,i[a]);var s=o.querySelectorAll("line");for(a=0;a<s.length;a++)this.loadConnector(n,s[a]);return n},t("MapXMLLoader",e)}}}),System.register("exporter",["drawing/canvas","views/viewFactory","views/blockView","views/connectorView","views/roomView","views/noteView","views/boxView"],function(t,e){"use strict";var n,d,o,r,i,a,c;e&&e.id;return{setters:[function(e){n=e},function(e){d=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){c=e}],execute:function(){function e(e){this.map=e,this.canvasElem=document.getElementById("export"),this.ctx=this.canvasElem.getContext("2d"),this.canvas=new n.Canvas(this.ctx),this.left=0,this.top=0,this.width=100,this.height=100}e.prototype.render=function(e){var t=this;this.canvasElem.width=this.width,this.canvasElem.height=this.height,this.canvas.save(),e?this.canvas.fillStyle(this.map.settings.grid.background).fillRect(0,0,this.width,this.height):this.canvas.clearRect(0,0,this.width,this.height),this.canvas.translate(this.left,this.top),this.views.forEach(function(e){e instanceof o.BlockView&&e.draw(t.canvas,!1)}),this.views.forEach(function(e){e instanceof r.ConnectorView&&e.draw(t.canvas,!1)}),this.views.forEach(function(e){(e instanceof i.RoomView||e instanceof a.NoteView)&&e.draw(t.canvas,!1)}),this.canvas.restore()},e.prototype.hasPixelsTop=function(){for(var e=this.ctx.getImageData(0,0,this.width,1),t=0;t<this.width;t++)if(0<e.data[4*t+3])return!0;return!1},e.prototype.hasPixelsBottom=function(){for(var e=this.ctx.getImageData(0,this.height-1,this.width,1),t=0;t<this.width;t++)if(0<e.data[4*t+3])return!0;return!1},e.prototype.hasPixelsLeft=function(){for(var e=this.ctx.getImageData(0,0,1,this.height),t=0;t<this.height;t++)if(0<e.data[4*t+3])return!0;return!1},e.prototype.hasPixelsRight=function(){for(var e=this.ctx.getImageData(this.width-1,0,1,this.height),t=0;t<this.height;t++)if(0<e.data[4*t+3])return!0;return!1},e.prototype.export=function(){var t=this;if(this.views=[],this.map.elements.forEach(function(e){t.views.push(d.ViewFactory.create(e))}),0<this.views.length){var n=99999,o=99999,r=-99999,i=-99999;this.views.forEach(function(e){if(e instanceof c.BoxView){var t=e.getModel();t.x<n&&(n=t.x),t.y<o&&(o=t.y),t.x+t.width>r&&(r=t.x+t.width),t.y+t.height>i&&(i=t.y+t.height)}}),this.left=-n,this.top=-o,this.width=Math.abs(r-n),this.height=Math.abs(i-o)}do{this.render(!1);var e=this.hasPixelsTop(),a=this.hasPixelsBottom(),s=this.hasPixelsRight(),l=this.hasPixelsLeft();e&&(this.top+=50,this.height+=50),a&&(this.height+=50),l&&(this.left+=50,this.width+=50),s&&(this.width+=50)}while(e||a||s||l);this.render(!0),this.downloadAsBlob()},e.prototype.downloadAsBlob=function(){var t=this;this.toBlob(function(e){t.downloadAsBlobCallback(e)},"image/png",1)},e.prototype.downloadAsBlobCallback=function(e){var t=this.map.title;if(t=t||"untitled",navigator.msSaveBlob)navigator.msSaveBlob(e,t+".png");else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=t+".png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},e.prototype.toBlob=function(r,i,a){if(this.canvasElem.toBlob)return this.canvasElem.toBlob(r,i,a);var s=this.canvasElem;setTimeout(function(){for(var e=atob(s.toDataURL(i,a).split(",")[1]),t=e.length,n=new Uint8Array(t),o=0;o<t;o++)n[o]=e.charCodeAt(o);r(new Blob([n],{type:i||"image/png"}))})},t("Exporter",e)}}}),System.register("codegen/CodeGenerator",["enums/enums"],function(t,e){"use strict";var n;e&&e.id;return{setters:[function(e){n=e}],execute:function(){function e(e){this.map=e}e.prototype.generate=function(){return""},e.prototype.removeAccents=function(e){return"string"!=typeof e?e:e.split("").map(function(e,t){var n="".indexOf(e);return-1!==n?"AAAAAAAaaaaaaaBOOOOOOOOoooooooEEEEEeeeeeeCCccDIIIIiiiiUUUUuuuuNNnnSSssYyyZZZzzz"[n]:e}).join("")},e.prototype.removeSpecialChars=function(e){return"string"!=typeof e?e:e.replace(/[^\w\s]/gi,"")},e.prototype.camelCase=function(e){return"string"!=typeof e?e:e.replace(/^([A-Z])|[\s-_](\w)/g,function(e,t,n){return void 0!==n&&n?n.toUpperCase():t.toLowerCase()})},e.prototype.capitalize=function(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)},e.prototype.className=function(e){return new Handlebars.SafeString(this.capitalize(this.camelCase(this.removeSpecialChars(this.removeAccents(e)))))},e.prototype.dirToStr=function(e,t){switch(t){case n.ConnectorType.Down:return"down";case n.ConnectorType.Up:return"up";case n.ConnectorType.In:return"in";case n.ConnectorType.Out:return"out"}switch(e){case n.Direction.N:return"north";case n.Direction.NNE:return"northnortheast";case n.Direction.NE:return"northeast";case n.Direction.ENE:return"eastnortheast";case n.Direction.E:return"east";case n.Direction.ESE:return"eastsoutheast";case n.Direction.SE:return"southeast";case n.Direction.SSE:return"southsoutheast";case n.Direction.S:return"south";case n.Direction.SSW:return"southsouthwest";case n.Direction.SW:return"southwest";case n.Direction.WSW:return"westsouthwest";case n.Direction.W:return"west";case n.Direction.WNW:return"westnorthwest";case n.Direction.NW:return"northwest";case n.Direction.NNW:return"northnorthwest";default:return""}},t("CodeGenerator",e)}}}),System.register("codegen/alan2/alan2Generator",["codegen/CodeGenerator"],function(n,e){"use strict";var o;e&&e.id;return{setters:[function(e){o=e}],execute:function(){function e(e){var n=t.call(this,e)||this;return Handlebars.registerHelper("className",function(e){return n.className(e)}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerHelper("objName",function(e){return n.objName(e)}),n}var t;t=o.CodeGenerator,__extends(e,t),e.prototype.objName=function(e){var t="";return e.split(" ").forEach(function(e){t=t+"'"+e.trim().replace("'","''")+"' "}),t},e.prototype.generate=function(){return Handlebars.templates.alan2({map:this.map})},n("Alan2Generator",e)}}}),System.register("codegen/alan3/alan3Generator",["codegen/CodeGenerator"],function(n,e){"use strict";var o;e&&e.id;return{setters:[function(e){o=e}],execute:function(){function e(e){var n=t.call(this,e)||this;return Handlebars.registerHelper("className",function(e){return n.className(e)}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerHelper("objName",function(e){return n.objName(e)}),Handlebars.registerPartial("alan3Object",Handlebars.templates.alan3Object),n}var t;t=o.CodeGenerator,__extends(e,t),e.prototype.objName=function(e){var t="";return e.split(" ").forEach(function(e){t=t+"'"+e.trim().replace("'","''")+"' "}),t},e.prototype.generate=function(){return Handlebars.templates.alan3({map:this.map})},n("Alan3Generator",e)}}}),System.register("codegen/inform7/Inform7Generator",["codegen/CodeGenerator"],function(n,e){"use strict";var o;e&&e.id;return{setters:[function(e){o=e}],execute:function(){function e(e){var n=t.call(this,e)||this;return Handlebars.registerHelper("validName",function(e){return new Handlebars.SafeString(n.removeSpecialChars(e))}),Handlebars.registerHelper("capitalize",function(e){return new Handlebars.SafeString(n.capitalize(e))}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerHelper("isStartRoom",function(e){return e.isStartRoom()}),Handlebars.registerPartial("inform7Object",Handlebars.templates.inform7Object),n}var t;t=o.CodeGenerator,__extends(e,t),e.prototype.generate=function(){return Handlebars.templates.inform7({map:this.map})},n("Inform7Generator",e)}}}),System.register("codegen/quest/questGenerator",["codegen/CodeGenerator"],function(t,e){"use strict";var n;e&&e.id;return{setters:[function(e){n=e}],execute:function(){function e(t){var n=o.call(this,t)||this;return Handlebars.registerHelper("isStartRoom",function(e){return e.isStartRoom()}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerPartial("questObject",Handlebars.templates.questObject),Handlebars.registerHelper("gridWidth",function(e){return Math.max(1,Math.floor(e/t.settings.room.width))}),Handlebars.registerHelper("gridLength",function(e){return Math.max(1,Math.floor(e/t.settings.room.height))}),n}var o;o=n.CodeGenerator,__extends(e,o),e.prototype.generate=function(){return Handlebars.templates.quest({map:this.map})},t("QuestGenerator",e)}}}),System.register("codegen/tads/TadsGenerator",["enums/enums","codegen/CodeGenerator"],function(n,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e){var n=t.call(this,e)||this;return Handlebars.registerHelper("className",function(e){return n.className(e)}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerHelper("kindToStr",function(e){return n.kindToStr(e)}),Handlebars.registerPartial("tadsObject",Handlebars.templates.tadsObject),Handlebars.registerHelper("buildObject",function(e){return n.buildObject(e)}),n}var t;t=r.CodeGenerator,__extends(e,t),e.prototype.kindToStr=function(e){switch(e){case o.ObjectKind.Actor:return"Actor";case o.ObjectKind.Item:return"Item";case o.ObjectKind.Scenery:return"Decoration";default:return""}},e.prototype.buildObject=function(e,t){var n=this;t=t||1;for(var o="",r=0;r<t;r++)o+="+";return o+=Handlebars.templates.tadsObject({obj:e}),e.content.forEach(function(e){o+=n.buildObject(e,t+1)}),new Handlebars.SafeString(o)},e.prototype.generate=function(){return Handlebars.templates.tads({map:this.map})},n("TadsGenerator",e)}}}),System.register("codegen/textadventurejs/TextadventurejsGenerator",["enums/enums","codegen/CodeGenerator"],function(n,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e){var n=t.call(this,e)||this;return Handlebars.registerHelper("capitalizeDirToStr",function(e,t){return n.capitalize(n.dirToStr(e,t))}),Handlebars.registerHelper("className",function(e){return n.className(e)}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerHelper("kindToStr",function(e){return n.kindToStr(e)}),Handlebars.registerHelper("buildObject",function(e){return n.buildObject(e)}),n}var t;t=r.CodeGenerator,__extends(e,t),e.prototype.kindToStr=function(e){switch(e){case o.ObjectKind.Actor:return"Actor";case o.ObjectKind.Item:return"Item";case o.ObjectKind.Scenery:return"Decoration";default:return""}},e.prototype.buildObject=function(e,t){var n=this;t=t||1;for(var o="",r=0;r<t;r++)o+="+";return o+=Handlebars.templates.tadsObject({obj:e}),e.content.forEach(function(e){o+=n.buildObject(e,t+1)}),new Handlebars.SafeString(o)},e.prototype.generate=function(){return Handlebars.templates.textadventurejs({map:this.map})},n("TextadventurejsGenerator",e)}}}),System.register("codegen/yaml/YamlGenerator",["enums/enums","codegen/CodeGenerator"],function(n,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e){var n=t.call(this,e)||this;return Handlebars.registerHelper("className",function(e){return n.className(e)}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerHelper("kindToStr",function(e){return n.kindToStr(e)}),Handlebars.registerPartial("DescriptionPartial",Handlebars.templates.yamlDescription),Handlebars.registerPartial("yamlObject",Handlebars.templates.yamlObject),n}var t;t=r.CodeGenerator,__extends(e,t),e.prototype.kindToStr=function(e){switch(e){case o.ObjectKind.Actor:return"actor";case o.ObjectKind.Item:return"item";case o.ObjectKind.Scenery:return"decoration";default:return""}},e.prototype.generate=function(){return Handlebars.templates.yaml({map:this.map})},n("YamlGenerator",e)}}}),System.register("codegen/zil/ZilGenerator",["enums/enums","codegen/CodeGenerator"],function(n,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(e){var n=t.call(this,e)||this;return Handlebars.registerHelper("zilName",function(e){return n.zilName(e)}),Handlebars.registerHelper("upperDirToStr",function(e,t){return n.dirToStr(e,t).toUpperCase()}),Handlebars.registerHelper("dirToStr",function(e,t){return n.dirToStr(e,t)}),Handlebars.registerHelper("isItem",function(e){return n.isItem(e)}),Handlebars.registerPartial("zilObject",Handlebars.templates.zilObject),n}var t;t=r.CodeGenerator,__extends(e,t),e.prototype.kebabCase=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()},e.prototype.zilName=function(e){return new Handlebars.SafeString(this.kebabCase(this.removeAccents(e)).toUpperCase())},e.prototype.isItem=function(e){return e==o.ObjectKind.Item},e.prototype.generate=function(){return Handlebars.templates.zil({map:this.map})},n("ZilGenerator",e)}}}),System.register("codegen/CodeGeneration",["codegen/CodeGenerator","codegen/alan2/alan2Generator","codegen/alan3/alan3Generator","codegen/inform7/Inform7Generator","codegen/quest/questGenerator","codegen/tads/TadsGenerator","codegen/textadventurejs/TextadventurejsGenerator","codegen/yaml/YamlGenerator","codegen/zil/ZilGenerator"],function(o,e){"use strict";e&&e.id;function t(e){var t={};for(var n in e)"default"!==n&&(t[n]=e[n]);o(t)}return{setters:[function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)}],execute:function(){}}}),System.register("panels/menuPanel/menuPanel",["app","controls/window","io/mapXML","dispatcher","enums/enums","io/mapJSON","panels/panels","models/map","exporter","codegen/CodeGeneration","controls/controls"],function(n,e){"use strict";var i,o,r,a,s,l,d,c,p,u,h;e&&e.id;return{setters:[function(e){i=e},function(e){o=e},function(e){r=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){d=e},function(e){c=e},function(e){p=e},function(e){u=e},function(e){h=e}],execute:function(){function e(){var e=t.call(this,"menupanel",Handlebars.templates.menuPanel,{})||this;return e.handleInputLoad=function(){e.load(e.inputLoad.files,e.loadMap),e.inputLoad.value=null},e.handleInputImport=function(){e.load(e.inputImport.files,e.importMap),e.inputImport.value=null},document.querySelector("#menu").addEventListener("click",function(){e.toggle()}),e.inputLoad=document.getElementById("inputLoad"),e.inputImport=document.getElementById("inputImport"),e.createMenuGroup("#group-file"),e.createMenuItem("#menu-new",function(){e.actionNewMap()}),e.createMenuItem("#menu-load",function(){e.actionLoadMap()}),e.createMenuItem("#menu-save",function(){e.actionSaveMap()}),e.createMenuItem("#menu-import",function(){e.actionImportMap()}),e.createMenuItem("#menu-image",function(){e.actionExport()}),e.createMenuGroup("#group-settings"),e.createMenuItem("#menu-map",function(){e.actionMapSettings()}),e.createMenuItem("#menu-render",function(){e.actionRenderSettings()}),e.createMenuGroup("#group-export"),e.createMenuItem("#menu-export-tads",function(){e.actionGenerateCode(new u.TadsGenerator(i.App.map),"t3")}),e.createMenuItem("#menu-export-inform7",function(){e.actionGenerateCode(new u.Inform7Generator(i.App.map),"ni")}),e.createMenuItem("#menu-export-alan2",function(){e.actionGenerateCode(new u.Alan2Generator(i.App.map),"a2c")}),e.createMenuItem("#menu-export-alan3",function(){e.actionGenerateCode(new u.Alan3Generator(i.App.map),"a3c")}),e.createMenuItem("#menu-export-quest",function(){e.actionGenerateCode(new u.QuestGenerator(i.App.map),"aslx")}),e.createMenuItem("#menu-export-textadventurejs",function(){e.actionGenerateCode(new u.TextadventurejsGenerator(i.App.map),"js")}),e.createMenuItem("#menu-export-yaml",function(){e.actionGenerateCode(new u.YamlGenerator(i.App.map),"yaml")}),e.createMenuItem("#menu-export-zil",function(){e.actionGenerateCode(new u.ZilGenerator(i.App.map),"zil")}),e.createMenuGroup("#group-help"),e.createMenuItem("#menu-help",function(){e.actionHelp()}),e.inputLoad.addEventListener("change",e.handleInputLoad),e.inputImport.addEventListener("change",e.handleInputImport),e}var t;t=d.Panel,__extends(e,t),e.prototype.createMenuItem=function(e,t){var n=document.querySelector(e);t&&n.addEventListener("click",t),n.addEventListener("click",function(){n.classList.toggle("open")})},e.prototype.createMenuGroup=function(e){var o=this,r=document.querySelector(e);r.addEventListener("click",function(e){for(var t=o.elem.querySelectorAll(".menugroup > div"),n=0;n<t.length;n++)t[n].style.display="none";r.parentElement.querySelector("div").style.display="block"})},e.prototype.actionExport=function(){new p.Exporter(i.App.map).export()},e.prototype.actionNewMap=function(){new o.Window("New map","This will erase all editor contents. Proceed?",function(){i.App.map=new c.Map,a.Dispatcher.notify(s.AppEvent.Load,null)},function(){})},e.prototype.actionLoadMap=function(){this.inputLoad.click()},e.prototype.actionSaveMap=function(){var e=l.MapJSON.save(i.App.map),t=new Blob([e],{type:"text/plain; charset:utf-8"}),n=i.App.map.title;n=n||"untitled",window.saveAs(t,n+".json")},e.prototype.actionImportMap=function(){this.inputImport.click()},e.prototype.load=function(e,t){if(0!=e.length){var n=e[0],o=new FileReader;o.addEventListener("load",function(){t(o.result)}),o.readAsText(n)}},e.prototype.loadMap=function(e){var t=null;try{t=l.MapJSON.load(e)}catch(e){return console.error(e),void new o.Window("Map loading error","Unfortunately, an error occurred and map loading could not proceed. Perhaps the map file is in the wrong format?",!0,!1)}i.App.map=t,a.Dispatcher.notify(s.AppEvent.Load,null)},e.prototype.importMap=function(e){var t=null;try{t=r.MapXMLLoader.load(e)}catch(e){return void new o.Window("Map import error","Unfortunately, an error occurred and map import could not proceed. Perhaps the map file is in the wrong format?",!0,!1)}i.App.map=t,a.Dispatcher.notify(s.AppEvent.Load,null)},e.prototype.actionMapSettings=function(){a.Dispatcher.notify(s.AppEvent.More,i.App.map)},e.prototype.actionRenderSettings=function(){a.Dispatcher.notify(s.AppEvent.More,i.App.map.settings)},e.prototype.actionHelp=function(){h.IdToast.toast("Keyboard help",'\n    <table>\n      <tbody>\n        <tr>\n          <th>\n            <h4>Selection</h4>\n            <table>\n              <tbody>\n                <tr>\n                  <td><kbd>Ctrl</kbd><kbd>A</kbd></td>\n                  <td>Select all</td>\n                </tr>\n                <tr>\n                  <td><kbd>Esc</kbd></td>\n                  <td>Unselect all</td>\n                </tr>        \n                <tr>\n                  <td><kbd>Ctrl</kbd><kbd>C</kbd></td>\n                  <td>Copy selection</td>\n                </tr>        \n                <tr>\n                  <td><kbd>Ctrl</kbd><kbd>V</kbd></td>\n                  <td>Paste selection</td>\n                </tr>        \n                <tr>\n                  <td><kbd>Del</kbd></td>\n                  <td>Delete current selection</td>\n                </tr>\n                <tr>\n                  <td><kbd>Ctrl</kbd><kbd>Z</kbd></td>\n                  <td>Undo</td>\n                </tr>\n                <tr>\n                  <td><kbd>Enter</kbd> or <kbd>F2</kbd></td>\n                  <td>Open detail panel</td>\n                </tr>\n              </tbody>\n            </table>   \n          </th>\n          <th>\n            <h4>Navigation</h4>\n            <table>\n              <tbody>\n                <tr>\n                  <td><svg><use xlink:href="dist/icons.svg#arrows"></use></svg></td>\n                  <td>Pan map</td>\n                </tr>\n                <tr>\n                  <td><kbd>+</kbd></td>\n                  <td>Zoom in</td>\n                </tr>        \n                <tr>\n                  <td><kbd>-</kbd></td>\n                  <td>Zoom out</td>\n                </tr>        \n                <tr>\n                  <td><kbd>0</kbd></td>\n                  <td>Zoom 100%</td>\n                </tr>        \n                <tr>\n                  <td><kbd>Ins</kbd></td>\n                  <td>Center map</td>\n                </tr>\n                <tr>\n                  <td><kbd>Shift</kbd><kbd>Enter</kbd></td>\n                  <td>Center map</td>\n                </tr>\n              </tbody>\n            </table>   \n          </th>\n          <th>\n            <h4>Construction</h4>\n            <table>\n              <tbody>\n                <tr>\n                  <td><kbd>Shift</kbd> <svg><use xlink:href="dist/icons.svg#arrows"></use></svg></td>\n                  <td>Create room in dir</td>\n                </tr>\n                <tr>\n                  <td><kbd>R</kbd></td>\n                  <td>Add room</td>\n                </tr>        \n                <tr>\n                  <td><kbd>N</kbd></td>\n                  <td>Add note</td>\n                </tr>        \n                <tr>\n                  <td><kbd>B</kbd></td>\n                  <td>Add block</td>\n                </tr>        \n                <tr>\n                  <td><kbd>A</kbd></td>\n                  <td>Toggle one-way</td>\n                </tr>\n                <tr>\n                  <td><kbd>V</kbd></td>\n                  <td>Reverse connector</td>\n                </tr>\n                <tr>\n                  <td><kbd>K</kbd></td>\n                  <td>Toggle darkness</td>\n                </tr>\n              </tbody>\n            </table>   \n          </th>          \n        </tr>\n      </tbody>\n    </table>\n \n \n    ',!0)},e.prototype.actionGenerateCode=function(e,t){var n=e.generate(),o=new Blob([n],{type:"text/plain; charset:utf-8"}),r=i.App.map.title;r=r||"untitled",window.saveAs(o,r+"."+t)},n("MenuPanel",e)}}}),System.register("panels/notePanel/notePanel",["dispatcher","enums/appEvent","models/note","panels/panels","controls/controls"],function(t,e){"use strict";var a,r,s,n,l;e&&e.id;return{setters:[function(e){a=e},function(e){r=e},function(e){s=e},function(e){n=e},function(e){l=e}],execute:function(){function e(){var n=i.call(this,"notepanel",Handlebars.templates.notePanel,{})||this;a.Dispatcher.subscribe(n),n.ctrlText=new l.IdTextarea(".js-text",n.elem).addEventListener("input",function(){n.note.text=n.ctrlText.value}),n.colorPicker=new l.IdColorPicker(".js-color",n.elem).addEventListener("change",function(){n.setNoteColor(n.colorPicker.color)}),n.ctrlLineStyle=new l.IdLineStyle(".js-linestyle",n.elem).addEventListener("change",function(){n.note.lineStyle=n.ctrlLineStyle.value}),n.ctrlLineWidth=new l.IdRange(".js-linewidth",n.elem).addEventListener("input",function(){n.note.lineWidth=n.ctrlLineWidth.value}),n.ctrlShape=new l.IdShape(".js-shape",n.elem).addEventListener("change",function(){n.note.shape=n.ctrlShape.value}),n.ctrlRounding=new l.IdRange(".js-rounding",n.elem).addEventListener("input",function(){n.note.rounding=n.ctrlRounding.value});var o=n.elem.querySelectorAll(".colortype");n.colorButtons=new Array;for(var e=function(e){var t=new l.IdPopup(o[e]);t.selected&&(r.colorType=t.type),r.colorButtons.push(t),o[e].addEventListener("click",function(){n.onColorButton(t)})},r=this,t=0;t<o.length;t++)e(t);return n}var i;i=n.Panel,__extends(e,i),e.prototype.notify=function(e,t){var n=this;if(e==r.AppEvent.More)if(t instanceof s.Note){var o=t;this.note=o,this.open(),this.ctrlText.value=o.text,this.ctrlShape.value=o.shape,this.ctrlLineStyle.value=o.lineStyle,this.ctrlLineWidth.value=o.lineWidth,this.ctrlRounding.value=o.rounding,this.setColor(),setTimeout(function(){n.ctrlText.focus().select()},100)}else this.close()},e.prototype.onColorButton=function(e){this.colorButtons.forEach(function(e){e.selected=!1}),e.selected=!0,this.colorType=e.type,this.setColor()},e.prototype.setColor=function(){"fill"==this.colorType&&(this.colorPicker.color=this.note.fillColor),"border"==this.colorType&&(this.colorPicker.color=this.note.borderColor),"text"==this.colorType&&(this.colorPicker.color=this.note.textColor),a.Dispatcher.notify(r.AppEvent.Refresh,null)},e.prototype.setNoteColor=function(e){"fill"==this.colorType&&(this.note.fillColor=e),"border"==this.colorType&&(this.note.borderColor=e),"text"==this.colorType&&(this.note.textColor=e),a.Dispatcher.notify(r.AppEvent.Refresh,null)},t("NotePanel",e)}}}),System.register("themes/obsidianTheme",["enums/enums","models/mapSettings"],function(n,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(){var e=t.call(this)||this;return e.grid.background="#000",e.grid.color="#333",e.room.fillColor="#333",e.room.borderColor="#fff",e.room.nameColor="#fff",e.room.subtitleColor="#fff",e.room.rounding=4,e.room.shape=o.RoomShape.Rectangle,e.room.lineWidth=2,e.connector.color="#fff",e.note.fillColor="#333",e.note.borderColor="#fff",e.note.textColor="#fff",e.note.rounding=4,e.note.shape=o.RoomShape.Rectangle,e.note.lineWidth=2,e.block.fillColor="#333",e.block.borderColor="#fff",e.block.shape=o.RoomShape.Rectangle,e.block.rounding=4,e.block.lineStyle=o.LineStyle.Dash,e.block.lineWidth=2,e}var t;t=r.MapSettings,__extends(e,t),n("ObsidianTheme",e)}}}),System.register("themes/themes",["themes/obsidianTheme"],function(o,e){"use strict";e&&e.id;return{setters:[function(e){!function(e){var t={};for(var n in e)"default"!==n&&(t[n]=e[n]);o(t)}(e)}],execute:function(){}}}),System.register("themes/handDrawnTheme",["enums/enums","models/mapSettings"],function(n,e){"use strict";var o,r;e&&e.id;return{setters:[function(e){o=e},function(e){r=e}],execute:function(){function e(){var e=t.call(this)||this;return e.grid.background="#ffffff",e.grid.color="#f0f0f0",e.room.fillColor="#ffffff",e.room.borderColor="#000000",e.room.nameColor="#333333",e.room.subtitleColor="#666666",e.room.rounding=0,e.room.shape=o.RoomShape.Rectangle,e.room.lineWidth=2,e.connector.color="#000000",e.note.fillColor="#ffffff",e.note.borderColor="#000000",e.note.textColor="#333333",e.note.rounding=0,e.note.shape=o.RoomShape.Rectangle,e.note.lineWidth=1,e.block.fillColor="#D5E5D6",e.block.borderColor="#000000",e.block.shape=o.RoomShape.Rectangle,e.block.rounding=0,e.block.lineStyle=o.LineStyle.Dash,e.block.lineWidth=1,e.draw.hand=!0,e}var t;t=r.MapSettings,__extends(e,t),n("HandDrawnTheme",e)}}}),System.register("panels/renderPanel/renderPanel",["dispatcher","enums/appEvent","app","panels/panels","controls/controls","models/mapSettings","controls/window","themes/themes","themes/handDrawnTheme"],function(t,e){"use strict";var u,n,h,o,m,r,i,a,s;e&&e.id;return{setters:[function(e){u=e},function(e){n=e},function(e){h=e},function(e){o=e},function(e){m=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e}],execute:function(){function e(){var n=p.call(this,"renderpanel",Handlebars.templates.renderPanel,{})||this;u.Dispatcher.subscribe(n),n.ctrlGridVisible=new m.IdCheck(".js-grid-visible",n.elem).addEventListener("input",function(){h.App.map.settings.grid.visible=n.ctrlGridVisible.checked}),n.ctrlGridOrigin=new m.IdCheck(".js-grid-origin",n.elem).addEventListener("input",function(){h.App.map.settings.grid.origin=n.ctrlGridOrigin.checked}),n.ctrlGridSnap=new m.IdCheck(".js-grid-snap",n.elem).addEventListener("input",function(){h.App.map.settings.grid.snap=n.ctrlGridSnap.checked}),n.ctrlGridSize=new m.IdRange(".js-grid-size",n.elem).addEventListener("input",function(){h.App.map.settings.grid.size=n.ctrlGridSize.value}),n.mapColorPicker=new m.IdColorPicker(".js-map-color",n.elem).addEventListener("change",function(){n.setMapColor(n.mapColorPicker.color)});var o=n.elem.querySelectorAll(".map-colortype");n.mapColorButtons=new Array;for(var e=function(e){var t=new m.IdPopup(o[e]);t.selected&&(r.mapColorType=t.type),r.mapColorButtons.push(t),o[e].addEventListener("click",function(){n.onMapColorButton(t)})},r=this,t=0;t<o.length;t++)e(t);n.elem.querySelector(".js-theme-default").addEventListener("click",function(){n.applyTheme("default")}),n.elem.querySelector(".js-theme-obsidian").addEventListener("click",function(){n.applyTheme("obsidian")}),n.elem.querySelector(".js-theme-hand-drawn").addEventListener("click",function(){n.applyTheme("hand-drawn")}),n.ctrlRoomWidth=new m.IdRange(".js-room-width",n.elem).addEventListener("input",function(){h.App.map.settings.room.width=n.ctrlRoomWidth.value}),n.ctrlRoomHeight=new m.IdRange(".js-room-height",n.elem).addEventListener("input",function(){h.App.map.settings.room.height=n.ctrlRoomHeight.value}),n.ctrlRoomLinewidth=new m.IdRange(".js-room-linewidth",n.elem).addEventListener("input",function(){h.App.map.settings.room.lineWidth=n.ctrlRoomLinewidth.value}),n.ctrlRoomRounding=new m.IdRange(".js-room-rounding",n.elem).addEventListener("input",function(){h.App.map.settings.room.rounding=n.ctrlRoomRounding.value}),n.ctrlRoomDarknessSize=new m.IdRange(".js-room-darkness-size",n.elem).addEventListener("input",function(){h.App.map.settings.room.darknessSize=n.ctrlRoomDarknessSize.value}),n.ctrlRoomShape=new m.IdShape(".js-room-shape",n.elem).addEventListener("change",function(){h.App.map.settings.room.shape=n.ctrlRoomShape.value}),n.ctrlRoomLine=new m.IdLineStyle(".js-room-line",n.elem).addEventListener("change",function(){h.App.map.settings.room.lineStyle=n.ctrlRoomLine.value}),n.roomColorPicker=new m.IdColorPicker(".js-room-color",n.elem).addEventListener("change",function(){n.setRoomColor(n.roomColorPicker.color)});o=n.elem.querySelectorAll(".room-colortype");n.roomColorButtons=new Array;var i=function(e){var t=new m.IdPopup(o[e]);t.selected&&(a.roomColorType=t.type),a.roomColorButtons.push(t),o[e].addEventListener("click",function(){n.onRoomColorButton(t)})},a=this;for(t=0;t<o.length;t++)i(t);n.ctrlConnectorLinewidth=new m.IdRange(".js-connector-linewidth",n.elem).addEventListener("input",function(){h.App.map.settings.connector.lineWidth=n.ctrlConnectorLinewidth.value}),n.ctrlConnectorStalk=new m.IdRange(".js-connector-stalk",n.elem).addEventListener("input",function(){h.App.map.settings.connector.stalk=n.ctrlConnectorStalk.value}),n.ctrlConnectorLabelDistance=new m.IdRange(".js-connector-label-distance",n.elem).addEventListener("input",function(){h.App.map.settings.connector.labelDistance=n.ctrlConnectorLabelDistance.value}),n.ctrlConnectorArrowSize=new m.IdRange(".js-connector-arrow-size",n.elem).addEventListener("input",function(){h.App.map.settings.connector.arrowSize=n.ctrlConnectorArrowSize.value}),n.ctrlConnectorCurve=new m.IdCheck(".js-connector-curve",n.elem).addEventListener("input",function(){h.App.map.settings.connector.isCurve=n.ctrlConnectorCurve.checked}),n.ctrlConnectorCurveStrength=new m.IdRange(".js-connector-curve-strength",n.elem).addEventListener("input",function(){h.App.map.settings.connector.curveStrength=n.ctrlConnectorCurveStrength.value/10}),n.ctrlConnectorLine=new m.IdLineStyle(".js-connector-line",n.elem).addEventListener("change",function(){h.App.map.settings.connector.lineStyle=n.ctrlConnectorLine.value}),n.connectorColorPicker=new m.IdColorPicker(".js-connector-color",n.elem).addEventListener("change",function(){h.App.map.settings.connector.color=n.connectorColorPicker.color}),n.ctrlNoteWidth=new m.IdRange(".js-note-width",n.elem).addEventListener("input",function(){h.App.map.settings.note.width=n.ctrlNoteWidth.value}),n.ctrlNoteHeight=new m.IdRange(".js-note-height",n.elem).addEventListener("input",function(){h.App.map.settings.note.height=n.ctrlNoteHeight.value}),n.ctrlNoteLinewidth=new m.IdRange(".js-note-linewidth",n.elem).addEventListener("input",function(){h.App.map.settings.note.lineWidth=n.ctrlNoteLinewidth.value}),n.ctrlNoteRounding=new m.IdRange(".js-note-rounding",n.elem).addEventListener("input",function(){h.App.map.settings.note.rounding=n.ctrlNoteRounding.value}),n.ctrlNoteShape=new m.IdShape(".js-note-shape",n.elem).addEventListener("change",function(){h.App.map.settings.note.shape=n.ctrlNoteShape.value}),n.ctrlNoteLine=new m.IdLineStyle(".js-note-line",n.elem).addEventListener("change",function(){h.App.map.settings.note.lineStyle=n.ctrlNoteLine.value}),n.noteColorPicker=new m.IdColorPicker(".js-note-color",n.elem).addEventListener("change",function(){n.setNoteColor(n.noteColorPicker.color)});o=n.elem.querySelectorAll(".note-colortype");n.noteColorButtons=new Array;var s=function(e){var t=new m.IdPopup(o[e]);t.selected&&(l.noteColorType=t.type),l.noteColorButtons.push(t),o[e].addEventListener("click",function(){n.onNoteColorButton(t)})},l=this;for(t=0;t<o.length;t++)s(t);n.ctrlBlockWidth=new m.IdRange(".js-block-width",n.elem).addEventListener("input",function(){h.App.map.settings.block.width=n.ctrlBlockWidth.value}),n.ctrlBlockHeight=new m.IdRange(".js-block-height",n.elem).addEventListener("input",function(){h.App.map.settings.block.height=n.ctrlBlockHeight.value}),n.ctrlBlockLinewidth=new m.IdRange(".js-block-linewidth",n.elem).addEventListener("input",function(){h.App.map.settings.block.lineWidth=n.ctrlBlockLinewidth.value}),n.ctrlBlockRounding=new m.IdRange(".js-block-rounding",n.elem).addEventListener("input",function(){h.App.map.settings.block.rounding=n.ctrlBlockRounding.value}),n.ctrlBlockShape=new m.IdShape(".js-block-shape",n.elem).addEventListener("change",function(){h.App.map.settings.block.shape=n.ctrlBlockShape.value}),n.ctrlBlockLine=new m.IdLineStyle(".js-block-line",n.elem).addEventListener("change",function(){h.App.map.settings.block.lineStyle=n.ctrlBlockLine.value}),n.blockColorPicker=new m.IdColorPicker(".js-block-color",n.elem).addEventListener("change",function(){n.setBlockColor(n.blockColorPicker.color)});o=n.elem.querySelectorAll(".block-colortype");n.blockColorButtons=new Array;var d=function(e){var t=new m.IdPopup(o[e]);t.selected&&(c.blockColorType=t.type),c.blockColorButtons.push(t),o[e].addEventListener("click",function(){n.onBlockColorButton(t)})},c=this;for(t=0;t<o.length;t++)d(t);return n}var p;p=o.Panel,__extends(e,p),e.prototype.notify=function(e,t){e==n.AppEvent.More&&(t instanceof r.MapSettings?(this.open(),this.settings=t,this.ctrlGridVisible.checked=h.App.map.settings.grid.visible,this.ctrlGridOrigin.checked=h.App.map.settings.grid.origin,this.ctrlGridSnap.checked=h.App.map.settings.grid.snap,this.ctrlGridSize.value=h.App.map.settings.grid.size,this.ctrlRoomWidth.value=h.App.map.settings.room.width,this.ctrlRoomHeight.value=h.App.map.settings.room.height,this.ctrlRoomLinewidth.value=h.App.map.settings.room.lineWidth,this.ctrlRoomRounding.value=h.App.map.settings.room.rounding,this.ctrlRoomDarknessSize.value=h.App.map.settings.room.darknessSize,this.setRoomPickerColor(),this.ctrlConnectorLinewidth.value=h.App.map.settings.connector.lineWidth,this.ctrlConnectorStalk.value=h.App.map.settings.connector.stalk,this.ctrlConnectorLabelDistance.value=h.App.map.settings.connector.labelDistance,this.ctrlConnectorArrowSize.value=h.App.map.settings.connector.arrowSize,this.ctrlConnectorCurve.checked=h.App.map.settings.connector.isCurve,this.ctrlConnectorCurveStrength.value=Math.floor(10*h.App.map.settings.connector.curveStrength),this.connectorColorPicker.color=h.App.map.settings.connector.color,this.ctrlNoteWidth.value=h.App.map.settings.note.width,this.ctrlNoteHeight.value=h.App.map.settings.note.height,this.ctrlNoteLinewidth.value=h.App.map.settings.note.lineWidth,this.ctrlNoteRounding.value=h.App.map.settings.note.rounding,this.setNotePickerColor(),this.ctrlBlockWidth.value=h.App.map.settings.block.width,this.ctrlBlockHeight.value=h.App.map.settings.block.height,this.ctrlBlockLinewidth.value=h.App.map.settings.block.lineWidth,this.ctrlBlockRounding.value=h.App.map.settings.block.rounding,this.setBlockPickerColor()):this.close())},e.prototype.applyTheme=function(e){new i.Window("Apply theme","Applying a new theme will overwrite all render settings. Proceed?",function(){switch(e){case"obsidian":h.App.map.settings=(new r.MapSettings).cloneFrom(new a.ObsidianTheme);break;case"hand-drawn":h.App.map.settings=(new r.MapSettings).cloneFrom(new s.HandDrawnTheme);break;default:h.App.map.settings=new r.MapSettings}u.Dispatcher.notify(n.AppEvent.Refresh,null)},function(){})},e.prototype.onMapColorButton=function(e){this.mapColorButtons.forEach(function(e){e.selected=!1}),e.selected=!0,this.mapColorType=e.type,this.setMapPickerColor()},e.prototype.setMapPickerColor=function(){"background"==this.mapColorType&&(this.mapColorPicker.color=h.App.map.settings.grid.background),"grid"==this.mapColorType&&(this.mapColorPicker.color=h.App.map.settings.grid.color),u.Dispatcher.notify(n.AppEvent.Refresh,null)},e.prototype.setMapColor=function(e){"background"==this.mapColorType&&(h.App.map.settings.grid.background=e),"grid"==this.mapColorType&&(h.App.map.settings.grid.color=e),u.Dispatcher.notify(n.AppEvent.Refresh,null)},e.prototype.onRoomColorButton=function(e){this.roomColorButtons.forEach(function(e){e.selected=!1}),e.selected=!0,this.roomColorType=e.type,this.setRoomPickerColor()},e.prototype.setRoomPickerColor=function(){"fill"==this.roomColorType&&(this.roomColorPicker.color=h.App.map.settings.room.fillColor),"border"==this.roomColorType&&(this.roomColorPicker.color=h.App.map.settings.room.borderColor),"name"==this.roomColorType&&(this.roomColorPicker.color=h.App.map.settings.room.nameColor),"subtitle"==this.roomColorType&&(this.roomColorPicker.color=h.App.map.settings.room.subtitleColor),"dark"==this.roomColorType&&(this.roomColorPicker.color=h.App.map.settings.room.darkColor),"start"==this.roomColorType&&(this.roomColorPicker.color=h.App.map.settings.room.startRoomColor),"end"==this.roomColorType&&(this.roomColorPicker.color=h.App.map.settings.room.endRoomColor),u.Dispatcher.notify(n.AppEvent.Refresh,null)},e.prototype.setRoomColor=function(e){"fill"==this.roomColorType&&(h.App.map.settings.room.fillColor=e),"border"==this.roomColorType&&(h.App.map.settings.room.borderColor=e),"name"==this.roomColorType&&(h.App.map.settings.room.nameColor=e),"subtitle"==this.roomColorType&&(h.App.map.settings.room.subtitleColor=e),"dark"==this.roomColorType&&(h.App.map.settings.room.darkColor=e),"start"==this.roomColorType&&(h.App.map.settings.room.startRoomColor=e),"end"==this.roomColorType&&(h.App.map.settings.room.endRoomColor=e),u.Dispatcher.notify(n.AppEvent.Refresh,null)},e.prototype.onNoteColorButton=function(e){this.noteColorButtons.forEach(function(e){e.selected=!1}),e.selected=!0,this.noteColorType=e.type,this.setNotePickerColor()},e.prototype.setNotePickerColor=function(){"fill"==this.noteColorType&&(this.noteColorPicker.color=h.App.map.settings.note.fillColor),"border"==this.noteColorType&&(this.noteColorPicker.color=h.App.map.settings.note.borderColor),"text"==this.noteColorType&&(this.noteColorPicker.color=h.App.map.settings.note.textColor),u.Dispatcher.notify(n.AppEvent.Refresh,null)},e.prototype.setNoteColor=function(e){"fill"==this.noteColorType&&(h.App.map.settings.note.fillColor=e),"border"==this.noteColorType&&(h.App.map.settings.note.borderColor=e),"text"==this.noteColorType&&(h.App.map.settings.note.textColor=e),u.Dispatcher.notify(n.AppEvent.Refresh,null)},e.prototype.onBlockColorButton=function(e){this.blockColorButtons.forEach(function(e){e.selected=!1}),e.selected=!0,this.blockColorType=e.type,this.setBlockPickerColor()},e.prototype.setBlockPickerColor=function(){"fill"==this.blockColorType&&(this.blockColorPicker.color=h.App.map.settings.block.fillColor),"border"==this.blockColorType&&(this.blockColorPicker.color=h.App.map.settings.block.borderColor)},e.prototype.setBlockColor=function(e){"fill"==this.blockColorType&&(h.App.map.settings.block.fillColor=e),"border"==this.blockColorType&&(h.App.map.settings.block.borderColor=e),u.Dispatcher.notify(n.AppEvent.Refresh,null)},t("RenderPanel",e)}}}),System.register("controls/idObjectEditor/idObjectEditor",["controls/control","controls/controls","enums/enums"],function(e,t){"use strict";var n,s,l;t&&t.id;return{setters:[function(e){n=e},function(e){s=e},function(e){l=e}],execute:function(){function i(e,t){var n=a.call(this,e,t)||this;n.elem.innerHTML=Handlebars.templates.idObjectEditor({});var o=n.elem.querySelector(".handle");o.addEventListener("mousedown",function(e){n.elem.setAttribute("draggable","true")}),o.addEventListener("mouseup",function(e){n.elem.setAttribute("draggable","false")}),n.elem.addEventListener("dragstart",function(e){e.dataTransfer.setData("text","foo"),i.dragObj=n.obj,i.dragParent=n.elem.parentElement,n.elem.classList.add("dragged"),i.dragParent.classList.add("dragging")}),n.elem.addEventListener("dragend",function(e){n.elem.setAttribute("draggable","false"),n.elem.classList.remove("dragged"),i.dragParent.classList.remove("dragging")}),n.dropDiv=n.elem.querySelector(".drop"),n.dropAsChildDiv=n.elem.querySelector(".drop-child");var r=n;return n.dropDiv.addEventListener("dragover",function(e){return n.handleDragOver(e)},!1),n.dropAsChildDiv.addEventListener("dragover",function(e){return n.handleDragOver(e)},!1),n.dropDiv.addEventListener("dragenter",function(e){return r.handleDragEnter(this)}),n.dropAsChildDiv.addEventListener("dragenter",function(e){return r.handleDragEnter(this)}),n.dropDiv.addEventListener("dragleave",function(e){return r.handleDragLeave(this)}),n.dropAsChildDiv.addEventListener("dragleave",function(e){return r.handleDragLeave(this)}),n.dropDiv.addEventListener("drop",function(e){return r.handleDrop(e,this)}),n.dropAsChildDiv.addEventListener("drop",function(e){return r.handleDropAsChild(e,this)}),n.ctrlName=new s.IdInput(".js-name",n.elem).addEventListener("input",function(){n.obj.name=n.ctrlName.value}),n.ctrlDescription=new s.IdInput(".js-description",n.elem).addEventListener("input",function(){n.obj.description=n.ctrlDescription.value}),n.btnDelete=n.elem.querySelector("a"),n.btnDelete.addEventListener("click",function(){n.delete()}),n.btnItem=new s.IdPopup(".js-item",n.elem).addEventListener("click",function(){n.setKind(l.ObjectKind.Item)}),n.btnScenery=new s.IdPopup(".js-scenery",n.elem).addEventListener("click",function(){n.setKind(l.ObjectKind.Scenery)}),n.btnActor=new s.IdPopup(".js-actor",n.elem).addEventListener("click",function(){n.setKind(l.ObjectKind.Actor)}),n}var a;a=n.Control,__extends(i,a),i.prototype.handleDragOver=function(e){return e.preventDefault(),!(e.dataTransfer.dropEffect="move")},i.prototype.handleDragEnter=function(e){e.classList.add("over")},i.prototype.handleDragLeave=function(e){e.classList.remove("over")},i.prototype.handleDrop=function(e,t){e.preventDefault(),e.stopPropagation();var n=new CustomEvent("drop",{detail:i.dragObj});return this.elem.dispatchEvent(n),!1},i.prototype.handleDropAsChild=function(e,t){e.preventDefault(),e.stopPropagation();var n=new CustomEvent("dropAsChild",{detail:i.dragObj});return this.elem.dispatchEvent(n),!1},i.prototype.setKind=function(e){this.btnActor.selected=e==l.ObjectKind.Actor,this.btnItem.selected=e==l.ObjectKind.Item,this.btnScenery.selected=e==l.ObjectKind.Scenery,this.obj.kind=e},Object.defineProperty(i.prototype,"value",{get:function(){return this.obj},set:function(e){this.obj=e,this.ctrlName.value=e.name,this.ctrlDescription.value=e.description,this.setKind(e.kind)},enumerable:!0,configurable:!0}),i.prototype.delete=function(){var e=new CustomEvent("delete");this.elem.dispatchEvent(e)},e("IdObjectEditor",i)}}}),System.register("panels/roomPanel/roomPanel",["dispatcher","enums/appEvent","models/room","panels/panels","controls/controls","models/obj","controls/idObjectEditor/idObjectEditor"],function(t,e){"use strict";var a,r,s,n,l,o,d;e&&e.id;return{setters:[function(e){a=e},function(e){r=e},function(e){s=e},function(e){n=e},function(e){l=e},function(e){o=e},function(e){d=e}],execute:function(){function e(){var n=i.call(this,"roompanel",Handlebars.templates.roomPanel,{})||this;n.objectsCreated=0,a.Dispatcher.subscribe(n),n.ctrlName=new l.IdInput(".js-name",n.elem).addEventListener("input",function(){n.room.name=n.ctrlName.value}),n.ctrlSubtitle=new l.IdInput(".js-subtitle",n.elem).addEventListener("input",function(){n.room.subtitle=n.ctrlSubtitle.value}),n.ctrlDark=new l.IdCheck(".js-dark",n.elem).addEventListener("input",function(){n.room.dark=n.ctrlDark.checked}),n.ctrlStartroom=new l.IdCheck(".js-startroom",n.elem).addEventListener("input",function(){n.room.setStartRoom(n.ctrlStartroom.checked)}),n.ctrlEndroom=new l.IdCheck(".js-endroom",n.elem).addEventListener("input",function(){n.room.endroom=n.ctrlEndroom.checked}),n.ctrlDescription=new l.IdTextarea(".js-description",n.elem).addEventListener("input",function(){n.room.description=n.ctrlDescription.value}),n.ctrlLineStyle=new l.IdLineStyle(".js-linestyle",n.elem).addEventListener("change",function(){n.room.lineStyle=n.ctrlLineStyle.value}),n.ctrlLineWidth=new l.IdRange(".js-linewidth",n.elem).addEventListener("input",function(){n.room.lineWidth=n.ctrlLineWidth.value}),n.colorPicker=new l.IdColorPicker(".js-color",n.elem).addEventListener("change",function(){n.setRoomColor(n.colorPicker.color)}),n.ctrlShape=new l.IdShape(".js-shape",n.elem).addEventListener("change",function(){n.room.shape=n.ctrlShape.value}),n.ctrlRounding=new l.IdRange(".js-rounding",n.elem).addEventListener("input",function(){n.room.rounding=n.ctrlRounding.value});var o=n.elem.querySelectorAll(".colortype");n.colorButtons=new Array;for(var e=function(e){var t=new l.IdPopup(o[e]);t.selected&&(r.colorType=t.type),r.colorButtons.push(t),o[e].addEventListener("click",function(){n.onColorButton(t)})},r=this,t=0;t<o.length;t++)e(t);return n.objList=n.elem.querySelector(".js-object-list"),n.elem.querySelector(".js-add-object").addEventListener("click",function(){n.newObject()}),n}var i;i=n.Panel,__extends(e,i),e.prototype.newObject=function(){var e=new o.Obj;this.room.objects.push(e),this.refreshObjList(),0==this.objectsCreated&&l.IdToast.toast("Container objects","You've just created your first object. When creating multiple objects in a room, you can <b>drag</b> one object into another one to establish a containment relationship."),this.objectsCreated++},e.prototype.findObjList=function(e,t){if(-1!=(t=t||this.room.objects).indexOf(e))return t;for(var n=0;n<t.length;n++){var o=this.findObjList(e,t[n].content);if(null!=o)return o}return null},e.prototype.isChildOf=function(e,t){if(-1!=e.content.indexOf(t))return!0;for(var n=0;n<e.content.length;n++)if(this.isChildOf(e.content[n],t))return!0;return!1},e.prototype.removeObject=function(e){var t=this.findObjList(e),n=t.indexOf(e);t.splice(n,1)},e.prototype.addObjectAfter=function(e,t){if(!this.isChildOf(e,t)){this.removeObject(e);var n=this.findObjList(t),o=n.indexOf(t);n.splice(o+1,0,e)}},e.prototype.addObjectIn=function(e,t){this.isChildOf(e,t)||(this.removeObject(e),t.content.push(e))},e.prototype.refreshObjList=function(){this.objList.innerHTML="",0==this.room.objects.length?this.objList.innerHTML="<p>There are no objects in this location.</p>":this.addEditors(this.room.objects,0),a.Dispatcher.notify(r.AppEvent.Refresh,null)},e.prototype.addEditors=function(e,t){var n=this;e.forEach(function(e){n.createObjEditor(e,t),n.addEditors(e.content,t+1)})},e.prototype.createObjEditor=function(t,e){var n=this,o=document.createElement("div");o.style.marginLeft=40*e+"px",this.objList.appendChild(o);var r=new d.IdObjectEditor(o);r.value=t,r.addEventListener("delete",function(){n.removeObject(t),n.refreshObjList()}),r.addEventListener("drop",function(e){n.addObjectAfter(e.detail,t),n.refreshObjList()}),r.addEventListener("dropAsChild",function(e){n.addObjectIn(e.detail,t),n.refreshObjList()})},e.prototype.notify=function(e,t){var n=this;if(e==r.AppEvent.More)if(t instanceof s.Room){var o=t;this.room=t,this.open(),this.ctrlName.value=o.name,this.ctrlSubtitle.value=o.subtitle,this.ctrlDark.checked=o.dark,this.ctrlStartroom.checked=o.isStartRoom(),this.ctrlEndroom.checked=o.endroom,this.ctrlShape.value=this.room.shape,this.ctrlRounding.value=o.rounding,this.ctrlDescription.value=o.description,this.ctrlLineStyle.value=o.lineStyle,this.ctrlLineWidth.value=o.lineWidth,this.setColor(),this.refreshObjList(),setTimeout(function(){n.ctrlName.focus().select()},100)}else this.close()},e.prototype.onColorButton=function(e){this.colorButtons.forEach(function(e){e.selected=!1}),e.selected=!0,this.colorType=e.type,this.setColor()},e.prototype.setColor=function(){"fill"==this.colorType&&(this.colorPicker.color=this.room.fillColor),"border"==this.colorType&&(this.colorPicker.color=this.room.borderColor),"name"==this.colorType&&(this.colorPicker.color=this.room.nameColor),"subtitle"==this.colorType&&(this.colorPicker.color=this.room.subtitleColor)},e.prototype.setRoomColor=function(e){"fill"==this.colorType&&(this.room.fillColor=e),"border"==this.colorType&&(this.room.borderColor=e),"name"==this.colorType&&(this.room.nameColor=e),"subtitle"==this.colorType&&(this.room.subtitleColor=e),a.Dispatcher.notify(r.AppEvent.Refresh,null)},t("RoomPanel",e)}}}),System.register("panels/toolPanel/toolPanel",["enums/enums","app","controls/optionsGroup","dispatcher"],function(t,e){"use strict";var o,r,i,a;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e}],execute:function(){function e(){var e=this,t=document.getElementById("toolpanel");return e=n.call(this,t,[{value:o.MouseMode.None,htmlEl:"#toolpanel .tool-none"},{value:o.MouseMode.AddRoom,htmlEl:"#toolpanel .tool-room"},{value:o.MouseMode.AddNote,htmlEl:"#toolpanel .tool-note"},{value:o.MouseMode.AddBlock,htmlEl:"#toolpanel .tool-block"}])||this,a.Dispatcher.subscribe(e),e.value=o.MouseMode.None,e}var n;n=i.OptionsGroup,__extends(e,n),Object.defineProperty(e.prototype,"template",{get:function(){return Handlebars.templates.toolPanel({})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this.setValue(e),r.App.mouseMode=e},enumerable:!0,configurable:!0}),e.prototype.notify=function(e,t){e==o.AppEvent.Added&&(this.value=o.MouseMode.None)},t("ToolPanel",e)}}}),System.register("panels/panels",["panels/panel","panels/blockPanel/blockPanel","panels/connectorPanel/connectorPanel","panels/mapPanel/mapPanel","panels/menuPanel/menuPanel","panels/notePanel/notePanel","panels/renderPanel/renderPanel","panels/roomPanel/roomPanel","panels/toolPanel/toolPanel"],function(o,e){"use strict";e&&e.id;function t(e){var t={};for(var n in e)"default"!==n&&(t[n]=e[n]);o(t)}return{setters:[function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)}],execute:function(){}}}),System.register("editor",["app","dispatcher","enums/enums","grid","models/room","models/connector","views/roomView","views/connectorView","models/note","views/noteView","views/boxView","views/viewFactory","drawing/canvas","models/block","views/blockView","maps/zorkMap","io/mapJSON","maps/adventureMap","maps/castleofdoomMap","maps/hhg","maps/hobbitMap","controls/controls","util/rect"],function(t,e){"use strict";var c,d,p,u,h,m,f,y,n,a,b,g,o,r,s,i,l,v,k,C,S,w,D;e&&e.id;return{setters:[function(e){c=e},function(e){d=e},function(e){p=e},function(e){u=e},function(e){h=e},function(e){m=e},function(e){f=e},function(e){y=e},function(e){n=e},function(e){a=e},function(e){b=e},function(e){g=e},function(e){o=e},function(e){r=e},function(e){s=e},function(e){i=e},function(e){l=e},function(e){v=e},function(e){k=e},function(e){C=e},function(e){S=e},function(e){w=e},function(e){D=e}],execute:function(){function e(){var t=this;this.grid=new u.Grid,this.hover=null,this.copy=new Array,this.roomsPlaced=0,this.mouseX=-100,this.mouseY=-100,this.dragOriginX=0,this.dragOriginY=0,this.refreshAll=!0,this.resfreshAlways=!1,this.render=function(){t.mainCanvas.save(),t.bgCanvas.save(),t.clear(),t.bgCanvas.translate(Math.floor(c.App.bgHTMLCanvas.offsetWidth/2)+c.App.centerX,Math.floor(c.App.bgHTMLCanvas.offsetHeight/2)+c.App.centerY),t.bgCanvas.scale(c.App.zoom,c.App.zoom),t.mainCanvas.translate(Math.floor(c.App.mainHTMLCanvas.offsetWidth/2)+c.App.centerX,Math.floor(c.App.mainHTMLCanvas.offsetHeight/2)+c.App.centerY),t.mainCanvas.scale(c.App.zoom,c.App.zoom),t.renderViews(),t.views.forEach(function(e){e.drawHandles(t.mainCanvas,t.mouseX,t.mouseY,c.App.mouseMode==p.MouseMode.Connect?0:c.App.selection.size(),t.hover==e&&c.App.mouseMode!=p.MouseMode.Select)}),c.App.mouseMode==p.MouseMode.Select&&t.drawSelectionArea(),t.mainCanvas.restore(),t.bgCanvas.restore()},d.Dispatcher.subscribe(this),this.mainCanvas=new o.Canvas(c.App.mainHTMLCanvas.getContext("2d")),this.bgCanvas=new o.Canvas(c.App.bgHTMLCanvas.getContext("2d")),this.hitTestHtmlCanvas=document.getElementById("hittest"),this.hitTestCanvas=new o.Canvas(this.hitTestHtmlCanvas.getContext("2d")),this.views=new Array,window.addEventListener("resize",function(){t.resize()}),window.addEventListener("beforeunload",function(e){t.unload(e)}),c.App.mainHTMLCanvas.addEventListener("mousedown",function(e){t.canvasMouseDown(e)}),c.App.mainHTMLCanvas.addEventListener("mouseup",function(e){t.canvasMouseUp(e)}),c.App.mainHTMLCanvas.addEventListener("mousemove",function(e){t.canvasMouseMove(e)}),c.App.mainHTMLCanvas.addEventListener("wheel",function(e){t.canvasMouseWheel(e)}),c.App.mainHTMLCanvas.addEventListener("dblclick",function(e){t.canvasMouseDoubleClick(e)}),c.App.mainHTMLCanvas.addEventListener("contextmenu",function(e){t.canvasContextMenu(e)}),document.getElementById("control-center").addEventListener("click",function(){t.cmdCenterView()}),document.getElementById("control-zoomin").addEventListener("click",function(){t.cmdZoomIn()}),document.getElementById("control-zoomout").addEventListener("click",function(){t.cmdZoomOut()}),this.ctrlZoom=document.getElementById("control-zoom"),this.ctrlZoom.addEventListener("change",function(){t.cmdZoom()}),this.updateZoomPercentage(),c.App.mainHTMLCanvas.addEventListener("keyup",function(e){t.keyUp(e)}),this.resize(),this.makeTestMap(),this.refresh(!0)}e.prototype.refresh=function(e){void 0===e&&(e=!1),this.refreshAll=e,window.requestAnimationFrame(this.render)},e.prototype.keyUp=function(e){if(!e.ctrlKey&&!e.shiftKey)switch(e.key){case"a":this.cmdToggleOneWay();break;case"v":this.cmdReverseConnector();break;case"k":this.cmdToggleDarkness();break;case"r":this.cmdAddRoom();break;case"n":this.cmdAddNote();break;case"b":this.cmdAddBlock();break;case"Escape":this.cmdUnselectAll();break;case"Delete":this.cmdDelete();break;case"Insert":this.cmdCenterView();break;case"+":this.cmdZoomIn();break;case"-":this.cmdZoomOut();break;case"0":this.cmdZoomNormal();break;case"Enter":case"F2":this.cmdShowPanel();break;case"ArrowRight":this.moveCenter(1,0);break;case"ArrowLeft":this.moveCenter(-1,0);break;case"ArrowUp":this.moveCenter(0,-1);break;case"ArrowDown":this.moveCenter(0,1);break;case"PageUp":this.moveCenter(1,-1);break;case"PageDown":this.moveCenter(1,1);break;case"End":this.moveCenter(-1,1);break;case"Home":this.moveCenter(-1,-1)}if(e.ctrlKey)switch(e.key){case"a":this.cmdSelectAll();break;case"c":this.cmdCopySelection();break;case"v":this.cmdPaste();break;case"z":c.App.undo()}if(e.shiftKey)switch(e.key){case"ArrowRight":this.cmdNewRoomInDir(p.Direction.E);break;case"ArrowLeft":this.cmdNewRoomInDir(p.Direction.W);break;case"ArrowUp":this.cmdNewRoomInDir(p.Direction.N);break;case"ArrowDown":this.cmdNewRoomInDir(p.Direction.S);break;case"PageUp":this.cmdNewRoomInDir(p.Direction.NE);break;case"PageDown":this.cmdNewRoomInDir(p.Direction.SE);break;case"End":this.cmdNewRoomInDir(p.Direction.SW);break;case"Home":this.cmdNewRoomInDir(p.Direction.NW);break;case"Enter":this.cmdCenterView()}e.preventDefault()},e.prototype.notify=function(e,t){var n=this;if(e==p.AppEvent.Delete){c.App.selection.clear();for(var o=0;o<this.views.length;o++)if(this.views[o].getModel()==t){this.views.splice(o,1);break}this.refresh(!0)}e==p.AppEvent.Refresh&&(c.App.selection.unselectAll(),this.views.length=0,c.App.map.elements.forEach(function(e){n.views.push(g.ViewFactory.create(e))}),this.refresh(!0)),e==p.AppEvent.Redraw&&this.refresh(!0),e==p.AppEvent.Load&&(c.App.selection.unselectAll(),this.views.length=0,c.App.map.elements.forEach(function(e){n.views.push(g.ViewFactory.create(e))}),this.refresh(!0),this.cmdCenterView(),this.cmdZoomNormal(),c.App.header.title=c.App.map.title,c.App.header.content=c.App.author(c.App.map.author))},e.prototype.getParameterByName=function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},e.prototype.makeTestMap=function(){var e=null;switch(this.getParameterByName("map")){case"adventure":e=v.AdventureMap;break;case"castleofdoom":e=k.CastleofdoomMap;break;case"hhg":e=C.HitchhikersguideMap;break;case"hobbit":e=S.HobbitMap;break;case"zork":e=i.ZorkMap}null!=e&&(c.App.map=l.MapJSON.load(e.json),d.Dispatcher.notify(p.AppEvent.Load,null))},e.prototype.clear=function(){(this.refreshAll||this.resfreshAlways)&&(this.bgCanvas.fillStyle(c.App.map.settings.grid.background).fillRect(0,0,c.App.bgHTMLCanvas.offsetWidth,c.App.bgHTMLCanvas.offsetHeight),this.grid.draw(c.App.bgHTMLCanvas,this.bgCanvas),this.mainCanvas.clearRect(0,0,c.App.mainHTMLCanvas.width,c.App.mainHTMLCanvas.height))},Object.defineProperty(e.prototype,"selX",{get:function(){return Math.min(this.mouseX,this.selectPosX)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selY",{get:function(){return Math.min(this.mouseY,this.selectPosY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selW",{get:function(){return Math.abs(this.mouseX-this.selectPosX)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selH",{get:function(){return Math.abs(this.mouseY-this.selectPosY)},enumerable:!0,configurable:!0}),e.prototype.drawSelectionArea=function(){this.mainCanvas.strokeStyle(p.Values.COLOR_SELECTION_LINE).fillStyle(p.Values.COLOR_SELECTION_AREA).fillRect(this.selX,this.selY,this.selW,this.selH).strokeRect(this.selX,this.selY,this.selW,this.selH)},e.prototype.renderView=function(o){var r=this;if(this.resfreshAlways||!o.getModel().isChanged&&!this.refreshAll)this.resfreshAlways&&o.draw(this.mainCanvas,this.hover==o&&c.App.mouseMode!=p.MouseMode.Select);else{var i;if(!this.refreshAll&&(i=o.clear(this.mainCanvas))){this.mainCanvas.save();var e=new Path2D;e.rect(i.x,i.y,i.width,i.height),this.mainCanvas.clip(e),this.views.forEach(function(e){if(e!=o&&e instanceof s.BlockView){var t=e.getModel().isBackwardOf(o.getModel()),n=o.isIn(e.getModel().x,e.getModel().y,e.getModel().width,e.getModel().height);t&&(n||e.isIn(i.x,i.y,i.width,i.height))&&e.draw(r.mainCanvas,!1)}}),this.views.forEach(function(e){if(e!=o&&(e instanceof f.RoomView||e instanceof a.NoteView)){var t=e.getModel().isBackwardOf(o.getModel()),n=o.isIn(e.getModel().x,e.getModel().y,e.getModel().width,e.getModel().height);t&&(n||e.isIn(i.x,i.y,i.width,i.height))&&e.draw(r.mainCanvas,!1)}})}if(o.draw(this.mainCanvas,this.hover==o&&c.App.mouseMode!=p.MouseMode.Select),o.getModel().unChanged(),!this.refreshAll){var t=i||(o instanceof b.BoxView?new D.Rect(o.getModel().x,o.getModel().y,o.getModel().x+o.getModel().width,o.getModel().y+o.getModel().height):void 0);t&&(this.views.forEach(function(e){e!=o&&e instanceof s.BlockView&&e.isIn(t.x,t.y,t.width,t.height)&&o.getModel().isBackwardOf(e.getModel())&&e.draw(r.mainCanvas,!1)}),this.views.forEach(function(e){e!=o&&(e instanceof f.RoomView||e instanceof a.NoteView)&&e.isIn(t.x,t.y,t.width,t.height)&&o.getModel().isBackwardOf(e.getModel())&&e.draw(r.mainCanvas,!1)}),this.views.forEach(function(e){e!=o&&e instanceof y.ConnectorView&&e.isIn(t.x,t.y,t.width,t.height)&&e.draw(r.mainCanvas,!1)})),this.mainCanvas.restore()}}},e.prototype.renderViews=function(t){var n=this;void 0===t&&(t=void 0),this.views.forEach(function(e){e instanceof s.BlockView&&e!=t&&n.renderView(e)}),this.views.forEach(function(e){(e instanceof f.RoomView||e instanceof a.NoteView)&&e!=t&&n.renderView(e)}),this.views.forEach(function(e){e instanceof y.ConnectorView&&e!=t&&n.renderView(e)})},e.prototype.hitTest=function(e,t,n){return this.hitTestCanvas.save().clearRect(0,0,1,1).scale(c.App.zoom,c.App.zoom).translate(-e,-t),n.drawSimple(this.hitTestCanvas,this.hover==n),this.hitTestCanvas.restore(),0<this.hitTestCanvas.getImageData(0,0,1,1).data[3]},e.prototype.resize=function(){c.App.mainHTMLCanvas.setAttribute("width",c.App.mainHTMLCanvas.offsetWidth.toString()),c.App.mainHTMLCanvas.setAttribute("height",c.App.mainHTMLCanvas.offsetHeight.toString()),c.App.bgHTMLCanvas.setAttribute("width",c.App.bgHTMLCanvas.offsetWidth.toString()),c.App.bgHTMLCanvas.setAttribute("height",c.App.bgHTMLCanvas.offsetHeight.toString()),d.Dispatcher.notify(p.AppEvent.Refresh,null)},e.prototype.unload=function(e){var t="You will lose all unsaved changes. Proceed?";return(e||window.event).returnValue=t},e.prototype.findObjCoordinates=function(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);return{x:t,y:n}},e.prototype.findMouseCoordinates=function(e){var t=this.findObjCoordinates(c.App.mainHTMLCanvas),n=t.x,o=t.y;return{x:Math.floor((e.clientX-n-c.App.mainHTMLCanvas.offsetWidth/2-c.App.centerX)/c.App.zoom),y:Math.floor((e.clientY-o-c.App.mainHTMLCanvas.offsetHeight/2-c.App.centerY)/c.App.zoom)}},e.prototype.findViewByCoordinates=function(e,t){for(var n=0;n<this.views.length;n++)if(!(this.views[n]instanceof s.BlockView)&&this.hitTest(e,t,this.views[n]))return this.views[n];for(n=0;n<this.views.length;n++)if(this.views[n]instanceof s.BlockView&&this.hitTest(e,t,this.views[n]))return this.views[n]},e.prototype.canvasMouseDoubleClick=function(e){var t=this.findMouseCoordinates(e),n=t.x,o=t.y,r=this.findViewByCoordinates(n,o);void 0!==r&&(c.App.selection.unselectAll(),c.App.selection.add([r]),r.select(),window.getSelection().removeAllRanges(),this.cmdShowPanel())},e.prototype.canvasContextMenu=function(e){e.preventDefault()},e.prototype.canvasMouseDown=function(e){var t=this.findMouseCoordinates(e),n=t.x,o=t.y;if(2==e.which||3==e.which)return c.App.mouseMode=p.MouseMode.Scroll,this.scrollOffsetX=e.clientX,this.scrollOffsetY=e.clientY,this.scrollOriginX=c.App.centerX,this.scrollOriginY=c.App.centerY,void(c.App.mainHTMLCanvas.style.cursor="move");if(c.App.mouseMode==p.MouseMode.AddRoom)return this.cmdAddRoom(),void d.Dispatcher.notify(p.AppEvent.Added,null);if(c.App.mouseMode==p.MouseMode.AddNote)return this.cmdAddNote(),void d.Dispatcher.notify(p.AppEvent.Added,null);if(c.App.mouseMode==p.MouseMode.AddBlock)return this.cmdAddBlock(),void d.Dispatcher.notify(p.AppEvent.Added,null);var r=this.findViewByCoordinates(n,o);if(void 0===r)e.ctrlKey||c.App.selection.unselectAll(),c.App.mouseMode=p.MouseMode.Select,this.selectPosX=n,this.selectPosY=o,this.refresh(!0);else if(c.App.selection.isSingle()&&c.App.selection.first()instanceof y.ConnectorView&&void 0!==c.App.selection.first().isConnectorHandle(n,o))c.App.pushUndo(),c.App.mouseMode=p.MouseMode.Connect,this.connectorHandle=c.App.selection.first().isConnectorHandle(n,o),c.App.mainHTMLCanvas.style.cursor="crosshair",this.refresh();else if(r instanceof b.BoxView&&c.App.selection.isSingle()&&c.App.selection.first()==r&&void 0!==r.isResizeHandle(n,o))c.App.pushUndo(),c.App.mouseMode=p.MouseMode.Resize,this.roomHandle=r.isResizeHandle(n,o),r.save(),c.App.mainHTMLCanvas.style.cursor=p.Direction.toCursor(this.roomHandle),this.refresh();else if(r instanceof f.RoomView&&c.App.selection.isEmpty()&&null!=r.isConnectorHandle(n,o)){c.App.pushUndo(),c.App.mouseMode=p.MouseMode.Connect;var i=r.isConnectorHandle(n,o),a=new m.Connector(c.App.map.settings);c.App.map.add(a),a.dockStart=r.room,a.startDir=i,a.endDir=i,a.endX=n,a.endY=o;var s=g.ViewFactory.create(a);this.views.push(s),c.App.selection.add([s]),this.connectorHandle=p.ConnectorHandle.End,c.App.mainHTMLCanvas.style.cursor="crosshair",this.refresh()}else e.ctrlKey?r.isSelected()||c.App.selection.add([r]):r.isSelected()||c.App.selection.select(r),this.refresh(!0),c.App.mainHTMLCanvas.style.cursor="pointer",c.App.pushUndo(),c.App.mouseMode=p.MouseMode.Drag,this.dragOriginX=n,this.dragOriginY=o,c.App.selection.get().forEach(function(e){e instanceof b.BoxView&&e.save()})},e.prototype.canvasMouseMove=function(e){var t=this;c.App.mouseMode!=p.MouseMode.None&&d.Dispatcher.notify(p.AppEvent.MouseMove,null);var n=this.findMouseCoordinates(e),o=n.x,r=n.y;this.mouseX=o,this.mouseY=r;var i=void 0;switch(c.App.mouseMode!=p.MouseMode.Scroll&&(i=this.findViewByCoordinates(o,r),c.App.mainHTMLCanvas.style.cursor=i?"pointer":"default",i&&i!=this.hover?(this.hover&&this.hover.movingSelectable&&this.hover.getModel().forceChanged(),i.movingSelectable&&i.getModel().forceChanged(),this.hover=i,this.refresh()):!i&&this.hover?(this.hover.movingSelectable&&this.hover.getModel().forceChanged(),this.hover=null,this.refresh()):i&&i==this.hover&&this.refresh()),c.App.mouseMode){case p.MouseMode.Scroll:c.App.centerX=this.scrollOriginX+(e.clientX-this.scrollOffsetX),c.App.centerY=this.scrollOriginY+(e.clientY-this.scrollOffsetY),this.refresh(!0);break;case p.MouseMode.Drag:c.App.selection.get().forEach(function(e){e instanceof b.BoxView&&(e.getModel().x=u.Grid.snap(e.oldX-t.dragOriginX+o),e.getModel().y=u.Grid.snap(e.oldY-t.dragOriginY+r))}),this.refresh(!0);break;case p.MouseMode.Select:this.refresh(!0);break;case p.MouseMode.Resize:var a=c.App.selection.first();a instanceof b.BoxView&&(a.resize(this.roomHandle,u.Grid.snap(o),u.Grid.snap(r)),this.refresh(!0));break;case p.MouseMode.Connect:var s=c.App.selection.first();if(i instanceof f.RoomView){var l=i.isConnectorHandle(o,r);void 0!==l&&(this.connectorHandle==p.ConnectorHandle.Start?(s.connector.dockStart=i.room,s.connector.startDir=l):(s.connector.dockEnd=i.room,s.connector.endDir=l))}else this.connectorHandle==p.ConnectorHandle.Start?(s.connector.dockStart=null,s.connector.startX=u.Grid.snap(o),s.connector.startY=u.Grid.snap(r)):(s.connector.dockEnd=null,s.connector.endX=u.Grid.snap(o),s.connector.endY=u.Grid.snap(r));this.refresh(!0)}},e.prototype.canvasMouseUp=function(e){switch(c.App.mouseMode){case p.MouseMode.Select:c.App.selection.unselectAll();for(var t=0;t<this.views.length;t++)this.views[t].isIn(this.selX,this.selY,this.selW,this.selH)&&c.App.selection.add([this.views[t]]);this.refresh(!0)}c.App.mainHTMLCanvas.style.cursor="default",c.App.mouseMode=p.MouseMode.None},e.prototype.canvasMouseWheel=function(e){e.deltaY<0&&this.cmdZoomIn(),0<e.deltaY&&this.cmdZoomOut()},e.prototype.cmdSelectAll=function(){c.App.selection.unselectAll(),c.App.selection.add(this.views),this.refresh(!0)},e.prototype.cmdShowPanel=function(){c.App.selection.isSingle()&&d.Dispatcher.notify(p.AppEvent.More,c.App.selection.first().getModel())},e.prototype.cmdReverseConnector=function(){if(c.App.selection.isSingle()&&c.App.selection.first()instanceof y.ConnectorView){var e=c.App.selection.first().getModel();e.isDoubleDocked()&&(c.App.pushUndo(),e.reverse(),this.refresh(!0))}},e.prototype.cmdToggleDarkness=function(){if(c.App.selection.isSingle()&&c.App.selection.first()instanceof f.RoomView){var e=c.App.selection.first().getModel();c.App.pushUndo(),e.dark=!e.dark,this.refresh(!0)}},e.prototype.cmdDelete=function(){if(!c.App.selection.isEmpty()){c.App.pushUndo();var t=new Array;c.App.selection.get().forEach(function(e){t.push(e)}),t.forEach(function(e){e.getModel().delete()}),this.refresh(!0)}},e.prototype.cmdUnselectAll=function(){c.App.selection.isEmpty()||(c.App.selection.unselectAll(),this.refresh(!0))},e.prototype.cmdToggleOneWay=function(){if(c.App.selection.isSingle()&&c.App.selection.first()instanceof y.ConnectorView){var e=c.App.selection.first().getModel();c.App.pushUndo(),e.oneWay=!e.oneWay,this.refresh(!0)}},e.prototype.cmdNewRoomInDir=function(e){if(c.App.selection.isSingle()&&c.App.selection.first()instanceof f.RoomView){var t=c.App.selection.first().getModel();if(!t.hasConnection(e)){c.App.pushUndo();var n=new h.Room(c.App.map.settings);c.App.map.add(n);var o=p.Direction.toVector(e),r=o.x,i=o.y;n.x=t.x+t.width/2+r*t.width+2*c.App.map.settings.grid.size*r-n.width/2,n.y=t.y+t.height/2+i*t.height+2*c.App.map.settings.grid.size*i-n.height/2,this.views.push(g.ViewFactory.create(n));var a=new m.Connector(c.App.map.settings);c.App.map.add(a),a.dockStart=t,a.dockEnd=n,a.startDir=e,a.endDir=p.Direction.opposite(e),this.views.push(g.ViewFactory.create(a)),this.refresh()}}},e.prototype.moveCenter=function(e,t){c.App.centerX+=e*c.App.map.settings.grid.size,c.App.centerY+=t*c.App.map.settings.grid.size,this.refresh(!0)},e.prototype.cmdCopySelection=function(){var l=this;this.copy.length=0;var n=!1,o=0,r=0;c.App.selection.get().forEach(function(e){if(!(e instanceof y.ConnectorView)){var t=e.getModel().clone();l.copy.push(t),n||(n=!0,o=t.x,r=t.y),t.x=-c.App.centerX+t.x-o,t.y=-c.App.centerY+t.y-r}}),c.App.selection.get().forEach(function(e){if(e instanceof y.ConnectorView){for(var t=e.getModel(),n=-1,o=-1,r=0,i=0;i<c.App.selection.size();i++)if(c.App.selection.get()[i]instanceof f.RoomView){var a=c.App.selection.get()[i];t.dockStart==a.getModel()&&(n=r),t.dockEnd==a.getModel()&&(o=r),r++}if(0<=n&&0<=o){var s=t.clone();s.dockStart=l.copy[n],s.dockEnd=l.copy[o],l.copy.push(s)}}})},e.prototype.cmdPaste=function(){var l=this;c.App.pushUndo(),c.App.selection.unselectAll();var d=this.views.length;this.copy.forEach(function(e){if(!(e instanceof m.Connector)){var t=e.clone();t.x+=u.Grid.snap(l.mouseX),t.y+=u.Grid.snap(l.mouseY),c.App.map.add(t);var n=g.ViewFactory.create(t);l.views.push(n),c.App.selection.add([n])}}),this.copy.forEach(function(e){if(e instanceof m.Connector){for(var t=e,n=0,o=0,r=0,i=0;i<l.copy.length;i++)l.copy[i]instanceof h.Room&&(t.dockStart==l.copy[i]&&(n=d+r),t.dockEnd==l.copy[i]&&(o=d+r),r++);var a=t.clone();c.App.map.add(a),a.dockStart=l.views[n].getModel(),a.dockEnd=l.views[o].getModel();var s=g.ViewFactory.create(a);l.views.push(s),c.App.selection.add([s])}}),this.refresh(!0)},e.prototype.updateZoomPercentage=function(){this.ctrlZoom.value=Math.floor(100*c.App.zoom)+"%"},e.prototype.cmdZoom=function(){var e=this.ctrlZoom.value;e.replace("%"," ");var t=parseFloat(e);isNaN(t)||(c.App.zoom=t/100,10<=c.App.zoom&&(c.App.zoom=10),c.App.zoom<=.1&&(c.App.zoom=.1)),this.updateZoomPercentage(),this.refresh(!0)},e.prototype.cmdZoomIn=function(){c.App.zoom<1?c.App.zoom=c.App.zoom*p.Values.ZOOM_FRACTION:c.App.zoom+=p.Values.ZOOM_ADDITIVE,10<=c.App.zoom&&(c.App.zoom=10),c.App.zoom<=.1&&(c.App.zoom=.1),this.updateZoomPercentage(),this.refresh(!0)},e.prototype.cmdZoomOut=function(){c.App.zoom<=1?c.App.zoom=c.App.zoom/p.Values.ZOOM_FRACTION:c.App.zoom-=p.Values.ZOOM_ADDITIVE,10<=c.App.zoom&&(c.App.zoom=10),c.App.zoom<=.1&&(c.App.zoom=.1),this.updateZoomPercentage(),this.refresh(!0)},e.prototype.cmdZoomNormal=function(){c.App.zoom=1,this.updateZoomPercentage(),this.refresh(!0)},e.prototype.cmdCenterView=function(){c.App.centerX=0,c.App.centerY=0,this.refresh(!0)},e.prototype.cmdAddRoom=function(){c.App.pushUndo();var e=new h.Room(c.App.map.settings);c.App.map.add(e),e.x=u.Grid.snap(this.mouseX),e.y=u.Grid.snap(this.mouseY),this.views.push(g.ViewFactory.create(e)),0==this.roomsPlaced&&w.IdToast.toast("Room details","You've placed your first room. You can edit its <b>details</b> by clicking it once (room popup) or double-clicking it (room details panel)."),1==this.roomsPlaced&&w.IdToast.toast("Connecting rooms","Now that you've placed multiple rooms, you can create <b>connections</b> between them. Select a source room and create a connection to a target room by dragging a line from the little connector circles."),this.roomsPlaced++,this.refresh()},e.prototype.cmdAddNote=function(){c.App.pushUndo();var e=new n.Note(c.App.map.settings);c.App.map.add(e),e.x=u.Grid.snap(this.mouseX),e.y=u.Grid.snap(this.mouseY),this.views.push(g.ViewFactory.create(e)),this.refresh()},e.prototype.cmdAddBlock=function(){c.App.pushUndo();var e=new r.Block(c.App.map.settings);c.App.map.add(e),e.x=u.Grid.snap(this.mouseX),e.y=u.Grid.snap(this.mouseY),this.views.push(g.ViewFactory.create(e)),this.refresh()},t("Editor",e)}}}),System.register("popups/popup",["app"],function(t,e){"use strict";var r;e&&e.id;return{setters:[function(e){r=e}],execute:function(){function e(e,t,n){this.id=e,this.elem=document.getElementById(e),this.elem.innerHTML=t(n)}e.prototype.showAt=function(e,t){this.elem.style.left=r.App.mainHTMLCanvas.offsetWidth/2+r.App.centerX+e*r.App.zoom+"px",this.elem.style.top=r.App.mainHTMLCanvas.offsetHeight/2+r.App.centerY+t*r.App.zoom-32+"px",this.elem.style.display="flex";for(var n=this.elem.querySelectorAll(".popup-overlay"),o=0;o<n.length;o++)n[o].style.display="none"},e.prototype.hide=function(){this.elem.style.display="none"},t("Popup",e)}}}),System.register("popups/blockPopup/blockPopup",["app","dispatcher","enums/enums","views/blockView","popups/popups","controls/controls"],function(n,e){"use strict";var o,r,i,a,s,l;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){function e(){var e=t.call(this,"blockpopup",Handlebars.templates.blockPopup,{colors:i.Values.COLORS_STANDARD})||this;return r.Dispatcher.subscribe(e),new l.IdPopup(".js-fill",e.elem),new l.IdPopup(".js-line",e.elem),new l.IdPopup(".js-position",e.elem),new l.IdPopup(".js-delete",e.elem).addEventListener("click",function(){e.delete()}),new l.IdPopup(".js-more",e.elem).addEventListener("click",function(){e.showMore()}),e.ctrlColor=new l.IdQuickColor(".js-color",e.elem).addEventListener("change",function(){e.block.fillColor=e.ctrlColor.value}),e.ctrlLineStyle=new l.IdLineStyle(".js-linestyle",e.elem).addEventListener("change",function(){e.block.lineStyle=e.ctrlLineStyle.value}),e.ctrlLinewidth=new l.IdRange(".js-linewidth",e.elem).addEventListener("input",function(){e.block.lineWidth=e.ctrlLinewidth.value}),e.elem.querySelector(".js-front").addEventListener("click",function(){e.block.bringToFront(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-forward").addEventListener("click",function(){e.block.bringForward(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-backward").addEventListener("click",function(){e.block.sendBackward(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-back").addEventListener("click",function(){e.block.sendToBack(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e}var t;t=s.Popup,__extends(e,t),e.prototype.notify=function(e,t){e!=i.AppEvent.MouseMove&&e!=i.AppEvent.Select||this.toggle()},e.prototype.delete=function(){o.App.pushUndo(),this.block.delete(),this.toggle()},e.prototype.showMore=function(){r.Dispatcher.notify(i.AppEvent.More,this.block)},e.prototype.toggle=function(){o.App.selection.isSingle()&&o.App.selection.first()instanceof a.BlockView&&o.App.mouseMode==i.MouseMode.None?(this.block=o.App.selection.first().getModel(),this.showAt(this.block.x,this.block.y),this.ctrlLineStyle.value=this.block.lineStyle,this.ctrlLinewidth.value=this.block.lineWidth):this.hide()},n("BlockPopup",e)}}}),System.register("popups/connectorPopup/connectorPopup",["app","dispatcher","enums/enums","views/connectorView","popups/popups","controls/controls"],function(n,e){"use strict";var o,r,i,a,s,l;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){function e(){var e=t.call(this,"connectorpopup",Handlebars.templates.connectorPopup,{colors:i.Values.COLORS_STANDARD})||this;return r.Dispatcher.subscribe(e),new l.IdPopup(".js-fill",e.elem),new l.IdPopup(".js-line",e.elem),new l.IdPopup(".js-basic",e.elem),new l.IdPopup(".js-delete",e.elem).addEventListener("click",function(){e.delete()}),new l.IdPopup(".js-more",e.elem).addEventListener("click",function(){e.showMore()}),e.ctrlName=new l.IdInput(".js-name",e.elem).addEventListener("input",function(){e.connector.name=e.ctrlName.value}),e.ctrlColor=new l.IdQuickColor(".js-color",e.elem).addEventListener("change",function(){e.connector.color=e.ctrlColor.value}),e.ctrlLineStyle=new l.IdLineStyle(".js-linestyle",e.elem).addEventListener("change",function(){e.connector.lineStyle=e.ctrlLineStyle.value}),e.ctrlLinewidth=new l.IdRange(".js-linewidth",e.elem).addEventListener("input",function(){e.connector.lineWidth=e.ctrlLinewidth.value}),e}var t;t=s.Popup,__extends(e,t),e.prototype.notify=function(e,t){e!=i.AppEvent.MouseMove&&e!=i.AppEvent.Select||this.toggle()},e.prototype.delete=function(){o.App.pushUndo(),this.connector.delete(),this.toggle()},e.prototype.showMore=function(){r.Dispatcher.notify(i.AppEvent.More,this.connector)},e.prototype.toggle=function(){if(o.App.selection.isSingle()&&o.App.selection.first()instanceof a.ConnectorView&&o.App.mouseMode==i.MouseMode.None){this.connector=o.App.selection.first().getModel();var e=this.connector.dockStart?this.connector.dockStart.x:this.connector.startX,t=this.connector.dockStart?this.connector.dockStart.y:this.connector.startY;this.showAt(e,t),this.ctrlName.value=this.connector.name,this.ctrlLineStyle.value=this.connector.lineStyle,this.ctrlLinewidth.value=this.connector.lineWidth}else this.hide()},n("ConnectorPopup",e)}}}),System.register("popups/notePopup/notePopup",["app","dispatcher","enums/enums","views/noteView","popups/popups","controls/controls"],function(n,e){"use strict";var o,r,i,a,s,l;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){function e(){var e=t.call(this,"notepopup",Handlebars.templates.notePopup,{colors:i.Values.COLORS_STANDARD})||this;return r.Dispatcher.subscribe(e),new l.IdPopup(".js-basic",e.elem),new l.IdPopup(".js-fill",e.elem),new l.IdPopup(".js-line",e.elem),new l.IdPopup(".js-position",e.elem),new l.IdPopup(".js-delete",e.elem).addEventListener("click",function(){e.delete()}),new l.IdPopup(".js-more",e.elem).addEventListener("click",function(){e.showMore()}),e.ctrlText=new l.IdInput(".js-text",e.elem).addEventListener("input",function(){e.note.text=e.ctrlText.value}),e.ctrlColor=new l.IdQuickColor(".js-color",e.elem).addEventListener("change",function(){e.note.fillColor=e.ctrlColor.value}),e.ctrlLineStyle=new l.IdLineStyle(".js-linestyle",e.elem).addEventListener("change",function(){e.note.lineStyle=e.ctrlLineStyle.value}),e.ctrlLinewidth=new l.IdRange(".js-linewidth",e.elem).addEventListener("input",function(){e.note.lineWidth=e.ctrlLinewidth.value}),e.elem.querySelector(".js-front").addEventListener("click",function(){e.note.bringToFront(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-forward").addEventListener("click",function(){e.note.bringForward(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-backward").addEventListener("click",function(){e.note.sendBackward(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-back").addEventListener("click",function(){e.note.sendToBack(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e}var t;t=s.Popup,__extends(e,t),e.prototype.notify=function(e,t){e!=i.AppEvent.MouseMove&&e!=i.AppEvent.Select||this.toggle()},e.prototype.delete=function(){o.App.pushUndo(),this.note.delete(),this.toggle()},e.prototype.showMore=function(){r.Dispatcher.notify(i.AppEvent.More,this.note)},e.prototype.toggle=function(){o.App.selection.isSingle()&&o.App.selection.first()instanceof a.NoteView&&o.App.mouseMode==i.MouseMode.None?(this.note=o.App.selection.first().getModel(),this.showAt(this.note.x,this.note.y),this.ctrlText.value=this.note.text,this.ctrlLineStyle.value=this.note.lineStyle,this.ctrlLinewidth.value=this.note.lineWidth):this.hide()},n("NotePopup",e)}}}),System.register("popups/roomPopup/roomPopup",["app","dispatcher","enums/enums","views/roomView","popups/popups","controls/controls"],function(n,e){"use strict";var o,r,i,a,s,l;e&&e.id;return{setters:[function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e}],execute:function(){function e(){var e=t.call(this,"roompopup",Handlebars.templates.roomPopup,{colors:i.Values.COLORS_STANDARD})||this;return r.Dispatcher.subscribe(e),new l.IdPopup(".js-basic",e.elem),new l.IdPopup(".js-fill",e.elem),new l.IdPopup(".js-border",e.elem),new l.IdPopup(".js-position",e.elem),new l.IdPopup(".js-delete",e.elem).addEventListener("click",function(){e.delete()}),new l.IdPopup(".js-more",e.elem).addEventListener("click",function(){e.showMore()},!1),e.elem.querySelector(".js-front").addEventListener("click",function(){e.room.bringToFront(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-forward").addEventListener("click",function(){e.room.bringForward(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-backward").addEventListener("click",function(){e.room.sendBackward(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.elem.querySelector(".js-back").addEventListener("click",function(){e.room.sendToBack(),r.Dispatcher.notify(i.AppEvent.Refresh,null)}),e.ctrlName=new l.IdInput(".js-name",e.elem).addEventListener("input",function(){e.room.name=e.ctrlName.value}),e.ctrlSubtitle=new l.IdInput(".js-subtitle",e.elem).addEventListener("input",function(){e.room.subtitle=e.ctrlSubtitle.value}),e.ctrlColor=new l.IdQuickColor(".js-color",e.elem).addEventListener("change",function(){e.room.fillColor=e.ctrlColor.value}),e.ctrlLineStyle=new l.IdLineStyle(".js-linestyle",e.elem).addEventListener("change",function(){e.room.lineStyle=e.ctrlLineStyle.value}),e.ctrlLinewidth=new l.IdRange(".js-linewidth",e.elem).addEventListener("input",function(){e.room.lineWidth=e.ctrlLinewidth.value}),e}var t;t=s.Popup,__extends(e,t),e.prototype.notify=function(e,t){e!=i.AppEvent.MouseMove&&e!=i.AppEvent.Select||this.toggle()},e.prototype.delete=function(){o.App.pushUndo(),this.room.delete(),this.toggle()},e.prototype.showMore=function(){r.Dispatcher.notify(i.AppEvent.More,this.room)},e.prototype.toggle=function(){o.App.selection.isSingle()&&o.App.selection.first()instanceof a.RoomView&&o.App.mouseMode==i.MouseMode.None?(this.room=o.App.selection.first().getModel(),this.showAt(this.room.x,this.room.y),this.ctrlLineStyle.value=this.room.lineStyle,this.ctrlLinewidth.value=this.room.lineWidth,this.ctrlName.value=this.room.name,this.ctrlSubtitle.value=this.room.subtitle):this.hide()},n("RoomPopup",e)}}}),System.register("popups/popups",["popups/popup","popups/blockPopup/blockPopup","popups/connectorPopup/connectorPopup","popups/notePopup/notePopup","popups/roomPopup/roomPopup"],function(o,e){"use strict";e&&e.id;function t(e){var t={};for(var n in e)"default"!==n&&(t[n]=e[n]);o(t)}return{setters:[function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)},function(e){t(e)}],execute:function(){}}}),System.register("selection",["dispatcher","enums/enums"],function(t,e){"use strict";var n,o;e&&e.id;return{setters:[function(e){n=e},function(e){o=e}],execute:function(){function e(){this.list=new Array}e.prototype.isEmpty=function(){return 0==this.list.length},e.prototype.isSingle=function(){return 1==this.list.length},e.prototype.isMultiple=function(){return 1<this.list.length},e.prototype.size=function(){return this.list.length},e.prototype.first=function(){return this.list[0]},e.prototype.get=function(){return this.list},e.prototype.clear=function(){this.list.length=0},e.prototype.unselectAll=function(){this.list.forEach(function(e){e.unselect()}),this.list.length=0,n.Dispatcher.notify(o.AppEvent.Select,null)},e.prototype.selectAll=function(){this.list.forEach(function(e){e.select()})},e.prototype.select=function(e){this.unselectAll(),this.add([e])},e.prototype.add=function(e){var t=this;e.forEach(function(e){e.select(),t.list.push(e)}),0<e.length&&n.Dispatcher.notify(o.AppEvent.Select,e[0].getModel())},t("Selection",e)}}}),System.register("controls/header",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){function e(e,t){this.elem=document.getElementById("app-header"),this._title=this.elem.querySelector("#title"),this._content=this.elem.querySelector("#content"),this.title=e,this.content=t}Object.defineProperty(e.prototype,"title",{get:function(){return this._title.innerHTML},set:function(e){this._title.innerHTML=e||"Trizbort.io"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content.innerHTML},set:function(e){this._content.innerHTML=e||""},enumerable:!0,configurable:!0}),t("Header",e)}}}),System.register("app",["enums/Values","models/map","dispatcher","enums/enums","editor","controls/controls","popups/popups","panels/panels","io/mapJSON","selection","controls/header"],function(t,e){"use strict";var n,o,r,i,a,s,l,d,c,p,u;e&&e.id;return{setters:[function(e){n=e},function(e){o=e},function(e){r=e},function(e){i=e},function(e){a=e},function(e){s=e},function(e){l=e},function(e){d=e},function(e){c=e},function(e){p=e},function(e){u=e}],execute:function(){function e(){}e.initialize=function(){e.mainHTMLCanvas=document.getElementById("main-canvas"),e.bgHTMLCanvas=document.getElementById("bg-canvas"),e.selection=new p.Selection,e.createComponents(),s.Tabs.initialize()},e.createComponents=function(){new a.Editor,new d.RenderPanel,new d.MapPanel,new d.MenuPanel,new d.NotePanel,new l.NotePopup,new d.ToolPanel,new d.BlockPanel,new l.RoomPopup,new d.RoomPanel,new l.BlockPopup,new d.ConnectorPanel,new l.ConnectorPopup,s.IdToast.toast("Welcome to Trizbort.io!","To start building your map, click the <b>room icon</b> in the left-hand bar and click anywhere on the map to place your first room.")},e.pushUndo=function(){this.undoStack.push(c.MapJSON.save(this.map)),100<this.undoStack.length&&this.undoStack.shift()},e.undo=function(){if(0!=this.undoStack.length){var e=this.undoStack.pop();this.map=c.MapJSON.load(e),r.Dispatcher.notify(i.AppEvent.Refresh,null)}},e.author=function(e){return e?"A map by "+e:""},e.getNewViewId=function(){return++this.viewID},e.map=new o.Map,e.zoom=1,e.centerX=0,e.centerY=0,e.mouseMode=i.MouseMode.None,e.undoStack=new Array,e.header=new u.Header,e.viewID=n.Values.VIEWS_FIRSTID,t("App",e)}}}),function(){var e=Handlebars.template,t=Handlebars.templates=Handlebars.templates||{};t.alan2=e({1:function(e,t,n,o,r,i,a){var s,l=n.helperMissing;return"LOCATION "+e.escapeExpression((n.className||t&&t.className||l).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))+" NAME "+(null!=(s=e.lambda(null!=t?t.name:t,t))?s:"")+"\n"+(null!=(s=n.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(2,r,0,i,a),inverse:e.noop,data:r}))?s:"")+(null!=(s=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(4,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"END LOCATION.\n"+(null!=(s=n.if.call(t,(n.isStartRoom||t&&t.isStartRoom||l).call(t,t,{name:"isStartRoom",hash:{},data:r}),{name:"if",hash:{},fn:e.program(6,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"+(null!=(s=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(8,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"},2:function(e,t,n,o,r){var i;return'  DESCRIPTION\n    "'+(null!=(i=e.lambda(null!=t?t.description:t,t))?i:"")+'"\n'},4:function(e,t,n,o,r){var i,a=n.helperMissing,s=e.escapeExpression;return"  EXIT "+s((n.dirToStr||t&&t.dirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}))+" TO "+s((n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.room:t)?i.name:i,{name:"className",hash:{},data:r}))+".\n"},6:function(e,t,n,o,r){var i;return"START AT "+(null!=(i=(n.className||t&&t.className||n.helperMissing).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))?i:"")+".\n"},8:function(e,t,n,o,r,i,a){var s,l=n.helperMissing;return"OBJECT "+e.escapeExpression((n.className||t&&t.className||l).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))+" NAME "+(null!=(s=(n.objName||t&&t.objName||l).call(t,null!=t?t.name:t,{name:"objName",hash:{},data:r}))?s:"")+" AT "+(null!=(s=(n.className||t&&t.className||l).call(t,null!=a[1]?a[1].name:a[1],{name:"className",hash:{},data:r}))?s:"")+"\n"+(null!=(s=n.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(2,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"END OBJECT.\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s;return null!=(s=n.each.call(t,null!=(s=null!=t?t.map:t)?s.rooms:s,{name:"each",hash:{},fn:e.program(1,r,0,i,a),inverse:e.noop,data:r}))?s:""},useData:!0,useDepths:!0}),t.alan3=e({1:function(e,t,n,o,r,i,a){var s,l=n.helperMissing;return"The "+(null!=(s=(n.className||t&&t.className||l).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))?s:"")+" Isa location\n  Name '"+(null!=(s=e.lambda(null!=t?t.name:t,t))?s:"")+"'\n"+(null!=(s=n.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(2,r,0,i,a),inverse:e.noop,data:r}))?s:"")+(null!=(s=n.if.call(t,null!=t?t.dark:t,{name:"if",hash:{},fn:e.program(4,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"+(null!=(s=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(6,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"End The "+(null!=(s=(n.className||t&&t.className||l).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))?s:"")+".\n\n"+(null!=(s=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(8,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"},2:function(e,t,n,o,r){var i;return'  Description\n    "'+(null!=(i=e.lambda(null!=t?t.description:t,t))?i:"")+'"\n'},4:function(e,t,n,o,r){return"Is not lit."},6:function(e,t,n,o,r){var i,a=n.helperMissing;return"  Exit "+e.escapeExpression((n.dirToStr||t&&t.dirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}))+" To "+(null!=(i=(n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.room:t)?i.name:i,{name:"className",hash:{},data:r}))?i:"")+".\n"},8:function(e,t,n,o,r,i,a){var s;return null!=(s=e.invokePartial(o.alan3Object,t,{name:"alan3Object",hash:{location:a[1],object:t},data:r,helpers:n,partials:o,decorators:e.decorators}))?s:""},10:function(e,t,n,o,r){var i;return"Start at "+(null!=(i=(n.className||t&&t.className||n.helperMissing).call(t,null!=(i=null!=(i=null!=t?t.map:t)?i.startRoom:i)?i.name:i,{name:"className",hash:{},data:r}))?i:"")+".\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s;return(null!=(s=n.each.call(t,null!=(s=null!=t?t.map:t)?s.rooms:s,{name:"each",hash:{},fn:e.program(1,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"+(null!=(s=n.if.call(t,null!=(s=null!=t?t.map:t)?s.startRoom:s,{name:"if",hash:{},fn:e.program(10,r,0,i,a),inverse:e.noop,data:r}))?s:"")},usePartial:!0,useData:!0,useDepths:!0}),t.alan3Object=e({1:function(e,t,n,o,r){var i;return'  Description\n    "'+(null!=(i=e.lambda(null!=(i=null!=t?t.object:t)?i.description:i,t))?i:"")+'"\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i,a=n.helperMissing;return"The "+(null!=(i=(n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.object:t)?i.name:i,{name:"className",hash:{},data:r}))?i:"")+" Isa object At "+(null!=(i=(n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.location:t)?i.name:i,{name:"className",hash:{},data:r}))?i:"")+"\n  Name "+(null!=(i=(n.objName||t&&t.objName||a).call(t,null!=(i=null!=t?t.object:t)?i.name:i,{name:"objName",hash:{},data:r}))?i:"")+"\n"+(null!=(i=n.if.call(t,null!=(i=null!=t?t.object:t)?i.description:i,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+"End The "+(null!=(i=(n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.object:t)?i.name:i,{name:"className",hash:{},data:r}))?i:"")+".\n"},useData:!0}),t.inform7=e({1:function(e,t,n,o,r){var i;return null!=(i=e.lambda(null!=(i=null!=t?t.map:t)?i.title:i,t))?i:""},3:function(e,t,n,o,r){return"Untitled Adventure"},5:function(e,t,n,o,r){var i;return'by "'+(null!=(i=e.lambda(null!=(i=null!=t?t.map:t)?i.author:i,t))?i:"")+'"'},7:function(e,t,n,o,r,i,a){var s,l=n.helperMissing;return"Part "+(null!=(s=(n.validName||t&&t.validName||l).call(t,null!=t?t.name:t,{name:"validName",hash:{},data:r}))?s:"")+"\n\nThere is a room called "+(null!=(s=(n.validName||t&&t.validName||l).call(t,null!=t?t.name:t,{name:"validName",hash:{},data:r}))?s:"")+". "+(null!=(s=n.if.call(t,null!=t?t.dark:t,{name:"if",hash:{},fn:e.program(8,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"+(null!=(s=n.if.call(t,(n.isStartRoom||t&&t.isStartRoom||l).call(t,t,{name:"isStartRoom",hash:{},data:r}),{name:"if",hash:{},fn:e.program(10,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"+(null!=(s=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(12,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"+(null!=(s=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(14,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"},8:function(e,t,n,o,r){return"It is dark."},10:function(e,t,n,o,r){var i;return"The player is in "+(null!=(i=(n.validName||t&&t.validName||n.helperMissing).call(t,null!=t?t.name:t,{name:"validName",hash:{},data:r}))?i:"")+"."},12:function(e,t,n,o,r,i,a){var s,l=n.helperMissing,d=e.escapeExpression;return d((n.capitalize||t&&t.capitalize||l).call(t,(n.dirToStr||t&&t.dirToStr||l).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}),{name:"capitalize",hash:{},data:r}))+" of "+(null!=(s=(n.validName||t&&t.validName||l).call(t,null!=a[1]?a[1].name:a[1],{name:"validName",hash:{},data:r}))?s:"")+" is "+d((n.dirToStr||t&&t.dirToStr||l).call(t,null!=t?t.endDir:t,null!=t?t.endType:t,{name:"dirToStr",hash:{},data:r}))+" of "+(null!=(s=(n.validName||t&&t.validName||l).call(t,null!=(s=null!=t?t.room:t)?s.name:s,{name:"validName",hash:{},data:r}))?s:"")+".\n"},14:function(e,t,n,o,r,i,a){var s;return null!=(s=e.invokePartial(o.inform7Object,t,{name:"inform7Object",hash:{container:a[1],object:t},data:r,helpers:n,partials:o,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s;return'"'+(null!=(s=n.if.call(t,null!=(s=null!=t?t.map:t)?s.title:s,{name:"if",hash:{},fn:e.program(1,r,0,i,a),inverse:e.program(3,r,0,i,a),data:r}))?s:"")+'" '+(null!=(s=n.if.call(t,null!=(s=null!=t?t.map:t)?s.author:s,{name:"if",hash:{},fn:e.program(5,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n\n"+(null!=(s=n.each.call(t,null!=(s=null!=t?t.map:t)?s.rooms:s,{name:"each",hash:{},fn:e.program(7,r,0,i,a),inverse:e.noop,data:r}))?s:"")},usePartial:!0,useData:!0,useDepths:!0}),t.inform7Object=e({1:function(e,t,n,o,r,i,a){var s;return null!=(s=e.invokePartial(o.inform7Object,t,{name:"inform7Object",hash:{container:a[1],object:t},data:r,helpers:n,partials:o,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s,l=e.lambda;return"A "+(null!=(s=l(null!=t?t.name:t,t))?s:"")+" is in "+(null!=(s=l(null!=(s=null!=t?t.container:t)?s.name:s,t))?s:"")+".\n"+(null!=(s=n.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:e.program(1,r,0,i,a),inverse:e.noop,data:r}))?s:"")},usePartial:!0,useData:!0,useDepths:!0}),t.quest=e({1:function(e,t,n,o,r){var i;return"<author>"+(null!=(i=e.lambda(null!=(i=null!=t?t.map:t)?i.author:i,t))?i:"")+"</author>"},3:function(e,t,n,o,r){var i;return"<description>"+(null!=(i=e.lambda(null!=(i=null!=t?t.map:t)?i.description:i,t))?i:"")+"</description>"},5:function(e,t,n,o,r){var i,a=e.lambda,s=n.helperMissing,l=e.escapeExpression;return'\n  <object name="'+(null!=(i=a(null!=t?t.name:t,t))?i:"")+'">\n    <attr name="grid_label">'+(null!=(i=a(null!=t?t.name:t,t))?i:"")+'</attr>\n    <attr name="grid_width" type="int">'+l((n.gridWidth||t&&t.gridWidth||s).call(t,null!=t?t.width:t,{name:"gridWidth",hash:{},data:r}))+'</attr>\n    <attr name="grid_length" type="int">'+l((n.gridLength||t&&t.gridLength||s).call(t,null!=t?t.height:t,{name:"gridLength",hash:{},data:r}))+"</attr>"+(null!=(i=n.if.call(t,null!=t?t.dark:t,{name:"if",hash:{},fn:e.program(6,r,0),inverse:e.noop,data:r}))?i:"")+'\n    <inherit name="editor_room" />  '+(null!=(i=n.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(8,r,0),inverse:e.noop,data:r}))?i:"")+"  "+(null!=(i=n.if.call(t,(n.isStartRoom||t&&t.isStartRoom||s).call(t,t,{name:"isStartRoom",hash:{},data:r}),{name:"if",hash:{},fn:e.program(10,r,0),inverse:e.noop,data:r}))?i:"")+" "+(null!=(i=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(12,r,0),inverse:e.noop,data:r}))?i:"")+" "+(null!=(i=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(14,r,0),inverse:e.noop,data:r}))?i:"")+"\n  </object>\n"},6:function(e,t,n,o,r){return"<dark />"},8:function(e,t,n,o,r){var i;return"\n    <description>"+(null!=(i=e.lambda(null!=t?t.description:t,t))?i:"")+"</description>"},10:function(e,t,n,o,r){return'\n    <object name="player">\n      <inherit name="editor_object" />\n      <inherit name="editor_player" />\n    </object>\n    '},12:function(e,t,n,o,r){var i,a=n.helperMissing,s=e.escapeExpression;return'\n    <exit alias="'+s((n.dirToStr||t&&t.dirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}))+'" to="'+(null!=(i=e.lambda(null!=(i=null!=t?t.room:t)?i.name:i,t))?i:"")+'">\n      <inherit name="'+s((n.dirToStr||t&&t.dirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}))+'direction" />\n    </exit>\n    '},14:function(e,t,n,o,r){var i;return" "+(null!=(i=e.invokePartial(o.questObject,t,{name:"questObject",hash:{object:t},data:r,helpers:n,partials:o,decorators:e.decorators}))?i:"")+" "},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return'\x3c!--Saved by Trizbort.io --\x3e\n<asl version="550">\n  <include ref="English.aslx" />\n  <include ref="Core.aslx" />\n  <game name="'+(null!=(i=e.lambda(null!=(i=null!=t?t.map:t)?i.title:i,t))?i:"")+'">\n    <gameid>9bb19c30-fec2-492b-b3f3-3a94e624b662</gameid>\n    <version>1.0</version>\n    <firstpublished>2018</firstpublished>'+(null!=(i=n.if.call(t,null!=(i=null!=t?t.map:t)?i.author:i,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+"\n    <category>Uncategorized</category>"+(null!=(i=n.if.call(t,null!=(i=null!=t?t.map:t)?i.description:i,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r}))?i:"")+"\n  </game>\n   "+(null!=(i=n.each.call(t,null!=(i=null!=t?t.map:t)?i.rooms:i,{name:"each",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r}))?i:"")+"</asl>"},usePartial:!0,useData:!0}),t.questObject=e({1:function(e,t,n,o,r){var i;return null!=(i=e.invokePartial(o.questObject,t,{name:"questObject",hash:{object:t},data:r,indent:"  ",helpers:n,partials:o,decorators:e.decorators}))?i:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return'<object name="'+(null!=(i=e.lambda(null!=(i=null!=t?t.object:t)?i.name:i,t))?i:"")+'">\n  <inherit name="editor_object" />\n'+(null!=(i=n.each.call(t,null!=(i=null!=t?t.object:t)?i.content:i,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+"</object>\n"},usePartial:!0,useData:!0}),t.tads=e({1:function(e,t,n,o,r){var i;return"location = "+(null!=(i=(n.className||t&&t.className||n.helperMissing).call(t,null!=(i=null!=(i=null!=t?t.map:t)?i.startRoom:i)?i.name:i,{name:"className",hash:{},data:r}))?i:"")},3:function(e,t,n,o,r){var i,a=e.lambda;return e.escapeExpression((n.className||t&&t.className||n.helperMissing).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))+": "+(null!=(i=n.if.call(t,null!=t?t.dark:t,{name:"if",hash:{},fn:e.program(4,r,0),inverse:e.program(6,r,0),data:r}))?i:"")+" '"+(null!=(i=a(null!=t?t.name:t,t))?i:"")+"'\n  \""+(null!=(i=a(null!=t?t.description:t,t))?i:"")+'"\n'+(null!=(i=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(8,r,0),inverse:e.noop,data:r}))?i:"")+";\n\n"+(null!=(i=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(10,r,0),inverse:e.noop,data:r}))?i:"")+"\n"},4:function(e,t,n,o,r){return"DarkRoom"},6:function(e,t,n,o,r){return"Room"},8:function(e,t,n,o,r){var i,a=n.helperMissing;return"  "+e.escapeExpression((n.dirToStr||t&&t.dirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}))+": "+(null!=(i=(n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.room:t)?i.name:i,{name:"className",hash:{},data:r}))?i:"")+" \n"},10:function(e,t,n,o,r){return e.escapeExpression((n.buildObject||t&&t.buildObject||n.helperMissing).call(t,t,{name:"buildObject",hash:{},data:r}))},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i,a=e.lambda;return'#charset "us-ascii"\n\n#include <adv3.h>\n#include <en_us.h>\n\nversionInfo: GameID\n  name = \''+(null!=(i=a(null!=(i=null!=t?t.map:t)?i.title:i,t))?i:"")+"'\n  byline = 'by "+(null!=(i=a(null!=(i=null!=t?t.map:t)?i.author:i,t))?i:"")+"'\n  version = '1.0'\n  desc = '"+(null!=(i=a(null!=(i=null!=t?t.map:t)?i.description:i,t))?i:"")+"'\n\ngameMain: GameMainDef\n  initialPlayerChar = me\n\n+ me: Actor\n  "+(null!=(i=n.if.call(t,null!=(i=null!=t?t.map:t)?i.startRoom:i,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+"\n;\n\n"+(null!=(i=n.each.call(t,null!=(i=null!=t?t.map:t)?i.rooms:i,{name:"each",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r}))?i:"")},useData:!0}),t.tadsObject=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i,a=e.lambda;return" "+e.escapeExpression((n.kindToStr||t&&t.kindToStr||n.helperMissing).call(t,null!=(i=null!=t?t.obj:t)?i.kind:i,{name:"kindToStr",hash:{},data:r}))+" '"+(null!=(i=a(null!=(i=null!=t?t.obj:t)?i.name:i,t))?i:"")+"'\n  \""+(null!=(i=a(null!=(i=null!=t?t.obj:t)?i.description:i,t))?i:"")+'"\n;\n\n'},useData:!0}),t.textadventurejs=e({1:function(e,t,n,o,r){var i,a=e.lambda;return"    '"+e.escapeExpression((n.className||t&&t.className||n.helperMissing).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))+"': {\n      firstVisit: true,\n      displayName: '"+(null!=(i=a(null!=t?t.name:t,t))?i:"")+"',\n      description: '"+(null!=(i=a(null!=t?t.description:t,t))?i:"")+"',\n      items: {\n"+(null!=(i=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r}))?i:"")+"      },\n      exits: {\n"+(null!=(i=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r}))?i:"")+"      },\n    },\n"},2:function(e,t,n,o,r){var i=e.escapeExpression,a=e.lambda;return"          "+i((n.className||t&&t.className||n.helperMissing).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))+": {\n            displayName: '"+i(a(null!=t?t.name:t,t))+"',\n            description: '"+i(a(null!=t?t.description:t,t))+"'\n          },\n"},4:function(e,t,n,o,r){var i,a=n.helperMissing,s=e.escapeExpression;return"          "+s((n.dirToStr||t&&t.dirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}))+": {\n            displayName: '"+s((n.capitalizeDirToStr||t&&t.capitalizeDirToStr||a).call(t,null!=t?t.startDir:t,{name:"capitalizeDirToStr",hash:{},data:r}))+"',\n            destination: '"+s((n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.room:t)?i.name:i,{name:"className",hash:{},data:r}))+"'\n          },\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return"// === Game Data ===\nvar gameData = {\n  commandCounter : 0,\n  gameOver : false,\n  introText : 'Welcome to the game!',\n  outroText : 'Thanks For playing!',\n  player : {\n    currentLocation : '"+e.escapeExpression((n.className||t&&t.className||n.helperMissing).call(t,null!=(i=null!=(i=null!=t?t.map:t)?i.startRoom:i)?i.name:i,{name:"className",hash:{},data:r}))+"',\n    inventory : {}\n  },\n  map : {\n"+(null!=(i=n.each.call(t,null!=(i=null!=t?t.map:t)?i.rooms:i,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+"  }\n};\n\n// === Game Actions ===\nvar gameActions = {\n}\n\n// === Necessary Exports ===\nmodule.exports.gameData = gameData;\nmodule.exports.gameActions = gameActions;\n\n"},useData:!0}),t.yaml=e({1:function(e,t,n,o,r){var i;return"  description: > \n"+(null!=(i=e.invokePartial(o.DescriptionPartial,t,{name:"DescriptionPartial",hash:{content:null!=(i=null!=t?t.map:t)?i.description:i},data:r,indent:"    ",helpers:n,partials:o,decorators:e.decorators}))?i:"")},3:function(e,t,n,o,r,i,a){var s,l=e.escapeExpression;return"  "+l((n.className||t&&t.className||n.helperMissing).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))+":\n    name: "+l(e.lambda(null!=t?t.name:t,t))+"\n"+(null!=(s=n.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(4,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"    "+(null!=(s=n.if.call(t,null!=t?t.dark:t,{name:"if",hash:{},fn:e.program(6,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"+(null!=(s=n.if.call(t,null!=(s=null!=t?t.connections:t)?s.length:s,{name:"if",hash:{},fn:e.program(8,r,0,i,a),inverse:e.noop,data:r}))?s:"")+(null!=(s=n.if.call(t,null!=(s=null!=t?t.objects:t)?s.length:s,{name:"if",hash:{},fn:e.program(11,r,0,i,a),inverse:e.noop,data:r}))?s:"")},4:function(e,t,n,o,r){var i;return"    description: >\n"+(null!=(i=e.invokePartial(o.DescriptionPartial,t,{name:"DescriptionPartial",hash:{content:null!=t?t.description:t},data:r,indent:"      ",helpers:n,partials:o,decorators:e.decorators}))?i:"")},6:function(e,t,n,o,r){return"dark: true"},8:function(e,t,n,o,r){var i;return"    exits:\n"+(null!=(i=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r}))?i:"")},9:function(e,t,n,o,r){var i,a=n.helperMissing;return"      "+e.escapeExpression((n.dirToStr||t&&t.dirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"dirToStr",hash:{},data:r}))+": "+(null!=(i=(n.className||t&&t.className||a).call(t,null!=(i=null!=t?t.room:t)?i.name:i,{name:"className",hash:{},data:r}))?i:"")+" \n"},11:function(e,t,n,o,r,i,a){var s;return"    objects:\n"+(null!=(s=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(12,r,0,i,a),inverse:e.noop,data:r}))?s:"")},12:function(e,t,n,o,r,i,a){var s;return null!=(s=e.invokePartial(o.yamlObject,t,{name:"yamlObject",hash:{container:a[1],object:t},data:r,indent:"      ",helpers:n,partials:o,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s,l=e.lambda;return"game:\n  name: "+(null!=(s=l(null!=(s=null!=t?t.map:t)?s.title:s,t))?s:"")+"\n  author: "+(null!=(s=l(null!=(s=null!=t?t.map:t)?s.author:s,t))?s:"")+"\n"+(null!=(s=n.if.call(t,null!=(s=null!=t?t.map:t)?s.description:s,{name:"if",hash:{},fn:e.program(1,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"rooms: \n"+(null!=(s=n.each.call(t,null!=(s=null!=t?t.map:t)?s.rooms:s,{name:"each",hash:{},fn:e.program(3,r,0,i,a),inverse:e.noop,data:r}))?s:"")},usePartial:!0,useData:!0,useDepths:!0}),t.yamlDescription=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return e.escapeExpression("function"==typeof(i=null!=(i=n.content||(null!=t?t.content:t))?i:n.helperMissing)?i.call(t,{name:"content",hash:{},data:r}):i)+"\n"},useData:!0}),t.yamlObject=e({1:function(e,t,n,o,r){var i;return"  description: > \n"+(null!=(i=e.invokePartial(o.DescriptionPartial,t,{name:"DescriptionPartial",hash:{content:null!=t?t.description:t},data:r,indent:"    ",helpers:n,partials:o,decorators:e.decorators}))?i:"")},3:function(e,t,n,o,r,i,a){var s;return"  objects:\n"+(null!=(s=n.each.call(t,null!=t?t.content:t,{name:"each",hash:{},fn:e.program(4,r,0,i,a),inverse:e.noop,data:r}))?s:"")},4:function(e,t,n,o,r,i,a){var s;return null!=(s=e.invokePartial(o.yamlObject,t,{name:"yamlObject",hash:{container:a[1],object:t},data:r,indent:"    ",helpers:n,partials:o,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s,l=n.helperMissing;return(null!=(s=(n.className||t&&t.className||l).call(t,null!=t?t.name:t,{name:"className",hash:{},data:r}))?s:"")+":\n  kind: "+(null!=(s=(n.kindToStr||t&&t.kindToStr||l).call(t,null!=t?t.kind:t,{name:"kindToStr",hash:{},data:r}))?s:"")+"\n"+(null!=(s=n.if.call(t,null!=t?t.description:t,{name:"if",hash:{},fn:e.program(1,r,0,i,a),inverse:e.noop,data:r}))?s:"")+(null!=(s=n.if.call(t,null!=(s=null!=t?t.content:t)?s.length:s,{name:"if",hash:{},fn:e.program(3,r,0,i,a),inverse:e.noop,data:r}))?s:"")},usePartial:!0,useData:!0,useDepths:!0}),t.zil=e({1:function(e,t,n,o,r,i,a){var s,l=e.escapeExpression;return"<ROOM "+l((n.zilName||t&&t.zilName||n.helperMissing).call(t,null!=t?t.name:t,{name:"zilName",hash:{},data:r}))+'\n  (LOC ROOMS)\n  (DESC "'+l(e.lambda(null!=t?t.name:t,t))+'")\n'+(null!=(s=n.each.call(t,null!=t?t.connections:t,{name:"each",hash:{},fn:e.program(2,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"  (FLAGS "+(null!=(s=n.unless.call(t,null!=t?t.dark:t,{name:"unless",hash:{},fn:e.program(4,r,0,i,a),inverse:e.noop,data:r}))?s:"")+")\n  >\n\n"+(null!=(s=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(6,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"},2:function(e,t,n,o,r){var i,a=n.helperMissing,s=e.escapeExpression;return"  ("+s((n.upperDirToStr||t&&t.upperDirToStr||a).call(t,null!=t?t.startDir:t,null!=t?t.startType:t,{name:"upperDirToStr",hash:{},data:r}))+" TO "+s((n.zilName||t&&t.zilName||a).call(t,null!=(i=null!=t?t.room:t)?i.name:i,{name:"zilName",hash:{},data:r}))+")\n"},4:function(e,t,n,o,r){return"ONBIT"},6:function(e,t,n,o,r,i,a){var s;return null!=(s=e.invokePartial(o.zilObject,t,{name:"zilObject",hash:{container:a[1],object:t},data:r,helpers:n,partials:o,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s;return null!=(s=n.each.call(t,null!=(s=null!=t?t.map:t)?s.rooms:s,{name:"each",hash:{},fn:e.program(1,r,0,i,a),inverse:e.noop,data:r}))?s:""},usePartial:!0,useData:!0,useDepths:!0}),t.zilObject=e({1:function(e,t,n,o,r){return"TAKEBIT"},3:function(e,t,n,o,r,i,a){var s;return null!=(s=e.invokePartial(o.zilObject,t,{name:"zilObject",hash:{container:a[1],object:t},data:r,helpers:n,partials:o,decorators:e.decorators}))?s:""},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r,i,a){var s,l=n.helperMissing,d=e.escapeExpression,c=e.lambda;return"<OBJECT "+d((n.zilName||t&&t.zilName||l).call(t,null!=t?t.name:t,{name:"zilName",hash:{},data:r}))+"\n  (LOC "+d((n.zilName||t&&t.zilName||l).call(t,null!=(s=null!=t?t.container:t)?s.name:s,{name:"zilName",hash:{},data:r}))+')\n  (DESC "'+d(c(null!=t?t.name:t,t))+'")\n  (FDESC "'+d(c(null!=t?t.description:t,t))+'")\n  (LDESC "'+d(c(null!=t?t.description:t,t))+'")\n  (FLAGS '+(null!=(s=n.if.call(t,(n.isItem||t&&t.isItem||l).call(t,null!=t?t.kind:t,{name:"isItem",hash:{},data:r}),{name:"if",hash:{},fn:e.program(1,r,0,i,a),inverse:e.noop,data:r}))?s:"")+")\n>\n\n"+(null!=(s=n.each.call(t,null!=t?t.objects:t,{name:"each",hash:{},fn:e.program(3,r,0,i,a),inverse:e.noop,data:r}))?s:"")+"\n"},usePartial:!0,useData:!0,useDepths:!0}),t.idCheck=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return'<div class="form-check">\n  <label><input type="checkbox" value="">'+e.escapeExpression("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:n.helperMissing)?i.call(t,{name:"label",hash:{},data:r}):i)+"</label>\n</div>"},useData:!0}),t.idColorPicker=e({1:function(e,t,n,o,r){return'      <id-popup class="alpha"></id-popup>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return'<div class="color-picker">\n  <div>\n    <div class="hsl">\n      <canvas></canvas>\n      <div class="selection">\n        <div class="current-color"></div>\n        <div class="hover-color"></div>\n      </div>\n    </div>\n    <canvas></canvas>\n  </div>\n  <p>Recent colors</p>\n  <div class="recent">\n'+(null!=(i=n.each.call(t,null!=t?t.recentcolors:t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+'  </div>\n  <p>Standard colors</p>\n  <div class="standard">\n'+(null!=(i=n.each.call(t,null!=t?t.standardcolors:t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+"  </div>\n</div>"},useData:!0}),t.idConnectorType=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i,a=n.helperMissing,s="function",l=e.escapeExpression;return'<id-radio class="js-default" data-label="Default" data-name="'+l(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:a)==s?i.call(t,{name:"name",hash:{},data:r}):i)+'"></id-radio> \n<id-radio class="js-in" data-label="In" data-name="'+l(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:a)==s?i.call(t,{name:"name",hash:{},data:r}):i)+'"></id-radio>\n<id-radio class="js-out" data-label="Out" data-name="'+l(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:a)==s?i.call(t,{name:"name",hash:{},data:r}):i)+'"></id-radio>\n<id-radio class="js-up" data-label="Up" data-name="'+l(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:a)==s?i.call(t,{name:"name",hash:{},data:r}):i)+'"></id-radio>\n<id-radio class="js-down" data-label="Down" data-name="'+l(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:a)==s?i.call(t,{name:"name",hash:{},data:r}):i)+'"></id-radio>'},useData:!0}),t.idInput=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return'<div class="form-group">\n  <label>'+e.escapeExpression("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:n.helperMissing)?i.call(t,{name:"label",hash:{},data:r}):i)+'\n    <input type="text">\n    <div class="input-line"></div>\n  </label>\n</div>'},useData:!0}),t.idLineStyle=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i,a=n.helperMissing,s="function",l=e.escapeExpression;return"<label>"+l(typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:a)==s?i.call(t,{name:"label",hash:{},data:r}):i)+'</label>\n<div style="display: flex; flex-wrap: no-wrap">\n  <id-popup class="js-linestyle-solid">\n    <svg class="icon"><use xlink:href="dist/icons.svg#line-solid"></use></svg>\n  </id-popup>\n  <id-popup class="js-linestyle-dash">\n    <svg class="icon"><use xlink:href="dist/icons.svg#line-dash"></use></svg>\n  </id-popup>\n  <id-popup class="js-linestyle-dashdot">\n    <svg class="icon"><use xlink:href="dist/icons.svg#line-dashdot"></use></svg>\n  </id-popup>\n  <id-popup class="js-linestyle-dashdotdot">\n    <svg class="icon"><use xlink:href="dist/icons.svg#line-dashdotdot"></use></svg>\n  </id-popup>\n  <id-popup class="js-linestyle-dot">\n    <svg class="icon"><use xlink:href="dist/icons.svg#line-dot"></use></svg>\n  </id-popup>\n  <id-popup class="js-linestyle-none" style="display:'+l(typeof(i=null!=(i=n.noneDisplay||(null!=t?t.noneDisplay:t))?i:a)==s?i.call(t,{name:"noneDisplay",hash:{},data:r}):i)+'"></id-popup>\n</div>'},useData:!0}),t.idObjectEditor=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<div style="display: flex; flex-direction: column; border: solid 1px #999; border-radius: 3px; margin-top: 8px">\n  <div style="display: flex; flex-direction: row">\n    <div class="handle" style="background: #eee; width: 15px; border-top-left-radius: 3px; border-bottom-left-radius: 3px; border-right: solid 1px #999">\n    </div>\n    <div style="flex: 1; padding: 8px 8px 6px 8px">\n      <div style="display: flex; align-items: flex-start">\n        <div style="flex:1">\n          <id-input class="js-name" data-label="Name"></id-input>\n          <id-input class="js-description" data-label="Description"></id-input>\n        </div>\n        <a href="#" title="Delete object">\n          <svg class="icon small"><use xlink:href="dist/icons.svg#trash"></use></svg> \n        </a>\n      </div>\n      <div style="display: flex">\n        <id-popup class="js-actor" title="Actor">\n          <svg class="icon"><use xlink:href="dist/icons.svg#actor"></use></svg>\n        </id-popup>\n        <id-popup class="js-item" title="Item">\n          <svg class="icon"><use xlink:href="dist/icons.svg#item"></use></svg>\n        </id-popup>\n        <id-popup class="js-scenery" title="Scenery">\n          <svg class="icon"><use xlink:href="dist/icons.svg#scenery"></use></svg>\n        </id-popup> \n      </div>\n    </div>\n  </div>\n</div>\n<div class="drop-child"></div>\n<div class="drop"></div>\n\n'},useData:!0}),t.idPopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<div class="popup-button">\n</div>'},useData:!0}),t.idQuickColor=e({1:function(e,t,n,o,r){return'    <id-popup class="alpha"></id-popup>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return'<div style="display: flex; flex-wrap: wrap">\n'+(null!=(i=n.each.call(t,null!=t?t.colors:t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?i:"")+"</div>"},useData:!0}),t.idRadio=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i,a=n.helperMissing,s="function",l=e.escapeExpression;return'<div class="form-check">\n  <label><input type="radio" name="'+l(typeof(i=null!=(i=n.name||(null!=t?t.name:t))?i:a)==s?i.call(t,{name:"name",hash:{},data:r}):i)+'">'+l(typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:a)==s?i.call(t,{name:"label",hash:{},data:r}):i)+"</label>\n</div>"},useData:!0}),t.idRange=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i,a=n.helperMissing,s="function",l=e.escapeExpression;return'<div class="form-group">\n  <label>'+l(typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:a)==s?i.call(t,{name:"label",hash:{},data:r}):i)+'</label>\n  <div style="display: flex; flex-direction: row; flex-wrapping: nowrap; align-items: center">\n    <input type="range" min="'+l(typeof(i=null!=(i=n.min||(null!=t?t.min:t))?i:a)==s?i.call(t,{name:"min",hash:{},data:r}):i)+'" max="'+l(typeof(i=null!=(i=n.max||(null!=t?t.max:t))?i:a)==s?i.call(t,{name:"max",hash:{},data:r}):i)+'">\n    <div class="range-label" style="width:40px; text-align:right">0</div>\n  </div>\n</div>'},useData:!0}),t.idShape=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return"<label>"+e.escapeExpression("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:n.helperMissing)?i.call(t,{name:"label",hash:{},data:r}):i)+'</label>\n<div style="display: flex; flex-wrap: no-wrap">\n  <id-popup class="js-rectangle">\n    <svg class="icon"><use xlink:href="dist/icons.svg#rectangle"></use></svg>\n  </id-popup>\n  <id-popup class="js-ellipse">\n    <svg class="icon"><use xlink:href="dist/icons.svg#ellipse"></use></svg>\n  </id-popup>\n  <id-popup class="js-octagon">\n    <svg class="icon"><use xlink:href="dist/icons.svg#octagon"></use></svg>\n  </id-popup>\n</div>'},useData:!0}),t.idTextarea=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return'<div class="form-group" style="margin-top:25px">\n  <label>'+e.escapeExpression("function"==typeof(i=null!=(i=n.label||(null!=t?t.label:t))?i:n.helperMissing)?i.call(t,{name:"label",hash:{},data:r}):i)+'\n    <textarea style="height:400px"></textarea>\n    <div class="input-line"></div>\n  </label>\n</div>'},useData:!0}),t.idToast=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<span><svg><use xlink:href="dist/icons.svg#times"></use></svg></span>\n<h3></h3>\n<p></p>\n\n'},useData:!0}),t.blockPanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return(null!=(i=e.invokePartial(o.closePanel,t,{name:"closePanel",data:r,helpers:n,partials:o,decorators:e.decorators}))?i:"")+'\n<h2>Block</h2>\n\n<div class="tabs">\n  <div class="tab selected" data-body="tab-block-info">Info</div>\n  <div class="tab" data-body="tab-block-style">Style</div>\n</div>\n\n<div class="tab-body" id="tab-block-info">\n  <id-shape class="js-shape" data-label="Block shape"></id-shape>  \n  <id-range class="js-rounding" data-min="0" data-max="100" data-label="Rectangle rounding"></id-range>\n</div>\n\n<div class="tab-body" id="tab-block-style">\n  <id-linestyle class="js-linestyle" data-none="true" data-label="Border style"></id-linestyle>\n  <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>  \n  <label>Colors</label>\n  <div style="display: flex">\n    <div style="display: flex; flex-direction: column; flex-wrap: wrap">\n      <id-popup title="Block fill" class="colortype selected" data-type="fill">\n        <svg class="icon"><use xlink:href="dist/icons.svg#block-fill"></use></svg>\n      </id-popup>\n      <id-popup title="Block border" class="colortype" data-type="border">\n        <svg class="icon"><use xlink:href="dist/icons.svg#block-border"></use></svg>\n      </id-popup>\n    </div>\n    <id-colorpicker class="js-color"></id-colorpicker>\n  </div>\n</div>'},usePartial:!0,useData:!0}),t.closePanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<div class="panel-close">\n  <svg class="icon"><use xlink:href="dist/icons.svg#times"></use></svg>\n</div>'},useData:!0}),t.connectorPanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return(null!=(i=e.invokePartial(o.closePanel,t,{name:"closePanel",data:r,helpers:n,partials:o,decorators:e.decorators}))?i:"")+'\n<h2>Connector</h2> \n\n<div class="tabs">\n  <div class="tab selected" data-body="tab-connector-info">Info</div>\n  <div class="tab" data-body="tab-connector-style">Style</div>\n</div>\n\n<div class="tab-body" id="tab-connector-info">\n  <id-input class="js-name" data-label="Connector name"></id-input>\n  <id-check class="js-curve" data-label="Curve"></id-check>\n  <id-check class="js-oneway" data-label="One way"></id-check>\n  <button class="btn-primary js-reverse">Reverse</button>\n\n  <div style="display: flex; margin-top: 20px">\n    <div style="flex: 1; display: flex; flex-direction: column; padding-right: 10px">\n      <label>Start type</label>\n      <id-connector-type class="js-starttype"></id-connector-type>\n      <id-input style="margin-top:20px" class="js-startlabel" data-label="Start label"></id-input>\n    </div>\n    <div style="flex: 1; display: flex; flex-direction: column; padding-left: 10px">\n      <label>End type</label>\n      <id-connector-type class="js-endtype"></id-connector-type>\n      <id-input style="margin-top:20px" class="js-endlabel" data-label="End label"></id-input>\n    </div>\n  </div>\n</div>\n\n<div class="tab-body" id="tab-connector-style">\n  <id-linestyle class="js-linestyle" data-label="Line style"></id-linestyle>\n  <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>\n  <label>Line color</label>  \n  <id-colorpicker class="js-color"></id-colorpicker>\n</div>'},usePartial:!0,useData:!0}),t.mapPanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return(null!=(i=e.invokePartial(o.closePanel,t,{name:"closePanel",data:r,helpers:n,partials:o,decorators:e.decorators}))?i:"")+'\n<h2>Map settings</h2>\n\n<div class="tabs"> \n  <div class="tab selected" data-body="tab-map-info">Info</div>\n</div> \n\n<div class="tab-body" id="tab-map-info">\n  <id-input class="js-title" data-label="Map title"></id-input>\n  <id-input class="js-author" data-label="Map author"></id-input>\n  <id-textarea class="js-description" data-label="Description"></id-textarea>\n</div>\n'},usePartial:!0,useData:!0}),t.menuPanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<input id="inputLoad" type="file" style="display:none" accept=".json">\n<input id="inputImport" type="file" style="display:none" accept=".trizbort">\n\n<div class="menugroup">\n  <a href="#" id="group-file">File</a>\n  <div>\n    <div class="menuitem">\n      <a href="#" id="menu-new"><svg class="icon small"><use xlink:href="dist/icons.svg#map"></use></svg> New map</a>\n    </div>\n    <div class="menuitem">\n      <a href="#" id="menu-load"><svg class="icon small"><use xlink:href="dist/icons.svg#open"></use></svg> Load map</a>\n    </div>    \n    <div class="menuitem">\n      <a href="#" id="menu-import"><svg class="icon small"><use xlink:href="dist/icons.svg#open"></use></svg> Import Trizbort map</a>\n    </div>    \n    <div class="menuitem">\n      <a href="#" id="menu-save"><svg class="icon small"><use xlink:href="dist/icons.svg#save"></use></svg> Save map</a>\n    </div>\n    <div class="menuitem">\n      <a href="#" id="menu-image"><svg class="icon small"><use xlink:href="dist/icons.svg#scenery"></use></svg> Export as image</a>\n    </div>\n  </div>\n</div>\n\n<div class="menugroup">\n  <a href="#" id="group-settings">Settings</a>\n  <div style="display:none">\n    <div class="menuitem">\n      <a href="#" id="menu-map"><svg class="icon small"><use xlink:href="dist/icons.svg#settings"></use></svg> Map settings</a>\n    </div>\n    <div class="menuitem">\n      <a href="#" id="menu-render"><svg class="icon small"><use xlink:href="dist/icons.svg#paintbrush"></use></svg> Render settings</a>\n    </div>\n  </div>\n</div>\n\n<div class="menugroup">\n  <a href="#" id="group-export">Export</a>\n  <div style="display:none">\n    <div class="menuitem">\n      <a href="#" id="menu-export-tads"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> TADS</a> \n    </div>\n    <div class="menuitem">\n      <a href="#" id="menu-export-inform7"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> Inform 7</a> \n    </div>  \n    <div class="menuitem">\n      <a href="#" id="menu-export-alan2"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> Alan 2</a> \n    </div>  \n    <div class="menuitem">\n      <a href="#" id="menu-export-alan3"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> Alan 3</a> \n    </div>  \n    <div class="menuitem">\n      <a href="#" id="menu-export-quest"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> Quest</a> \n    </div>  \n    <div class="menuitem">\n      <a href="#" id="menu-export-textadventurejs"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> TextAdventure.js</a> \n    </div>    \n    <div class="menuitem">\n      <a href="#" id="menu-export-yaml"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> YAML</a> \n    </div>       \n    <div class="menuitem">\n      <a href="#" id="menu-export-zil"><svg class="icon small"><use xlink:href="dist/icons.svg#code"></use></svg> ZIL</a> \n    </div>    \n  </div>\n</div>\n\n<div class="menugroup">\n  <a href="#" id="group-help">Help</a>\n  <div style="display:none">\n    <div class="menuitem">\n      <a href="#" id="menu-help"><svg class="icon small"><use xlink:href="dist/icons.svg#help"></use></svg> Keyboard help</a>\n    </div>\n  </div>\n</div>'},useData:!0}),t.notePanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return(null!=(i=e.invokePartial(o.closePanel,t,{name:"closePanel",data:r,helpers:n,partials:o,decorators:e.decorators}))?i:"")+'\n<h2>Note</h2>\n\n<div class="tabs">\n  <div class="tab selected" data-body="tab-note-info">Info</div>\n  <div class="tab" data-body="tab-note-style">Style</div>\n</div>\n\n<div class="tab-body" id="tab-note-info">\n  <id-shape class="js-shape" data-label="Note shape"></id-shape>   \n  <id-range class="js-rounding" data-min="0" data-max="100" data-label="Rectangle rounding"></id-range>\n  <id-textarea class="js-text" data-label="Note text"></id-textarea>\n</div>\n\n<div class="tab-body" id="tab-note-style">\n  <id-linestyle class="js-linestyle" data-none="true" data-label="Border style"></id-linestyle>\n  <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>  \n  <label>Colors</label>\n  <div style="display: flex">\n    <div style="display: flex; flex-direction: column; flex-wrap: wrap">\n      <id-popup title="Note fill" class="colortype selected" data-type="fill">\n        <svg class="icon"><use xlink:href="dist/icons.svg#note-fill"></use></svg>\n      </id-popup>\n      <id-popup title="Note border" class="colortype" data-type="border">\n        <svg class="icon"><use xlink:href="dist/icons.svg#note-border"></use></svg>\n      </id-popup>\n      <id-popup title="Note text" class="colortype" data-type="text">\n        <svg class="icon"><use xlink:href="dist/icons.svg#note-text"></use></svg>\n      </id-popup>\n    </div>\n    <id-colorpicker class="js-color"></id-colorpicker>\n  </div>\n</div>'},usePartial:!0,useData:!0}),t.renderPanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return(null!=(i=e.invokePartial(o.closePanel,t,{name:"closePanel",data:r,helpers:n,partials:o,decorators:e.decorators}))?i:"")+'\n<h2>Render settings</h2>\n\n<div class="tabs"> \n  <div class="tab selected" data-body="tab-settings-basic">Basic</div>\n  <div class="tab" data-body="tab-settings-rooms">Room</div>\n  <div class="tab" data-body="tab-settings-connectors">Line</div>\n  <div class="tab" data-body="tab-settings-notes">Note</div>\n  <div class="tab" data-body="tab-settings-blocks">Block</div>\n</div>\n\n<div class="tab-body" id="tab-settings-basic">\n  <id-check class="js-grid-visible" data-label="Visible"></id-check>\n  <id-check class="js-grid-origin" data-label="Show origin"></id-check>\n  <id-check class="js-grid-snap" data-label="Snap to grid"></id-check>\n  <id-range class="js-grid-size" data-min="16" data-max="128" data-label="Grid size"></id-range>\n\n  <label>Map colors</label>\n  <div style="display: flex">\n    <div style="display: flex; flex-direction: column; flex-wrap: wrap">\n      <id-popup title="Map background" class="map-colortype selected" data-type="background">\n      </id-popup>\n      <id-popup title="Grid" class="map-colortype" data-type="grid">\n        <svg class="icon"><use xlink:href="dist/icons.svg#grid"></use></svg>\n      </id-popup>\n    </div>\n    <id-colorpicker class="js-map-color"></id-colorpicker>\n  </div>  \n\n  <label>Quick themes</label>\n  <div class="menuitem">\n    <a href="#" class="js-theme-default"><svg class="icon small"><use xlink:href="dist/icons.svg#paintbrush"></use></svg> Default</a>\n  </div>  \n  <div class="menuitem">\n    <a href="#" class="js-theme-obsidian"><svg class="icon small"><use xlink:href="dist/icons.svg#paintbrush"></use></svg> Obsidian</a>\n    <a href="#" class="js-theme-hand-drawn"><svg class="icon small"><use xlink:href="dist/icons.svg#paintbrush"></use></svg> Hand Drawn</a>\n  </div>\n</div>\n\n<div class="tab-body" id="tab-settings-rooms">\n  <id-range class=\'js-room-width\' data-min="64" data-max="256" data-label="Default room width"></id-range>\n  <id-range class=\'js-room-height\' data-min="64" data-max="256" data-label="Default room height"></id-range>\n  <id-range class=\'js-room-darkness-size\' data-min="50" data-max="100" data-label="Darkness stripe size"></id-range>\n  <id-shape class="js-room-shape" data-label="Default room shape"></id-shape>   \n  <id-range class=\'js-room-rounding\' data-min="0" data-max="30" data-label="Default room rounding"></id-range>\n  <id-linestyle class="js-room-line" data-none="true" data-label="Default room border style"></id-linestyle>\n  <id-range class=\'js-room-linewidth\' data-min="1" data-max="10"></id-range>\n\n  <label>Default room colors</label>\n  <div style="display: flex">\n    <div style="display: flex; flex-direction: column; flex-wrap: wrap">\n      <id-popup title="Room fill" class="room-colortype selected" data-type="fill">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-fill"></use></svg>\n      </id-popup>\n      <id-popup title="Room border" class="room-colortype" data-type="border">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-border"></use></svg>\n      </id-popup>\n      <id-popup title="Room name" class="room-colortype" data-type="name">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-name"></use></svg>\n      </id-popup>\n      <id-popup title="Room subtitle" class="room-colortype" data-type="subtitle">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-subtitle"></use></svg>\n      </id-popup>\n      <id-popup title="Darkness stripe" class="room-colortype" data-type="dark">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-darkness"></use></svg>\n      </id-popup>\n      <id-popup title="Start room" class="room-colortype" data-type="start">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-start"></use></svg>\n      </id-popup>\n      <id-popup title="End room" class="room-colortype" data-type="end">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-end"></use></svg>\n      </id-popup>                  \n    </div>\n    <id-colorpicker class="js-room-color"></id-colorpicker>\n  </div>\n</div>\n\n<div class="tab-body" id="tab-settings-connectors">\n  <id-linestyle class="js-connector-line" data-label="Default connector line style"></id-linestyle>\n  <id-range class=\'js-connector-linewidth\' data-min="1" data-max="10"></id-range>  \n  <id-range class=\'js-connector-stalk\' data-min="16" data-max="64" data-label="Default connector stalk length"></id-range>    \n  <id-range class=\'js-connector-label-distance\' data-min="10" data-max="20" data-label="Label distance"></id-range>    \n  <id-range class=\'js-connector-arrow-size\' data-min="3" data-max="10" data-label="One-way arrow size"></id-range>      \n  <id-check class="js-connector-curve" data-label="Use curves"></id-check>\n  <id-range class=\'js-connector-curve-strength\' data-min="1" data-max="8" data-label="Default connector curve strength"></id-range>      \n\n  <label>Default connector color</label>\n  <id-colorpicker class="js-connector-color"></id-colorpicker>\n</div>\n\n<div class="tab-body" id="tab-settings-notes">\n  <id-range class=\'js-note-width\' data-min="64" data-max="256" data-label="Default note width"></id-range>\n  <id-range class=\'js-note-height\' data-min="64" data-max="256" data-label="Default note height"></id-range>\n  <id-shape class="js-note-shape" data-label="Default note shape"></id-shape>   \n  <id-range class=\'js-note-rounding\' data-min="0" data-max="30" data-label="Default note rounding"></id-range>\n  <id-linestyle class="js-note-line" data-none="true" data-label="Default note border style"></id-linestyle>\n  <id-range class=\'js-note-linewidth\' data-min="1" data-max="10"></id-range>\n\n  <label>Default note colors</label>\n  <div style="display: flex">\n    <div style="display: flex; flex-direction: column; flex-wrap: wrap">\n      <id-popup title="Note fill" class="note-colortype selected" data-type="fill">\n        <svg class="icon"><use xlink:href="dist/icons.svg#note-fill"></use></svg>\n      </id-popup>\n      <id-popup title="Note border" class="note-colortype" data-type="border">\n        <svg class="icon"><use xlink:href="dist/icons.svg#note-border"></use></svg>\n      </id-popup>\n      <id-popup title="Note text" class="note-colortype" data-type="text">\n        <svg class="icon"><use xlink:href="dist/icons.svg#note-text"></use></svg>\n      </id-popup>\n    </div>\n    <id-colorpicker class="js-note-color"></id-colorpicker>  \n  </div>\n</div>\n\n<div class="tab-body" id="tab-settings-blocks">\n  <id-range class=\'js-block-width\' data-min="64" data-max="256" data-label="Default block width"></id-range>\n  <id-range class=\'js-block-height\' data-min="64" data-max="256" data-label="Default block height"></id-range>\n  <id-shape class="js-block-shape" data-label="Default block shape"></id-shape>    \n  <id-range class=\'js-block-rounding\' data-min="0" data-max="30" data-label="Default block rounding"></id-range>\n  <id-linestyle class="js-block-line" data-none="true" data-label="Default block border style"></id-linestyle>\n  <id-range class=\'js-block-linewidth\' data-min="1" data-max="10"></id-range>\n\n  <label>Default block colors</label>\n  <div style="display: flex">\n    <div style="display: flex; flex-direction: column; flex-wrap: wrap">\n      <id-popup title="Block fill" class="block-colortype selected" data-type="fill">\n        <svg class="icon"><use xlink:href="dist/icons.svg#block-fill"></use></svg>\n      </id-popup>\n      <id-popup title="Block border" class="block-colortype" data-type="border">\n        <svg class="icon"><use xlink:href="dist/icons.svg#block-border"></use></svg>\n      </id-popup>\n    </div>\n    <id-colorpicker class="js-block-color"></id-colorpicker>  \n  </div>\n</div>'},usePartial:!0,useData:!0}),t.roomPanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){var i;return(null!=(i=e.invokePartial(o.closePanel,t,{name:"closePanel",data:r,helpers:n,partials:o,decorators:e.decorators}))?i:"")+'\n<h2>Room</h2>\n\n<div class="tabs"> \n  <div class="tab selected" data-body="tab-room-info">Info</div>\n  <div class="tab" data-body="tab-room-objects">Objects</div>\n  <div class="tab" data-body="tab-room-style">Style</div>\n</div>\n\n<div class="tab-body" id="tab-room-info">\n  <id-input class="js-name" data-label="Room name"></id-input>\n  <in-input class="js-subtitle" data-label="Room subtitle"></in-input>\n  <id-check class="js-dark" data-label="Dark"></id-check>\n  <id-check class="js-startroom" data-label="Start room"></id-check>\n  <id-check class="js-endroom" data-label="End room"></id-check>\n  <id-shape class="js-shape" data-label="Room shape"></id-shape>\n  <id-range class="js-rounding" data-min="0" data-max="100" data-label="Rectangle rounding"></id-range>\n  <id-textarea class="js-description" data-label="Room description"></id-textarea>\n</div>\n\n<div class="tab-body" id="tab-room-objects">\n  <div class="js-object-list"></div> \n  <div style="display: flex; justify-content: flex-end; margin-top: 10px">\n    <button class="btn btn-primary js-add-object">Add object</button>\n  </div>\n</div>\n\n<div class="tab-body" id="tab-room-style">\n  <id-linestyle class="js-linestyle" data-none="true" data-label="Border style"></id-linestyle>\n  <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>\n  <label>Colors</label>\n  <div style="display: flex">\n    <div style="display: flex; flex-direction: column; flex-wrap: wrap">\n      <id-popup title="Room fill" class="colortype selected" data-type="fill">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-fill"></use></svg>\n      </id-popup>\n      <id-popup title="Room border" class="colortype" data-type="border">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-border"></use></svg>\n      </id-popup>\n      <id-popup title="Room name" class="colortype" data-type="name">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-name"></use></svg>\n      </id-popup>\n      <id-popup title="Room subtitle" class="colortype" data-type="subtitle">\n        <svg class="icon"><use xlink:href="dist/icons.svg#room-subtitle"></use></svg>\n      </id-popup>\n    </div>\n    <id-colorpicker class="js-color"></id-colorpicker>\n  </div>\n</div>\n'},usePartial:!0,useData:!0}),t.toolPanel=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<id-popup title="Cursor" class="tool-none">\n  <svg class="icon"><use xlink:href="dist/icons.svg#arrow"></use></svg>\n</id-popup>\n<id-popup title="Add room (R)" class="tool-room">\n  <svg class="icon"><use xlink:href="dist/icons.svg#room"></use></svg>\n</id-popup>\n<id-popup title="Add note (N)" class="tool-note">\n  <svg class="icon"><use xlink:href="dist/icons.svg#note"></use></svg>\n</id-popup>\n<id-popup title="Add block (B)" class="tool-block">\n  <svg class="icon"><use xlink:href="dist/icons.svg#block"></use></svg>\n</id-popup>'},useData:!0}),t.blockPopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<id-popup class="js-fill">\n  <svg class="icon"><use xlink:href="dist/icons.svg#paintbrush"></use></svg>\n  <div class="popup-overlay" style="width:168px">\n    <id-quick-color class="js-color"></id-quick-color> \n  </div>      \n</id-popup>\n<id-popup class="js-line">\n  <svg class="icon"><use xlink:href="dist/icons.svg#line-solid"></use></svg>\n  <div class="popup-overlay">\n    <id-linestyle class="js-linestyle" data-none="true"></id-linestyle>\n    <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>\n  </div>      \n</id-popup>\n<id-popup class="js-position">\n  <svg class="icon"><use xlink:href="dist/icons.svg#position"></use></svg>\n  <div class="popup-overlay" style="width: 150px; padding-bottom: 8px">\n    <div class="menuitem"><a href="#" class="js-front">Bring to Front</a></div>\n    <div class="menuitem"><a href="#" class="js-forward">Bring Forward</a></div>\n    <div class="menuitem"><a href="#" class="js-backward">Send Backward</a></div>\n    <div class="menuitem"><a href="#" class="js-back">Send to Back</a></div>\n  </div>  \n</id-popup>\n<id-popup class="js-delete">\n  <svg class="icon"><use xlink:href="dist/icons.svg#trash"></use></svg>\n</id-popup>\n<id-popup class="js-more">\n  <svg class="icon"><use xlink:href="dist/icons.svg#ellipsis-h"></use></svg>\n</id-popup>'},useData:!0}),t.connectorPopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<id-popup class="js-fill" title="Connector color">\n  <svg class="icon"><use xlink:href="dist/icons.svg#paintbrush"></use></svg>\n  <div class="popup-overlay" style="width:168px">\n    <id-quick-color class="js-color"></id-quick-color>\n  </div>     \n</id-popup>\n<id-popup class="js-line" title="Connector line style">\n  <svg class="icon"><use xlink:href="dist/icons.svg#line-solid"></use></svg>\n  <div class="popup-overlay">\n    <id-linestyle class="js-linestyle"></id-linestyle>\n    <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>\n  </div>      \n</id-popup>\n<id-popup class="js-basic" title="Connector details">\n  <svg class="icon"><use xlink:href="dist/icons.svg#font"></use></svg>\n  <div class="popup-overlay" style="width:168px">\n    <id-input class="js-name" data-label="Name"></id-input>\n  </div>\n</id-popup>\n<id-popup class="js-delete" title="Delete connector">\n  <svg class="icon"><use xlink:href="dist/icons.svg#trash"></use></svg>\n</id-popup>\n<id-popup class="js-more" title="More connector details">\n  <svg class="icon"><use xlink:href="dist/icons.svg#ellipsis-h"></use></svg>\n</id-popup>'},useData:!0}),t.notePopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<id-popup class="js-basic">\n  <svg class="icon"><use xlink:href="dist/icons.svg#font"></use></svg>\n  <div class="popup-overlay" style="width:168px">\n    <id-textarea class="js-text" data-label="Text"></id-textarea>\n  </div>\n</id-popup>    \n<id-popup class="js-fill">\n  <svg class="icon"><use xlink:href="dist/icons.svg#paintbrush"></use></svg>\n  <div class="popup-overlay" style="width:168px">\n    <id-quick-color class="js-color"></id-quick-color>\n  </div>      \n</id-popup>\n<id-popup class="js-line">\n  <svg class="icon"><use xlink:href="dist/icons.svg#line-solid"></use></svg>\n  <div class="popup-overlay">\n    <id-linestyle class="js-linestyle" data-none="true"></id-linestyle>\n    <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>\n  </div>      \n</id-popup>\n<id-popup class="js-position">\n  <svg class="icon"><use xlink:href="dist/icons.svg#position"></use></svg>\n  <div class="popup-overlay" style="width: 150px; padding-bottom: 8px">\n    <div class="menuitem"><a href="#" class="js-front">Bring to Front</a></div>\n    <div class="menuitem"><a href="#" class="js-forward">Bring Forward</a></div>\n    <div class="menuitem"><a href="#" class="js-backward">Send Backward</a></div>\n    <div class="menuitem"><a href="#" class="js-back">Send to Back</a></div>\n  </div>  \n</id-popup>\n<id-popup class="js-delete">\n  <svg class="icon"><use xlink:href="dist/icons.svg#trash"></use></svg>\n</id-popup>\n<id-popup class="js-more">\n  <svg class="icon"><use xlink:href="dist/icons.svg#ellipsis-h"></use></svg>\n</id-popup>'},useData:!0}),t.roomPopup=e({compiler:[7,">= 4.0.0"],main:function(e,t,n,o,r){return'<id-popup class="js-basic" title="Room details">\n  <svg class="icon"><use xlink:href="dist/icons.svg#font"></use></svg>\n  <div class="popup-overlay" style="width:168px">\n    <id-input class="js-name" data-label="Name"></id-input>\n    <id-input class="js-subtitle" data-label="Subtitle"></id-input>\n  </div>\n</id-popup>    \n<id-popup class="js-fill" title="Fill color">\n  <svg class="icon"><use xlink:href="dist/icons.svg#paintbrush"></use></svg>\n  <div class="popup-overlay" style="width:168px">\n    <id-quick-color class="js-color"></id-quick-color>\n  </div>      \n</id-popup>\n<id-popup class="js-border" title="Border style">\n  <svg class="icon"><use xlink:href="dist/icons.svg#line-solid"></use></svg>\n  <div class="popup-overlay">\n    <id-linestyle class="js-linestyle" data-none="true"></id-linestyle>\n    <id-range class="js-linewidth" data-min="1" data-max="10"></id-range>\n  </div>      \n</id-popup>\n<id-popup class="js-position" title="Room position">\n  <svg class="icon"><use xlink:href="dist/icons.svg#position"></use></svg>\n  <div class="popup-overlay" style="width: 150px; padding-bottom: 8px">\n    <div class="menuitem"><a href="#" class="js-front">Bring to Front</a></div>\n    <div class="menuitem"><a href="#" class="js-forward">Bring Forward</a></div>\n    <div class="menuitem"><a href="#" class="js-backward">Send Backward</a></div>\n    <div class="menuitem"><a href="#" class="js-back">Send to Back</a></div>\n  </div>  \n</id-popup>\n<id-popup class="js-delete"  title="Delete room">\n  <svg class="icon"><use xlink:href="dist/icons.svg#trash"></use></svg>\n</id-popup>\n<id-popup class="js-more" title="More details">\n  <svg class="icon"><use xlink:href="dist/icons.svg#ellipsis-h"></use></svg>\n</id-popup>'},useData:!0})}();